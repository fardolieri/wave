import{P as ya,c as ba,a as Qe,n as wr,l as _a,d as Le,p as ur,e as jt,s as fr,f as zt,g as Je,h as bt,i as Q,u as Xt,j as Xe,k as Zt,m as Ze,o as Br,q as be,r as w,t as b,v as er,w as Sa,x as j,y as $e,z as qe,A as ue,B as $t,C as O,D as rn,E as Pe,F as tr,G as ce,H as Ca,I as _t,J as Xn,K as Ta,L as Lr,M as Ve,N as jr,O as rr,Q as Et,R as ka,S as Ot,T as st,U as xa,V as Pa,W as Ra,X as Zn,Y as ei,Z as zr,_ as Tt,$ as dt,a0 as nn,a1 as ti,a2 as dr,a3 as We,a4 as U,a5 as ye,a6 as ve,a7 as k,a8 as oe,a9 as Ea,aa as _,ab as pr,ac as $r,ad as me,ae as qr,af as Fr,ag as Oa,ah as Da,ai as ri,aj as Ce,ak as Nr,al as Ma,am as ni,an,ao as ii,ap as ai,aq as oi,ar as si,as as Ia,at as Aa,au as on,av as wa,aw as Hr,ax as Ba,ay as La,az as ja,aA as za,aB as $a,aC as sn,aD as qt,aE as qa,aF as vt,aG as Ur,aH as X,aI as Fa,aJ as Na,aK as Te,aL as Cr,aM as Ha,aN as Ua,aO as Ga,aP as Va,aQ as Wa}from"./index.a86cca2e.js";import{u as Ka,w as Qa,m as cn,r as Ja}from"./media-stream.7bb2bee2.js";import{_ as ci}from"./plugin-vue_export-helper.21dcd24c.js";const Gr={left:!0,right:!0,up:!0,down:!0,horizontal:!0,vertical:!0},Ya=Object.keys(Gr);Gr.all=!0;function ln(e){const r={};for(const t of Ya)e[t]===!0&&(r[t]=!0);return Object.keys(r).length===0?Gr:(r.horizontal===!0?r.left=r.right=!0:r.left===!0&&r.right===!0&&(r.horizontal=!0),r.vertical===!0?r.up=r.down=!0:r.up===!0&&r.down===!0&&(r.vertical=!0),r.horizontal===!0&&r.vertical===!0&&(r.all=!0),r)}function un(e,r){return r.event===void 0&&e.target!==void 0&&e.target.draggable!==!0&&typeof r.handler=="function"&&e.target.nodeName.toUpperCase()!=="INPUT"&&(e.qClonedBy===void 0||e.qClonedBy.indexOf(r.uid)===-1)}function Ft(){if(window.getSelection!==void 0){const e=window.getSelection();e.empty!==void 0?e.empty():e.removeAllRanges!==void 0&&(e.removeAllRanges(),ya.is.mobile!==!0&&e.addRange(document.createRange()))}else document.selection!==void 0&&document.selection.empty()}function hr(e,r,t){const n=zt(e);let i,a=n.left-r.event.x,c=n.top-r.event.y,l=Math.abs(a),o=Math.abs(c);const s=r.direction;s.horizontal===!0&&s.vertical!==!0?i=a<0?"left":"right":s.horizontal!==!0&&s.vertical===!0?i=c<0?"up":"down":s.up===!0&&c<0?(i="up",l>o&&(s.left===!0&&a<0?i="left":s.right===!0&&a>0&&(i="right"))):s.down===!0&&c>0?(i="down",l>o&&(s.left===!0&&a<0?i="left":s.right===!0&&a>0&&(i="right"))):s.left===!0&&a<0?(i="left",l<o&&(s.up===!0&&c<0?i="up":s.down===!0&&c>0&&(i="down"))):s.right===!0&&a>0&&(i="right",l<o&&(s.up===!0&&c<0?i="up":s.down===!0&&c>0&&(i="down")));let u=!1;if(i===void 0&&t===!1){if(r.event.isFirst===!0||r.event.lastDir===void 0)return{};i=r.event.lastDir,u=!0,i==="left"||i==="right"?(n.left-=a,l=0,a=0):(n.top-=c,o=0,c=0)}return{synthetic:u,payload:{evt:e,touch:r.event.mouse!==!0,mouse:r.event.mouse===!0,position:n,direction:i,isFirst:r.event.isFirst,isFinal:t===!0,duration:Date.now()-r.event.time,distance:{x:l,y:o},offset:{x:a,y:c},delta:{x:n.left-r.event.lastX,y:n.top-r.event.lastY}}}}let Xa=0;var pt=ba({name:"touch-pan",beforeMount(e,{value:r,modifiers:t}){if(t.mouse!==!0&&Qe.has.touch!==!0)return;function n(a,c){t.mouse===!0&&c===!0?bt(a):(t.stop===!0&&fr(a),t.prevent===!0&&jt(a))}const i={uid:"qvtp_"+Xa++,handler:r,modifiers:t,direction:ln(t),noop:wr,mouseStart(a){un(a,i)&&_a(a)&&(Le(i,"temp",[[document,"mousemove","move","notPassiveCapture"],[document,"mouseup","end","passiveCapture"]]),i.start(a,!0))},touchStart(a){if(un(a,i)){const c=a.target;Le(i,"temp",[[c,"touchmove","move","notPassiveCapture"],[c,"touchcancel","end","passiveCapture"],[c,"touchend","end","passiveCapture"]]),i.start(a)}},start(a,c){if(Qe.is.firefox===!0&&ur(e,!0),i.lastEvt=a,c===!0||t.stop===!0){if(i.direction.all!==!0&&(c!==!0||i.modifiers.mouseAllDir!==!0&&i.modifiers.mousealldir!==!0)){const s=a.type.indexOf("mouse")>-1?new MouseEvent(a.type,a):new TouchEvent(a.type,a);a.defaultPrevented===!0&&jt(s),a.cancelBubble===!0&&fr(s),Object.assign(s,{qKeyEvent:a.qKeyEvent,qClickOutside:a.qClickOutside,qAnchorHandled:a.qAnchorHandled,qClonedBy:a.qClonedBy===void 0?[i.uid]:a.qClonedBy.concat(i.uid)}),i.initialEvent={target:a.target,event:s}}fr(a)}const{left:l,top:o}=zt(a);i.event={x:l,y:o,time:Date.now(),mouse:c===!0,detected:!1,isFirst:!0,isFinal:!1,lastX:l,lastY:o}},move(a){if(i.event===void 0)return;const c=zt(a),l=c.left-i.event.x,o=c.top-i.event.y;if(l===0&&o===0)return;i.lastEvt=a;const s=i.event.mouse===!0,u=()=>{n(a,s);let p;t.preserveCursor!==!0&&t.preservecursor!==!0&&(p=document.documentElement.style.cursor||"",document.documentElement.style.cursor="grabbing"),s===!0&&document.body.classList.add("no-pointer-events--children"),document.body.classList.add("non-selectable"),Ft(),i.styleCleanup=h=>{if(i.styleCleanup=void 0,p!==void 0&&(document.documentElement.style.cursor=p),document.body.classList.remove("non-selectable"),s===!0){const v=()=>{document.body.classList.remove("no-pointer-events--children")};h!==void 0?setTimeout(()=>{v(),h()},50):v()}else h!==void 0&&h()}};if(i.event.detected===!0){i.event.isFirst!==!0&&n(a,i.event.mouse);const{payload:p,synthetic:h}=hr(a,i,!1);p!==void 0&&(i.handler(p)===!1?i.end(a):(i.styleCleanup===void 0&&i.event.isFirst===!0&&u(),i.event.lastX=p.position.left,i.event.lastY=p.position.top,i.event.lastDir=h===!0?void 0:p.direction,i.event.isFirst=!1));return}if(i.direction.all===!0||s===!0&&(i.modifiers.mouseAllDir===!0||i.modifiers.mousealldir===!0)){u(),i.event.detected=!0,i.move(a);return}const f=Math.abs(l),d=Math.abs(o);f!==d&&(i.direction.horizontal===!0&&f>d||i.direction.vertical===!0&&f<d||i.direction.up===!0&&f<d&&o<0||i.direction.down===!0&&f<d&&o>0||i.direction.left===!0&&f>d&&l<0||i.direction.right===!0&&f>d&&l>0?(i.event.detected=!0,i.move(a)):i.end(a,!0))},end(a,c){if(i.event!==void 0){if(Je(i,"temp"),Qe.is.firefox===!0&&ur(e,!1),c===!0)i.styleCleanup!==void 0&&i.styleCleanup(),i.event.detected!==!0&&i.initialEvent!==void 0&&i.initialEvent.target.dispatchEvent(i.initialEvent.event);else if(i.event.detected===!0){i.event.isFirst===!0&&i.handler(hr(a===void 0?i.lastEvt:a,i).payload);const{payload:l}=hr(a===void 0?i.lastEvt:a,i,!0),o=()=>{i.handler(l)};i.styleCleanup!==void 0?i.styleCleanup(o):o()}i.event=void 0,i.initialEvent=void 0,i.lastEvt=void 0}}};if(e.__qtouchpan=i,t.mouse===!0){const a=t.mouseCapture===!0||t.mousecapture===!0?"Capture":"";Le(i,"main",[[e,"mousedown","mouseStart",`passive${a}`]])}Qe.has.touch===!0&&Le(i,"main",[[e,"touchstart","touchStart",`passive${t.capture===!0?"Capture":""}`],[e,"touchmove","noop","notPassiveCapture"]])},updated(e,r){const t=e.__qtouchpan;t!==void 0&&(r.oldValue!==r.value&&(typeof value!="function"&&t.end(),t.handler=r.value),t.direction=ln(r.modifiers))},beforeUnmount(e){const r=e.__qtouchpan;r!==void 0&&(r.event!==void 0&&r.end(),Je(r,"main"),Je(r,"temp"),Qe.is.firefox===!0&&ur(e,!1),r.styleCleanup!==void 0&&r.styleCleanup(),delete e.__qtouchpan)}});function je(e,r,t){return t<=r?r:Math.min(t,Math.max(r,e))}const fn=150;var Za=Q({name:"QDrawer",inheritAttrs:!1,props:{...Xt,...Xe,side:{type:String,default:"left",validator:e=>["left","right"].includes(e)},width:{type:Number,default:300},mini:Boolean,miniToOverlay:Boolean,miniWidth:{type:Number,default:57},breakpoint:{type:Number,default:1023},showIfAbove:Boolean,behavior:{type:String,validator:e=>["default","desktop","mobile"].includes(e),default:"default"},bordered:Boolean,elevated:Boolean,overlay:Boolean,persistent:Boolean,noSwipeOpen:Boolean,noSwipeClose:Boolean,noSwipeBackdrop:Boolean},emits:[...Zt,"onLayout","miniState"],setup(e,{slots:r,emit:t,attrs:n}){const i=ce(),{proxy:{$q:a}}=i,c=Ze(e,a),{preventBodyScroll:l}=Ca(),{registerTimeout:o,removeTimeout:s}=Br(),u=tr(_t,be);if(u===be)return console.error("QDrawer needs to be child of QLayout"),be;let f,d=null,p;const h=w(e.behavior==="mobile"||e.behavior!=="desktop"&&u.totalWidth.value<=e.breakpoint),v=b(()=>e.mini===!0&&h.value!==!0),C=b(()=>v.value===!0?e.miniWidth:e.width),g=w(e.showIfAbove===!0&&h.value===!1?!0:e.modelValue===!0),m=b(()=>e.persistent!==!0&&(h.value===!0||ne.value===!0));function R(T,$){if(E(),T!==!1&&u.animate(),ge(0),h.value===!0){const pe=u.instances[x.value];pe!==void 0&&pe.belowBreakpoint===!0&&pe.hide(!1),we(1),u.isContainer.value!==!0&&l(!0)}else we(0),T!==!1&&sr(!1);o(()=>{T!==!1&&sr(!0),$!==!0&&t("show",T)},fn)}function P(T,$){z(),T!==!1&&u.animate(),we(0),ge(G.value*C.value),cr(),$!==!0?o(()=>{t("hide",T)},fn):s()}const{show:y,hide:B}=er({showing:g,hideOnRouteChange:m,handleShow:R,handleHide:P}),{addToHistory:E,removeFromHistory:z}=Sa(g,B,m),N={belowBreakpoint:h,hide:B},M=b(()=>e.side==="right"),G=b(()=>(a.lang.rtl===!0?-1:1)*(M.value===!0?1:-1)),Z=w(0),J=w(!1),W=w(!1),Y=w(C.value*G.value),x=b(()=>M.value===!0?"left":"right"),S=b(()=>g.value===!0&&h.value===!1&&e.overlay===!1?e.miniToOverlay===!0?e.miniWidth:C.value:0),A=b(()=>e.overlay===!0||e.miniToOverlay===!0||u.view.value.indexOf(M.value?"R":"L")>-1||a.platform.is.ios===!0&&u.isContainer.value===!0),H=b(()=>e.overlay===!1&&g.value===!0&&h.value===!1),ne=b(()=>e.overlay===!0&&g.value===!0&&h.value===!1),_e=b(()=>"fullscreen q-drawer__backdrop"+(g.value===!1&&J.value===!1?" hidden":"")),Se=b(()=>({backgroundColor:`rgba(0,0,0,${Z.value*.4})`})),F=b(()=>M.value===!0?u.rows.value.top[2]==="r":u.rows.value.top[0]==="l"),de=b(()=>M.value===!0?u.rows.value.bottom[2]==="r":u.rows.value.bottom[0]==="l"),ie=b(()=>{const T={};return u.header.space===!0&&F.value===!1&&(A.value===!0?T.top=`${u.header.offset}px`:u.header.space===!0&&(T.top=`${u.header.size}px`)),u.footer.space===!0&&de.value===!1&&(A.value===!0?T.bottom=`${u.footer.offset}px`:u.footer.space===!0&&(T.bottom=`${u.footer.size}px`)),T}),le=b(()=>{const T={width:`${C.value}px`,transform:`translateX(${Y.value}px)`};return h.value===!0?T:Object.assign(T,ie.value)}),Ee=b(()=>"q-drawer__content fit "+(u.isContainer.value!==!0?"scroll":"overflow-auto")),tt=b(()=>`q-drawer q-drawer--${e.side}`+(W.value===!0?" q-drawer--mini-animate":"")+(e.bordered===!0?" q-drawer--bordered":"")+(c.value===!0?" q-drawer--dark q-dark":"")+(J.value===!0?" no-transition":g.value===!0?"":" q-layout--prevent-focus")+(h.value===!0?" fixed q-drawer--on-top q-drawer--mobile q-drawer--top-padding":` q-drawer--${v.value===!0?"mini":"standard"}`+(A.value===!0||H.value!==!0?" fixed":"")+(e.overlay===!0||e.miniToOverlay===!0?" q-drawer--on-top":"")+(F.value===!0?" q-drawer--top-padding":""))),I=b(()=>{const T=a.lang.rtl===!0?e.side:x.value;return[[pt,ma,void 0,{[T]:!0,mouse:!0}]]}),Ae=b(()=>{const T=a.lang.rtl===!0?x.value:e.side;return[[pt,tn,void 0,{[T]:!0,mouse:!0}]]}),rt=b(()=>{const T=a.lang.rtl===!0?x.value:e.side;return[[pt,tn,void 0,{[T]:!0,mouse:!0,mouseAllDir:!0}]]});function nt(){ga(h,e.behavior==="mobile"||e.behavior!=="desktop"&&u.totalWidth.value<=e.breakpoint)}j(h,T=>{T===!0?(f=g.value,g.value===!0&&B(!1)):e.overlay===!1&&e.behavior!=="mobile"&&f!==!1&&(g.value===!0?(ge(0),we(0),cr()):y(!1))}),j(()=>e.side,(T,$)=>{u.instances[$]===N&&(u.instances[$]=void 0,u[$].space=!1,u[$].offset=0),u.instances[T]=N,u[T].size=C.value,u[T].space=H.value,u[T].offset=S.value}),j(u.totalWidth,()=>{(u.isContainer.value===!0||document.qScrollPrevented!==!0)&&nt()}),j(()=>e.behavior+e.breakpoint,nt),j(u.isContainer,T=>{g.value===!0&&l(T!==!0),T===!0&&nt()}),j(u.scrollbarWidth,()=>{ge(g.value===!0?0:void 0)}),j(S,T=>{Be("offset",T)}),j(H,T=>{t("onLayout",T),Be("space",T)}),j(M,()=>{ge()}),j(C,T=>{ge(),lr(e.miniToOverlay,T)}),j(()=>e.miniToOverlay,T=>{lr(T,C.value)}),j(()=>a.lang.rtl,()=>{ge()}),j(()=>e.mini,()=>{e.modelValue===!0&&(va(),u.animate())}),j(v,T=>{t("miniState",T)});function ge(T){T===void 0?qe(()=>{T=g.value===!0?0:C.value,ge(G.value*T)}):(u.isContainer.value===!0&&M.value===!0&&(h.value===!0||Math.abs(T)===C.value)&&(T+=G.value*u.scrollbarWidth.value),Y.value=T)}function we(T){Z.value=T}function sr(T){const $=T===!0?"remove":u.isContainer.value!==!0?"add":"";$!==""&&document.body.classList[$]("q-body--drawer-toggle")}function va(){d!==null&&clearTimeout(d),i.proxy&&i.proxy.$el&&i.proxy.$el.classList.add("q-drawer--mini-animate"),W.value=!0,d=setTimeout(()=>{d=null,W.value=!1,i&&i.proxy&&i.proxy.$el&&i.proxy.$el.classList.remove("q-drawer--mini-animate")},150)}function ma(T){if(g.value!==!1)return;const $=C.value,pe=je(T.distance.x,0,$);if(T.isFinal===!0){pe>=Math.min(75,$)===!0?y():(u.animate(),we(0),ge(G.value*$)),J.value=!1;return}ge((a.lang.rtl===!0?M.value!==!0:M.value)?Math.max($-pe,0):Math.min(0,pe-$)),we(je(pe/$,0,1)),T.isFirst===!0&&(J.value=!0)}function tn(T){if(g.value!==!0)return;const $=C.value,pe=T.direction===e.side,Ct=(a.lang.rtl===!0?pe!==!0:pe)?je(T.distance.x,0,$):0;if(T.isFinal===!0){Math.abs(Ct)<Math.min(75,$)===!0?(u.animate(),we(1),ge(0)):B(),J.value=!1;return}ge(G.value*Ct),we(je(1-Ct/$,0,1)),T.isFirst===!0&&(J.value=!0)}function cr(){l(!1),sr(!0)}function Be(T,$){u.update(e.side,T,$)}function ga(T,$){T.value!==$&&(T.value=$)}function lr(T,$){Be("size",T===!0?e.miniWidth:$)}return u.instances[e.side]=N,lr(e.miniToOverlay,C.value),Be("space",H.value),Be("offset",S.value),e.showIfAbove===!0&&e.modelValue!==!0&&g.value===!0&&e["onUpdate:modelValue"]!==void 0&&t("update:modelValue",!0),$e(()=>{t("onLayout",H.value),t("miniState",v.value),f=e.showIfAbove===!0;const T=()=>{(g.value===!0?R:P)(!1,!0)};if(u.totalWidth.value!==0){qe(T);return}p=j(u.totalWidth,()=>{p(),p=void 0,g.value===!1&&e.showIfAbove===!0&&h.value===!1?y(!1):T()})}),ue(()=>{p!==void 0&&p(),d!==null&&(clearTimeout(d),d=null),g.value===!0&&cr(),u.instances[e.side]===N&&(u.instances[e.side]=void 0,Be("size",0),Be("offset",0),Be("space",!1))}),()=>{const T=[];h.value===!0&&(e.noSwipeOpen===!1&&T.push($t(O("div",{key:"open",class:`q-drawer__opener fixed-${e.side}`,"aria-hidden":"true"}),I.value)),T.push(rn("div",{ref:"backdrop",class:_e.value,style:Se.value,"aria-hidden":"true",onClick:B},void 0,"backdrop",e.noSwipeBackdrop!==!0&&g.value===!0,()=>rt.value)));const $=v.value===!0&&r.mini!==void 0,pe=[O("div",{...n,key:""+$,class:[Ee.value,n.class]},$===!0?r.mini():Pe(r.default))];return e.elevated===!0&&g.value===!0&&pe.push(O("div",{class:"q-layout__shadow absolute-full overflow-hidden no-pointer-events"})),T.push(rn("aside",{ref:"content",class:tt.value,style:le.value},pe,"contentclose",e.noSwipeClose!==!0&&h.value===!0,()=>Ae.value)),O("div",{class:"q-drawer-container"},T)}}}),eo=Q({name:"QPageContainer",setup(e,{slots:r}){const{proxy:{$q:t}}=ce(),n=tr(_t,be);if(n===be)return console.error("QPageContainer needs to be child of QLayout"),be;Xn(Ta,!0);const i=b(()=>{const a={};return n.header.space===!0&&(a.paddingTop=`${n.header.size}px`),n.right.space===!0&&(a[`padding${t.lang.rtl===!0?"Left":"Right"}`]=`${n.right.size}px`),n.footer.space===!0&&(a.paddingBottom=`${n.footer.size}px`),n.left.space===!0&&(a[`padding${t.lang.rtl===!0?"Right":"Left"}`]=`${n.left.size}px`),a});return()=>O("div",{class:"q-page-container",style:i.value},Pe(r.default))}}),li=Q({name:"QToolbar",props:{inset:Boolean},setup(e,{slots:r}){const t=b(()=>"q-toolbar row no-wrap items-center"+(e.inset===!0?" q-toolbar--inset":""));return()=>O("div",{class:t.value,role:"toolbar"},Pe(r.default))}});function to(){const e=w(!Lr.value);return e.value===!1&&$e(()=>{e.value=!0}),e}const ui=typeof ResizeObserver<"u",dn=ui===!0?{}:{style:"display:block;position:absolute;top:0;left:0;right:0;bottom:0;height:100%;width:100%;overflow:hidden;pointer-events:none;z-index:-1;",url:"about:blank"};var Ye=Q({name:"QResizeObserver",props:{debounce:{type:[String,Number],default:100}},emits:["resize"],setup(e,{emit:r}){let t=null,n,i={width:-1,height:-1};function a(o){o===!0||e.debounce===0||e.debounce==="0"?c():t===null&&(t=setTimeout(c,e.debounce))}function c(){if(t!==null&&(clearTimeout(t),t=null),n){const{offsetWidth:o,offsetHeight:s}=n;(o!==i.width||s!==i.height)&&(i={width:o,height:s},r("resize",i))}}const{proxy:l}=ce();if(ui===!0){let o;const s=u=>{n=l.$el.parentNode,n?(o=new ResizeObserver(a),o.observe(n),c()):u!==!0&&qe(()=>{s(!0)})};return $e(()=>{s()}),ue(()=>{t!==null&&clearTimeout(t),o!==void 0&&(o.disconnect!==void 0?o.disconnect():n&&o.unobserve(n))}),wr}else{let u=function(){t!==null&&(clearTimeout(t),t=null),s!==void 0&&(s.removeEventListener!==void 0&&s.removeEventListener("resize",a,Ve.passive),s=void 0)},f=function(){u(),n&&n.contentDocument&&(s=n.contentDocument.defaultView,s.addEventListener("resize",a,Ve.passive),c())};const o=to();let s;return $e(()=>{qe(()=>{n=l.$el,n&&f()})}),ue(u),l.trigger=a,()=>{if(o.value===!0)return O("object",{style:dn.style,tabindex:-1,type:"text/html",data:dn.url,"aria-hidden":"true",onLoad:f})}}}}),ro=Q({name:"QFooter",props:{modelValue:{type:Boolean,default:!0},reveal:Boolean,bordered:Boolean,elevated:Boolean,heightHint:{type:[String,Number],default:50}},emits:["reveal","focusin"],setup(e,{slots:r,emit:t}){const{proxy:{$q:n}}=ce(),i=tr(_t,be);if(i===be)return console.error("QFooter needs to be child of QLayout"),be;const a=w(parseInt(e.heightHint,10)),c=w(!0),l=w(Lr.value===!0||i.isContainer.value===!0?0:window.innerHeight),o=b(()=>e.reveal===!0||i.view.value.indexOf("F")>-1||n.platform.is.ios&&i.isContainer.value===!0),s=b(()=>i.isContainer.value===!0?i.containerHeight.value:l.value),u=b(()=>{if(e.modelValue!==!0)return 0;if(o.value===!0)return c.value===!0?a.value:0;const y=i.scroll.value.position+s.value+a.value-i.height.value;return y>0?y:0}),f=b(()=>e.modelValue!==!0||o.value===!0&&c.value!==!0),d=b(()=>e.modelValue===!0&&f.value===!0&&e.reveal===!0),p=b(()=>"q-footer q-layout__section--marginal "+(o.value===!0?"fixed":"absolute")+"-bottom"+(e.bordered===!0?" q-footer--bordered":"")+(f.value===!0?" q-footer--hidden":"")+(e.modelValue!==!0?" q-layout--prevent-focus"+(o.value!==!0?" hidden":""):"")),h=b(()=>{const y=i.rows.value.bottom,B={};return y[0]==="l"&&i.left.space===!0&&(B[n.lang.rtl===!0?"right":"left"]=`${i.left.size}px`),y[2]==="r"&&i.right.space===!0&&(B[n.lang.rtl===!0?"left":"right"]=`${i.right.size}px`),B});function v(y,B){i.update("footer",y,B)}function C(y,B){y.value!==B&&(y.value=B)}function g({height:y}){C(a,y),v("size",y)}function m(){if(e.reveal!==!0)return;const{direction:y,position:B,inflectionPoint:E}=i.scroll.value;C(c,y==="up"||B-E<100||i.height.value-s.value-B-a.value<300)}function R(y){d.value===!0&&C(c,!0),t("focusin",y)}j(()=>e.modelValue,y=>{v("space",y),C(c,!0),i.animate()}),j(u,y=>{v("offset",y)}),j(()=>e.reveal,y=>{y===!1&&C(c,e.modelValue)}),j(c,y=>{i.animate(),t("reveal",y)}),j([a,i.scroll,i.height],m),j(()=>n.screen.height,y=>{i.isContainer.value!==!0&&C(l,y)});const P={};return i.instances.footer=P,e.modelValue===!0&&v("size",a.value),v("space",e.modelValue),v("offset",u.value),ue(()=>{i.instances.footer===P&&(i.instances.footer=void 0,v("size",0),v("offset",0),v("space",!1))}),()=>{const y=jr(r.default,[O(Ye,{debounce:0,onResize:g})]);return e.elevated===!0&&y.push(O("div",{class:"q-layout__shadow absolute-full overflow-hidden no-pointer-events"})),O("footer",{class:p.value,style:h.value,onFocusin:R},y)}}});const{passive:pn}=Ve,no=["both","horizontal","vertical"];var fi=Q({name:"QScrollObserver",props:{axis:{type:String,validator:e=>no.includes(e),default:"vertical"},debounce:[String,Number],scrollTarget:{default:void 0}},emits:["scroll"],setup(e,{emit:r}){const t={position:{top:0,left:0},direction:"down",directionChanged:!1,delta:{top:0,left:0},inflectionPoint:{top:0,left:0}};let n=null,i,a;j(()=>e.scrollTarget,()=>{o(),l()});function c(){n!==null&&n();const f=Math.max(0,Et(i)),d=ka(i),p={top:f-t.position.top,left:d-t.position.left};if(e.axis==="vertical"&&p.top===0||e.axis==="horizontal"&&p.left===0)return;const h=Math.abs(p.top)>=Math.abs(p.left)?p.top<0?"up":"down":p.left<0?"left":"right";t.position={top:f,left:d},t.directionChanged=t.direction!==h,t.delta=p,t.directionChanged===!0&&(t.direction=h,t.inflectionPoint=t.position),r("scroll",{...t})}function l(){i=rr(a,e.scrollTarget),i.addEventListener("scroll",s,pn),s(!0)}function o(){i!==void 0&&(i.removeEventListener("scroll",s,pn),i=void 0)}function s(f){if(f===!0||e.debounce===0||e.debounce==="0")c();else if(n===null){const[d,p]=e.debounce?[setTimeout(c,e.debounce),clearTimeout]:[requestAnimationFrame(c),cancelAnimationFrame];n=()=>{p(d),n=null}}}const{proxy:u}=ce();return j(()=>u.$q.lang.rtl,c),$e(()=>{a=u.$el.parentNode,l()}),ue(()=>{n!==null&&n(),o()}),Object.assign(u,{trigger:s,getPosition:()=>t}),wr}}),io=Q({name:"QLayout",props:{container:Boolean,view:{type:String,default:"hhh lpr fff",validator:e=>/^(h|l)h(h|r) lpr (f|l)f(f|r)$/.test(e.toLowerCase())},onScroll:Function,onScrollHeight:Function,onResize:Function},setup(e,{slots:r,emit:t}){const{proxy:{$q:n}}=ce(),i=w(null),a=w(n.screen.height),c=w(e.container===!0?0:n.screen.width),l=w({position:0,direction:"down",inflectionPoint:0}),o=w(0),s=w(Lr.value===!0?0:Ot()),u=b(()=>"q-layout q-layout--"+(e.container===!0?"containerized":"standard")),f=b(()=>e.container===!1?{minHeight:n.screen.height+"px"}:null),d=b(()=>s.value!==0?{[n.lang.rtl===!0?"left":"right"]:`${s.value}px`}:null),p=b(()=>s.value!==0?{[n.lang.rtl===!0?"right":"left"]:0,[n.lang.rtl===!0?"left":"right"]:`-${s.value}px`,width:`calc(100% + ${s.value}px)`}:null);function h(P){if(e.container===!0||document.qScrollPrevented!==!0){const y={position:P.position.top,direction:P.direction,directionChanged:P.directionChanged,inflectionPoint:P.inflectionPoint.top,delta:P.delta.top};l.value=y,e.onScroll!==void 0&&t("scroll",y)}}function v(P){const{height:y,width:B}=P;let E=!1;a.value!==y&&(E=!0,a.value=y,e.onScrollHeight!==void 0&&t("scrollHeight",y),g()),c.value!==B&&(E=!0,c.value=B),E===!0&&e.onResize!==void 0&&t("resize",P)}function C({height:P}){o.value!==P&&(o.value=P,g())}function g(){if(e.container===!0){const P=a.value>o.value?Ot():0;s.value!==P&&(s.value=P)}}let m=null;const R={instances:{},view:b(()=>e.view),isContainer:b(()=>e.container),rootRef:i,height:a,containerHeight:o,scrollbarWidth:s,totalWidth:b(()=>c.value+s.value),rows:b(()=>{const P=e.view.toLowerCase().split(" ");return{top:P[0].split(""),middle:P[1].split(""),bottom:P[2].split("")}}),header:st({size:0,offset:0,space:!1}),right:st({size:300,offset:0,space:!1}),footer:st({size:0,offset:0,space:!1}),left:st({size:300,offset:0,space:!1}),scroll:l,animate(){m!==null?clearTimeout(m):document.body.classList.add("q-body--layout-animate"),m=setTimeout(()=>{m=null,document.body.classList.remove("q-body--layout-animate")},155)},update(P,y,B){R[P][y]=B}};if(Xn(_t,R),Ot()>0){let B=function(){P=null,y.classList.remove("hide-scrollbar")},E=function(){if(P===null){if(y.scrollHeight>n.screen.height)return;y.classList.add("hide-scrollbar")}else clearTimeout(P);P=setTimeout(B,300)},z=function(N){P!==null&&N==="remove"&&(clearTimeout(P),B()),window[`${N}EventListener`]("resize",E)},P=null;const y=document.body;j(()=>e.container!==!0?"add":"remove",z),e.container!==!0&&z("add"),xa(()=>{z("remove")})}return()=>{const P=jr(r.default,[O(fi,{onScroll:h}),O(Ye,{onResize:v})]),y=O("div",{class:u.value,style:f.value,ref:e.container===!0?void 0:i,tabindex:-1},P);return e.container===!0?O("div",{class:"q-layout-container overflow-hidden",ref:i},[O(Ye,{onResize:C}),O("div",{class:"absolute-full",style:d.value},[O("div",{class:"scroll",style:p.value},[y])])]):y}}});const Tr="123456789abcdefghijkmnpqrstvwxyz",Nt="0",ao=Object.fromEntries(Tr.split("").map((e,r)=>[e,r]));function oo(e){const r=new DataView(e);let t=0,n=0,i="";for(let a=0;a<r.byteLength;a++)for(n=n<<8|r.getUint8(a),t+=8;t>=5;)i+=Tr[n>>>t-5&31],t-=5;return t>0&&(i+=Tr[n<<5-t&31]),i+=Nt,i}function so(e){if(!e.endsWith(Nt))throw new Error(`Base33 encoding needs to end with a '${Nt}'.`);const r=e.slice(0,-1),t=r.length,n=Math.floor(t*5/8);let i=0,a=0,c=0;const l=new Uint8Array(n);for(let o=0;o<t;o++)a=a<<5|ao[r[o]],i+=5,i>=8&&(l[c++]=a>>>i-8&255,i-=8);return l.buffer}var Vr={exports:{}};(function(e){var r={};r.useBlobBuilder=function(){try{return new Blob([]),!1}catch{return!0}}(),r.useArrayBufferView=!r.useBlobBuilder&&function(){try{return new Blob([new Uint8Array([])]).size===0}catch{return!0}}(),e.exports.binaryFeatures=r;var t=e.exports.BlobBuilder;typeof window<"u"&&(t=e.exports.BlobBuilder=window.WebKitBlobBuilder||window.MozBlobBuilder||window.MSBlobBuilder||window.BlobBuilder);function n(){this._pieces=[],this._parts=[]}n.prototype.append=function(i){typeof i=="number"?this._pieces.push(i):(this.flush(),this._parts.push(i))},n.prototype.flush=function(){if(this._pieces.length>0){var i=new Uint8Array(this._pieces);r.useArrayBufferView||(i=i.buffer),this._parts.push(i),this._pieces=[]}},n.prototype.getBuffer=function(){if(this.flush(),r.useBlobBuilder){for(var i=new t,a=0,c=this._parts.length;a<c;a++)i.append(this._parts[a]);return i.getBlob()}else return new Blob(this._parts)},e.exports.BufferBuilder=n})(Vr);var co=Vr.exports.BufferBuilder,hn=Vr.exports.binaryFeatures,lo={unpack:function(e){var r=new te(e);return r.unpack()},pack:function(e){var r=new re;r.pack(e);var t=r.getBuffer();return t}},vn=lo;function te(e){this.index=0,this.dataBuffer=e,this.dataView=new Uint8Array(this.dataBuffer),this.length=this.dataBuffer.byteLength}te.prototype.unpack=function(){var e=this.unpack_uint8();if(e<128)return e;if((e^224)<32)return(e^224)-32;var r;if((r=e^160)<=15)return this.unpack_raw(r);if((r=e^176)<=15)return this.unpack_string(r);if((r=e^144)<=15)return this.unpack_array(r);if((r=e^128)<=15)return this.unpack_map(r);switch(e){case 192:return null;case 193:return;case 194:return!1;case 195:return!0;case 202:return this.unpack_float();case 203:return this.unpack_double();case 204:return this.unpack_uint8();case 205:return this.unpack_uint16();case 206:return this.unpack_uint32();case 207:return this.unpack_uint64();case 208:return this.unpack_int8();case 209:return this.unpack_int16();case 210:return this.unpack_int32();case 211:return this.unpack_int64();case 212:return;case 213:return;case 214:return;case 215:return;case 216:return r=this.unpack_uint16(),this.unpack_string(r);case 217:return r=this.unpack_uint32(),this.unpack_string(r);case 218:return r=this.unpack_uint16(),this.unpack_raw(r);case 219:return r=this.unpack_uint32(),this.unpack_raw(r);case 220:return r=this.unpack_uint16(),this.unpack_array(r);case 221:return r=this.unpack_uint32(),this.unpack_array(r);case 222:return r=this.unpack_uint16(),this.unpack_map(r);case 223:return r=this.unpack_uint32(),this.unpack_map(r)}};te.prototype.unpack_uint8=function(){var e=this.dataView[this.index]&255;return this.index++,e};te.prototype.unpack_uint16=function(){var e=this.read(2),r=(e[0]&255)*256+(e[1]&255);return this.index+=2,r};te.prototype.unpack_uint32=function(){var e=this.read(4),r=((e[0]*256+e[1])*256+e[2])*256+e[3];return this.index+=4,r};te.prototype.unpack_uint64=function(){var e=this.read(8),r=((((((e[0]*256+e[1])*256+e[2])*256+e[3])*256+e[4])*256+e[5])*256+e[6])*256+e[7];return this.index+=8,r};te.prototype.unpack_int8=function(){var e=this.unpack_uint8();return e<128?e:e-(1<<8)};te.prototype.unpack_int16=function(){var e=this.unpack_uint16();return e<32768?e:e-(1<<16)};te.prototype.unpack_int32=function(){var e=this.unpack_uint32();return e<Math.pow(2,31)?e:e-Math.pow(2,32)};te.prototype.unpack_int64=function(){var e=this.unpack_uint64();return e<Math.pow(2,63)?e:e-Math.pow(2,64)};te.prototype.unpack_raw=function(e){if(this.length<this.index+e)throw new Error("BinaryPackFailure: index is out of range "+this.index+" "+e+" "+this.length);var r=this.dataBuffer.slice(this.index,this.index+e);return this.index+=e,r};te.prototype.unpack_string=function(e){for(var r=this.read(e),t=0,n="",i,a;t<e;)i=r[t],i<128?(n+=String.fromCharCode(i),t++):(i^192)<32?(a=(i^192)<<6|r[t+1]&63,n+=String.fromCharCode(a),t+=2):(a=(i&15)<<12|(r[t+1]&63)<<6|r[t+2]&63,n+=String.fromCharCode(a),t+=3);return this.index+=e,n};te.prototype.unpack_array=function(e){for(var r=new Array(e),t=0;t<e;t++)r[t]=this.unpack();return r};te.prototype.unpack_map=function(e){for(var r={},t=0;t<e;t++){var n=this.unpack(),i=this.unpack();r[n]=i}return r};te.prototype.unpack_float=function(){var e=this.unpack_uint32(),r=e>>31,t=(e>>23&255)-127,n=e&8388607|8388608;return(r===0?1:-1)*n*Math.pow(2,t-23)};te.prototype.unpack_double=function(){var e=this.unpack_uint32(),r=this.unpack_uint32(),t=e>>31,n=(e>>20&2047)-1023,i=e&1048575|1048576,a=i*Math.pow(2,n-20)+r*Math.pow(2,n-52);return(t===0?1:-1)*a};te.prototype.read=function(e){var r=this.index;if(r+e<=this.length)return this.dataView.subarray(r,r+e);throw new Error("BinaryPackFailure: read index out of range")};function re(){this.bufferBuilder=new co}re.prototype.getBuffer=function(){return this.bufferBuilder.getBuffer()};re.prototype.pack=function(e){var r=typeof e;if(r==="string")this.pack_string(e);else if(r==="number")Math.floor(e)===e?this.pack_integer(e):this.pack_double(e);else if(r==="boolean")e===!0?this.bufferBuilder.append(195):e===!1&&this.bufferBuilder.append(194);else if(r==="undefined")this.bufferBuilder.append(192);else if(r==="object")if(e===null)this.bufferBuilder.append(192);else{var t=e.constructor;if(t==Array)this.pack_array(e);else if(t==Blob||t==File||e instanceof Blob||e instanceof File)this.pack_bin(e);else if(t==ArrayBuffer)hn.useArrayBufferView?this.pack_bin(new Uint8Array(e)):this.pack_bin(e);else if("BYTES_PER_ELEMENT"in e)hn.useArrayBufferView?this.pack_bin(new Uint8Array(e.buffer)):this.pack_bin(e.buffer);else if(t==Object||t.toString().startsWith("class"))this.pack_object(e);else if(t==Date)this.pack_string(e.toString());else if(typeof e.toBinaryPack=="function")this.bufferBuilder.append(e.toBinaryPack());else throw new Error('Type "'+t.toString()+'" not yet supported')}else throw new Error('Type "'+r+'" not yet supported');this.bufferBuilder.flush()};re.prototype.pack_bin=function(e){var r=e.length||e.byteLength||e.size;if(r<=15)this.pack_uint8(160+r);else if(r<=65535)this.bufferBuilder.append(218),this.pack_uint16(r);else if(r<=4294967295)this.bufferBuilder.append(219),this.pack_uint32(r);else throw new Error("Invalid length");this.bufferBuilder.append(e)};re.prototype.pack_string=function(e){var r=fo(e);if(r<=15)this.pack_uint8(176+r);else if(r<=65535)this.bufferBuilder.append(216),this.pack_uint16(r);else if(r<=4294967295)this.bufferBuilder.append(217),this.pack_uint32(r);else throw new Error("Invalid length");this.bufferBuilder.append(e)};re.prototype.pack_array=function(e){var r=e.length;if(r<=15)this.pack_uint8(144+r);else if(r<=65535)this.bufferBuilder.append(220),this.pack_uint16(r);else if(r<=4294967295)this.bufferBuilder.append(221),this.pack_uint32(r);else throw new Error("Invalid length");for(var t=0;t<r;t++)this.pack(e[t])};re.prototype.pack_integer=function(e){if(e>=-32&&e<=127)this.bufferBuilder.append(e&255);else if(e>=0&&e<=255)this.bufferBuilder.append(204),this.pack_uint8(e);else if(e>=-128&&e<=127)this.bufferBuilder.append(208),this.pack_int8(e);else if(e>=0&&e<=65535)this.bufferBuilder.append(205),this.pack_uint16(e);else if(e>=-32768&&e<=32767)this.bufferBuilder.append(209),this.pack_int16(e);else if(e>=0&&e<=4294967295)this.bufferBuilder.append(206),this.pack_uint32(e);else if(e>=-2147483648&&e<=2147483647)this.bufferBuilder.append(210),this.pack_int32(e);else if(e>=-9223372036854776e3&&e<=9223372036854776e3)this.bufferBuilder.append(211),this.pack_int64(e);else if(e>=0&&e<=18446744073709552e3)this.bufferBuilder.append(207),this.pack_uint64(e);else throw new Error("Invalid integer")};re.prototype.pack_double=function(e){var r=0;e<0&&(r=1,e=-e);var t=Math.floor(Math.log(e)/Math.LN2),n=e/Math.pow(2,t)-1,i=Math.floor(n*Math.pow(2,52)),a=Math.pow(2,32),c=r<<31|t+1023<<20|i/a&1048575,l=i%a;this.bufferBuilder.append(203),this.pack_int32(c),this.pack_int32(l)};re.prototype.pack_object=function(e){var r=Object.keys(e),t=r.length;if(t<=15)this.pack_uint8(128+t);else if(t<=65535)this.bufferBuilder.append(222),this.pack_uint16(t);else if(t<=4294967295)this.bufferBuilder.append(223),this.pack_uint32(t);else throw new Error("Invalid length");for(var n in e)e.hasOwnProperty(n)&&(this.pack(n),this.pack(e[n]))};re.prototype.pack_uint8=function(e){this.bufferBuilder.append(e)};re.prototype.pack_uint16=function(e){this.bufferBuilder.append(e>>8),this.bufferBuilder.append(e&255)};re.prototype.pack_uint32=function(e){var r=e&4294967295;this.bufferBuilder.append((r&4278190080)>>>24),this.bufferBuilder.append((r&16711680)>>>16),this.bufferBuilder.append((r&65280)>>>8),this.bufferBuilder.append(r&255)};re.prototype.pack_uint64=function(e){var r=e/Math.pow(2,32),t=e%Math.pow(2,32);this.bufferBuilder.append((r&4278190080)>>>24),this.bufferBuilder.append((r&16711680)>>>16),this.bufferBuilder.append((r&65280)>>>8),this.bufferBuilder.append(r&255),this.bufferBuilder.append((t&4278190080)>>>24),this.bufferBuilder.append((t&16711680)>>>16),this.bufferBuilder.append((t&65280)>>>8),this.bufferBuilder.append(t&255)};re.prototype.pack_int8=function(e){this.bufferBuilder.append(e&255)};re.prototype.pack_int16=function(e){this.bufferBuilder.append((e&65280)>>8),this.bufferBuilder.append(e&255)};re.prototype.pack_int32=function(e){this.bufferBuilder.append(e>>>24&255),this.bufferBuilder.append((e&16711680)>>>16),this.bufferBuilder.append((e&65280)>>>8),this.bufferBuilder.append(e&255)};re.prototype.pack_int64=function(e){var r=Math.floor(e/Math.pow(2,32)),t=e%Math.pow(2,32);this.bufferBuilder.append((r&4278190080)>>>24),this.bufferBuilder.append((r&16711680)>>>16),this.bufferBuilder.append((r&65280)>>>8),this.bufferBuilder.append(r&255),this.bufferBuilder.append((t&4278190080)>>>24),this.bufferBuilder.append((t&16711680)>>>16),this.bufferBuilder.append((t&65280)>>>8),this.bufferBuilder.append(t&255)};function uo(e){var r=e.charCodeAt(0);return r<=2047?"00":r<=65535?"000":r<=2097151?"0000":r<=67108863?"00000":"000000"}function fo(e){return e.length>600?new Blob([e]).size:e.replace(/[^\u0000-\u007F]/g,uo).length}let di=!0,pi=!0;function ct(e,r,t){const n=e.match(r);return n&&n.length>=t&&parseInt(n[t],10)}function et(e,r,t){if(!e.RTCPeerConnection)return;const n=e.RTCPeerConnection.prototype,i=n.addEventListener;n.addEventListener=function(c,l){if(c!==r)return i.apply(this,arguments);const o=s=>{const u=t(s);u&&(l.handleEvent?l.handleEvent(u):l(u))};return this._eventMap=this._eventMap||{},this._eventMap[r]||(this._eventMap[r]=new Map),this._eventMap[r].set(l,o),i.apply(this,[c,o])};const a=n.removeEventListener;n.removeEventListener=function(c,l){if(c!==r||!this._eventMap||!this._eventMap[r])return a.apply(this,arguments);if(!this._eventMap[r].has(l))return a.apply(this,arguments);const o=this._eventMap[r].get(l);return this._eventMap[r].delete(l),this._eventMap[r].size===0&&delete this._eventMap[r],Object.keys(this._eventMap).length===0&&delete this._eventMap,a.apply(this,[c,o])},Object.defineProperty(n,"on"+r,{get(){return this["_on"+r]},set(c){this["_on"+r]&&(this.removeEventListener(r,this["_on"+r]),delete this["_on"+r]),c&&this.addEventListener(r,this["_on"+r]=c)},enumerable:!0,configurable:!0})}function po(e){return typeof e!="boolean"?new Error("Argument type: "+typeof e+". Please use a boolean."):(di=e,e?"adapter.js logging disabled":"adapter.js logging enabled")}function ho(e){return typeof e!="boolean"?new Error("Argument type: "+typeof e+". Please use a boolean."):(pi=!e,"adapter.js deprecation warnings "+(e?"disabled":"enabled"))}function Wr(){if(typeof window=="object"){if(di)return;typeof console<"u"&&typeof console.log=="function"&&console.log.apply(console,arguments)}}function nr(e,r){!pi||console.warn(e+" is deprecated, please use "+r+" instead.")}function vo(e){const r={browser:null,version:null};if(typeof e>"u"||!e.navigator)return r.browser="Not a browser.",r;const{navigator:t}=e;if(t.mozGetUserMedia)r.browser="firefox",r.version=ct(t.userAgent,/Firefox\/(\d+)\./,1);else if(t.webkitGetUserMedia||e.isSecureContext===!1&&e.webkitRTCPeerConnection&&!e.RTCIceGatherer)r.browser="chrome",r.version=ct(t.userAgent,/Chrom(e|ium)\/(\d+)\./,2);else if(t.mediaDevices&&t.userAgent.match(/Edge\/(\d+).(\d+)$/))r.browser="edge",r.version=ct(t.userAgent,/Edge\/(\d+).(\d+)$/,2);else if(e.RTCPeerConnection&&t.userAgent.match(/AppleWebKit\/(\d+)\./))r.browser="safari",r.version=ct(t.userAgent,/AppleWebKit\/(\d+)\./,1),r.supportsUnifiedPlan=e.RTCRtpTransceiver&&"currentDirection"in e.RTCRtpTransceiver.prototype;else return r.browser="Not a supported browser.",r;return r}function mn(e){return Object.prototype.toString.call(e)==="[object Object]"}function hi(e){return mn(e)?Object.keys(e).reduce(function(r,t){const n=mn(e[t]),i=n?hi(e[t]):e[t],a=n&&!Object.keys(i).length;return i===void 0||a?r:Object.assign(r,{[t]:i})},{}):e}function kr(e,r,t){!r||t.has(r.id)||(t.set(r.id,r),Object.keys(r).forEach(n=>{n.endsWith("Id")?kr(e,e.get(r[n]),t):n.endsWith("Ids")&&r[n].forEach(i=>{kr(e,e.get(i),t)})}))}function gn(e,r,t){const n=t?"outbound-rtp":"inbound-rtp",i=new Map;if(r===null)return i;const a=[];return e.forEach(c=>{c.type==="track"&&c.trackIdentifier===r.id&&a.push(c)}),a.forEach(c=>{e.forEach(l=>{l.type===n&&l.trackId===c.id&&kr(e,l,i)})}),i}const yn=Wr;function vi(e,r){const t=e&&e.navigator;if(!t.mediaDevices)return;const n=function(l){if(typeof l!="object"||l.mandatory||l.optional)return l;const o={};return Object.keys(l).forEach(s=>{if(s==="require"||s==="advanced"||s==="mediaSource")return;const u=typeof l[s]=="object"?l[s]:{ideal:l[s]};u.exact!==void 0&&typeof u.exact=="number"&&(u.min=u.max=u.exact);const f=function(d,p){return d?d+p.charAt(0).toUpperCase()+p.slice(1):p==="deviceId"?"sourceId":p};if(u.ideal!==void 0){o.optional=o.optional||[];let d={};typeof u.ideal=="number"?(d[f("min",s)]=u.ideal,o.optional.push(d),d={},d[f("max",s)]=u.ideal,o.optional.push(d)):(d[f("",s)]=u.ideal,o.optional.push(d))}u.exact!==void 0&&typeof u.exact!="number"?(o.mandatory=o.mandatory||{},o.mandatory[f("",s)]=u.exact):["min","max"].forEach(d=>{u[d]!==void 0&&(o.mandatory=o.mandatory||{},o.mandatory[f(d,s)]=u[d])})}),l.advanced&&(o.optional=(o.optional||[]).concat(l.advanced)),o},i=function(l,o){if(r.version>=61)return o(l);if(l=JSON.parse(JSON.stringify(l)),l&&typeof l.audio=="object"){const s=function(u,f,d){f in u&&!(d in u)&&(u[d]=u[f],delete u[f])};l=JSON.parse(JSON.stringify(l)),s(l.audio,"autoGainControl","googAutoGainControl"),s(l.audio,"noiseSuppression","googNoiseSuppression"),l.audio=n(l.audio)}if(l&&typeof l.video=="object"){let s=l.video.facingMode;s=s&&(typeof s=="object"?s:{ideal:s});const u=r.version<66;if(s&&(s.exact==="user"||s.exact==="environment"||s.ideal==="user"||s.ideal==="environment")&&!(t.mediaDevices.getSupportedConstraints&&t.mediaDevices.getSupportedConstraints().facingMode&&!u)){delete l.video.facingMode;let f;if(s.exact==="environment"||s.ideal==="environment"?f=["back","rear"]:(s.exact==="user"||s.ideal==="user")&&(f=["front"]),f)return t.mediaDevices.enumerateDevices().then(d=>{d=d.filter(h=>h.kind==="videoinput");let p=d.find(h=>f.some(v=>h.label.toLowerCase().includes(v)));return!p&&d.length&&f.includes("back")&&(p=d[d.length-1]),p&&(l.video.deviceId=s.exact?{exact:p.deviceId}:{ideal:p.deviceId}),l.video=n(l.video),yn("chrome: "+JSON.stringify(l)),o(l)})}l.video=n(l.video)}return yn("chrome: "+JSON.stringify(l)),o(l)},a=function(l){return r.version>=64?l:{name:{PermissionDeniedError:"NotAllowedError",PermissionDismissedError:"NotAllowedError",InvalidStateError:"NotAllowedError",DevicesNotFoundError:"NotFoundError",ConstraintNotSatisfiedError:"OverconstrainedError",TrackStartError:"NotReadableError",MediaDeviceFailedDueToShutdown:"NotAllowedError",MediaDeviceKillSwitchOn:"NotAllowedError",TabCaptureError:"AbortError",ScreenCaptureError:"AbortError",DeviceCaptureError:"AbortError"}[l.name]||l.name,message:l.message,constraint:l.constraint||l.constraintName,toString(){return this.name+(this.message&&": ")+this.message}}},c=function(l,o,s){i(l,u=>{t.webkitGetUserMedia(u,o,f=>{s&&s(a(f))})})};if(t.getUserMedia=c.bind(t),t.mediaDevices.getUserMedia){const l=t.mediaDevices.getUserMedia.bind(t.mediaDevices);t.mediaDevices.getUserMedia=function(o){return i(o,s=>l(s).then(u=>{if(s.audio&&!u.getAudioTracks().length||s.video&&!u.getVideoTracks().length)throw u.getTracks().forEach(f=>{f.stop()}),new DOMException("","NotFoundError");return u},u=>Promise.reject(a(u))))}}}function mo(e,r){if(!(e.navigator.mediaDevices&&"getDisplayMedia"in e.navigator.mediaDevices)&&!!e.navigator.mediaDevices){if(typeof r!="function"){console.error("shimGetDisplayMedia: getSourceId argument is not a function");return}e.navigator.mediaDevices.getDisplayMedia=function(n){return r(n).then(i=>{const a=n.video&&n.video.width,c=n.video&&n.video.height,l=n.video&&n.video.frameRate;return n.video={mandatory:{chromeMediaSource:"desktop",chromeMediaSourceId:i,maxFrameRate:l||3}},a&&(n.video.mandatory.maxWidth=a),c&&(n.video.mandatory.maxHeight=c),e.navigator.mediaDevices.getUserMedia(n)})}}}function mi(e){e.MediaStream=e.MediaStream||e.webkitMediaStream}function gi(e){if(typeof e=="object"&&e.RTCPeerConnection&&!("ontrack"in e.RTCPeerConnection.prototype)){Object.defineProperty(e.RTCPeerConnection.prototype,"ontrack",{get(){return this._ontrack},set(t){this._ontrack&&this.removeEventListener("track",this._ontrack),this.addEventListener("track",this._ontrack=t)},enumerable:!0,configurable:!0});const r=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(){return this._ontrackpoly||(this._ontrackpoly=n=>{n.stream.addEventListener("addtrack",i=>{let a;e.RTCPeerConnection.prototype.getReceivers?a=this.getReceivers().find(l=>l.track&&l.track.id===i.track.id):a={track:i.track};const c=new Event("track");c.track=i.track,c.receiver=a,c.transceiver={receiver:a},c.streams=[n.stream],this.dispatchEvent(c)}),n.stream.getTracks().forEach(i=>{let a;e.RTCPeerConnection.prototype.getReceivers?a=this.getReceivers().find(l=>l.track&&l.track.id===i.id):a={track:i};const c=new Event("track");c.track=i,c.receiver=a,c.transceiver={receiver:a},c.streams=[n.stream],this.dispatchEvent(c)})},this.addEventListener("addstream",this._ontrackpoly)),r.apply(this,arguments)}}else et(e,"track",r=>(r.transceiver||Object.defineProperty(r,"transceiver",{value:{receiver:r.receiver}}),r))}function yi(e){if(typeof e=="object"&&e.RTCPeerConnection&&!("getSenders"in e.RTCPeerConnection.prototype)&&"createDTMFSender"in e.RTCPeerConnection.prototype){const r=function(i,a){return{track:a,get dtmf(){return this._dtmf===void 0&&(a.kind==="audio"?this._dtmf=i.createDTMFSender(a):this._dtmf=null),this._dtmf},_pc:i}};if(!e.RTCPeerConnection.prototype.getSenders){e.RTCPeerConnection.prototype.getSenders=function(){return this._senders=this._senders||[],this._senders.slice()};const i=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addTrack=function(l,o){let s=i.apply(this,arguments);return s||(s=r(this,l),this._senders.push(s)),s};const a=e.RTCPeerConnection.prototype.removeTrack;e.RTCPeerConnection.prototype.removeTrack=function(l){a.apply(this,arguments);const o=this._senders.indexOf(l);o!==-1&&this._senders.splice(o,1)}}const t=e.RTCPeerConnection.prototype.addStream;e.RTCPeerConnection.prototype.addStream=function(a){this._senders=this._senders||[],t.apply(this,[a]),a.getTracks().forEach(c=>{this._senders.push(r(this,c))})};const n=e.RTCPeerConnection.prototype.removeStream;e.RTCPeerConnection.prototype.removeStream=function(a){this._senders=this._senders||[],n.apply(this,[a]),a.getTracks().forEach(c=>{const l=this._senders.find(o=>o.track===c);l&&this._senders.splice(this._senders.indexOf(l),1)})}}else if(typeof e=="object"&&e.RTCPeerConnection&&"getSenders"in e.RTCPeerConnection.prototype&&"createDTMFSender"in e.RTCPeerConnection.prototype&&e.RTCRtpSender&&!("dtmf"in e.RTCRtpSender.prototype)){const r=e.RTCPeerConnection.prototype.getSenders;e.RTCPeerConnection.prototype.getSenders=function(){const n=r.apply(this,[]);return n.forEach(i=>i._pc=this),n},Object.defineProperty(e.RTCRtpSender.prototype,"dtmf",{get(){return this._dtmf===void 0&&(this.track.kind==="audio"?this._dtmf=this._pc.createDTMFSender(this.track):this._dtmf=null),this._dtmf}})}}function bi(e){if(!e.RTCPeerConnection)return;const r=e.RTCPeerConnection.prototype.getStats;e.RTCPeerConnection.prototype.getStats=function(){const[n,i,a]=arguments;if(arguments.length>0&&typeof n=="function")return r.apply(this,arguments);if(r.length===0&&(arguments.length===0||typeof n!="function"))return r.apply(this,[]);const c=function(o){const s={};return o.result().forEach(f=>{const d={id:f.id,timestamp:f.timestamp,type:{localcandidate:"local-candidate",remotecandidate:"remote-candidate"}[f.type]||f.type};f.names().forEach(p=>{d[p]=f.stat(p)}),s[d.id]=d}),s},l=function(o){return new Map(Object.keys(o).map(s=>[s,o[s]]))};if(arguments.length>=2){const o=function(s){i(l(c(s)))};return r.apply(this,[o,n])}return new Promise((o,s)=>{r.apply(this,[function(u){o(l(c(u)))},s])}).then(i,a)}}function _i(e){if(!(typeof e=="object"&&e.RTCPeerConnection&&e.RTCRtpSender&&e.RTCRtpReceiver))return;if(!("getStats"in e.RTCRtpSender.prototype)){const t=e.RTCPeerConnection.prototype.getSenders;t&&(e.RTCPeerConnection.prototype.getSenders=function(){const a=t.apply(this,[]);return a.forEach(c=>c._pc=this),a});const n=e.RTCPeerConnection.prototype.addTrack;n&&(e.RTCPeerConnection.prototype.addTrack=function(){const a=n.apply(this,arguments);return a._pc=this,a}),e.RTCRtpSender.prototype.getStats=function(){const a=this;return this._pc.getStats().then(c=>gn(c,a.track,!0))}}if(!("getStats"in e.RTCRtpReceiver.prototype)){const t=e.RTCPeerConnection.prototype.getReceivers;t&&(e.RTCPeerConnection.prototype.getReceivers=function(){const i=t.apply(this,[]);return i.forEach(a=>a._pc=this),i}),et(e,"track",n=>(n.receiver._pc=n.srcElement,n)),e.RTCRtpReceiver.prototype.getStats=function(){const i=this;return this._pc.getStats().then(a=>gn(a,i.track,!1))}}if(!("getStats"in e.RTCRtpSender.prototype&&"getStats"in e.RTCRtpReceiver.prototype))return;const r=e.RTCPeerConnection.prototype.getStats;e.RTCPeerConnection.prototype.getStats=function(){if(arguments.length>0&&arguments[0]instanceof e.MediaStreamTrack){const n=arguments[0];let i,a,c;return this.getSenders().forEach(l=>{l.track===n&&(i?c=!0:i=l)}),this.getReceivers().forEach(l=>(l.track===n&&(a?c=!0:a=l),l.track===n)),c||i&&a?Promise.reject(new DOMException("There are more than one sender or receiver for the track.","InvalidAccessError")):i?i.getStats():a?a.getStats():Promise.reject(new DOMException("There is no sender or receiver for the track.","InvalidAccessError"))}return r.apply(this,arguments)}}function Si(e){e.RTCPeerConnection.prototype.getLocalStreams=function(){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},Object.keys(this._shimmedLocalStreams).map(c=>this._shimmedLocalStreams[c][0])};const r=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addTrack=function(c,l){if(!l)return r.apply(this,arguments);this._shimmedLocalStreams=this._shimmedLocalStreams||{};const o=r.apply(this,arguments);return this._shimmedLocalStreams[l.id]?this._shimmedLocalStreams[l.id].indexOf(o)===-1&&this._shimmedLocalStreams[l.id].push(o):this._shimmedLocalStreams[l.id]=[l,o],o};const t=e.RTCPeerConnection.prototype.addStream;e.RTCPeerConnection.prototype.addStream=function(c){this._shimmedLocalStreams=this._shimmedLocalStreams||{},c.getTracks().forEach(s=>{if(this.getSenders().find(f=>f.track===s))throw new DOMException("Track already exists.","InvalidAccessError")});const l=this.getSenders();t.apply(this,arguments);const o=this.getSenders().filter(s=>l.indexOf(s)===-1);this._shimmedLocalStreams[c.id]=[c].concat(o)};const n=e.RTCPeerConnection.prototype.removeStream;e.RTCPeerConnection.prototype.removeStream=function(c){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},delete this._shimmedLocalStreams[c.id],n.apply(this,arguments)};const i=e.RTCPeerConnection.prototype.removeTrack;e.RTCPeerConnection.prototype.removeTrack=function(c){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},c&&Object.keys(this._shimmedLocalStreams).forEach(l=>{const o=this._shimmedLocalStreams[l].indexOf(c);o!==-1&&this._shimmedLocalStreams[l].splice(o,1),this._shimmedLocalStreams[l].length===1&&delete this._shimmedLocalStreams[l]}),i.apply(this,arguments)}}function Ci(e,r){if(!e.RTCPeerConnection)return;if(e.RTCPeerConnection.prototype.addTrack&&r.version>=65)return Si(e);const t=e.RTCPeerConnection.prototype.getLocalStreams;e.RTCPeerConnection.prototype.getLocalStreams=function(){const u=t.apply(this);return this._reverseStreams=this._reverseStreams||{},u.map(f=>this._reverseStreams[f.id])};const n=e.RTCPeerConnection.prototype.addStream;e.RTCPeerConnection.prototype.addStream=function(u){if(this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},u.getTracks().forEach(f=>{if(this.getSenders().find(p=>p.track===f))throw new DOMException("Track already exists.","InvalidAccessError")}),!this._reverseStreams[u.id]){const f=new e.MediaStream(u.getTracks());this._streams[u.id]=f,this._reverseStreams[f.id]=u,u=f}n.apply(this,[u])};const i=e.RTCPeerConnection.prototype.removeStream;e.RTCPeerConnection.prototype.removeStream=function(u){this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},i.apply(this,[this._streams[u.id]||u]),delete this._reverseStreams[this._streams[u.id]?this._streams[u.id].id:u.id],delete this._streams[u.id]},e.RTCPeerConnection.prototype.addTrack=function(u,f){if(this.signalingState==="closed")throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");const d=[].slice.call(arguments,1);if(d.length!==1||!d[0].getTracks().find(v=>v===u))throw new DOMException("The adapter.js addTrack polyfill only supports a single  stream which is associated with the specified track.","NotSupportedError");if(this.getSenders().find(v=>v.track===u))throw new DOMException("Track already exists.","InvalidAccessError");this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{};const h=this._streams[f.id];if(h)h.addTrack(u),Promise.resolve().then(()=>{this.dispatchEvent(new Event("negotiationneeded"))});else{const v=new e.MediaStream([u]);this._streams[f.id]=v,this._reverseStreams[v.id]=f,this.addStream(v)}return this.getSenders().find(v=>v.track===u)};function a(s,u){let f=u.sdp;return Object.keys(s._reverseStreams||[]).forEach(d=>{const p=s._reverseStreams[d],h=s._streams[p.id];f=f.replace(new RegExp(h.id,"g"),p.id)}),new RTCSessionDescription({type:u.type,sdp:f})}function c(s,u){let f=u.sdp;return Object.keys(s._reverseStreams||[]).forEach(d=>{const p=s._reverseStreams[d],h=s._streams[p.id];f=f.replace(new RegExp(p.id,"g"),h.id)}),new RTCSessionDescription({type:u.type,sdp:f})}["createOffer","createAnswer"].forEach(function(s){const u=e.RTCPeerConnection.prototype[s],f={[s](){const d=arguments;return arguments.length&&typeof arguments[0]=="function"?u.apply(this,[h=>{const v=a(this,h);d[0].apply(null,[v])},h=>{d[1]&&d[1].apply(null,h)},arguments[2]]):u.apply(this,arguments).then(h=>a(this,h))}};e.RTCPeerConnection.prototype[s]=f[s]});const l=e.RTCPeerConnection.prototype.setLocalDescription;e.RTCPeerConnection.prototype.setLocalDescription=function(){return!arguments.length||!arguments[0].type?l.apply(this,arguments):(arguments[0]=c(this,arguments[0]),l.apply(this,arguments))};const o=Object.getOwnPropertyDescriptor(e.RTCPeerConnection.prototype,"localDescription");Object.defineProperty(e.RTCPeerConnection.prototype,"localDescription",{get(){const s=o.get.apply(this);return s.type===""?s:a(this,s)}}),e.RTCPeerConnection.prototype.removeTrack=function(u){if(this.signalingState==="closed")throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");if(!u._pc)throw new DOMException("Argument 1 of RTCPeerConnection.removeTrack does not implement interface RTCRtpSender.","TypeError");if(!(u._pc===this))throw new DOMException("Sender was not created by this connection.","InvalidAccessError");this._streams=this._streams||{};let d;Object.keys(this._streams).forEach(p=>{this._streams[p].getTracks().find(v=>u.track===v)&&(d=this._streams[p])}),d&&(d.getTracks().length===1?this.removeStream(this._reverseStreams[d.id]):d.removeTrack(u.track),this.dispatchEvent(new Event("negotiationneeded")))}}function xr(e,r){!e.RTCPeerConnection&&e.webkitRTCPeerConnection&&(e.RTCPeerConnection=e.webkitRTCPeerConnection),!!e.RTCPeerConnection&&r.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(t){const n=e.RTCPeerConnection.prototype[t],i={[t](){return arguments[0]=new(t==="addIceCandidate"?e.RTCIceCandidate:e.RTCSessionDescription)(arguments[0]),n.apply(this,arguments)}};e.RTCPeerConnection.prototype[t]=i[t]})}function Ti(e,r){et(e,"negotiationneeded",t=>{const n=t.target;if(!((r.version<72||n.getConfiguration&&n.getConfiguration().sdpSemantics==="plan-b")&&n.signalingState!=="stable"))return t})}var bn=Object.freeze(Object.defineProperty({__proto__:null,shimMediaStream:mi,shimOnTrack:gi,shimGetSendersWithDtmf:yi,shimGetStats:bi,shimSenderReceiverGetStats:_i,shimAddTrackRemoveTrackWithNative:Si,shimAddTrackRemoveTrack:Ci,shimPeerConnection:xr,fixNegotiationNeeded:Ti,shimGetUserMedia:vi,shimGetDisplayMedia:mo},Symbol.toStringTag,{value:"Module"}));function go(e,r){let t=!1;return e=JSON.parse(JSON.stringify(e)),e.filter(n=>{if(n&&(n.urls||n.url)){let i=n.urls||n.url;n.url&&!n.urls&&nr("RTCIceServer.url","RTCIceServer.urls");const a=typeof i=="string";return a&&(i=[i]),i=i.filter(c=>{if(c.indexOf("stun:")===0)return!1;const l=c.startsWith("turn")&&!c.startsWith("turn:[")&&c.includes("transport=udp");return l&&!t?(t=!0,!0):l&&!t}),delete n.url,n.urls=a?i[0]:i,!!i.length}})}var Kr={exports:{}};(function(e){var r={};r.generateIdentifier=function(){return Math.random().toString(36).substr(2,10)},r.localCName=r.generateIdentifier(),r.splitLines=function(t){return t.trim().split(`
`).map(function(n){return n.trim()})},r.splitSections=function(t){var n=t.split(`
m=`);return n.map(function(i,a){return(a>0?"m="+i:i).trim()+`\r
`})},r.getDescription=function(t){var n=r.splitSections(t);return n&&n[0]},r.getMediaSections=function(t){var n=r.splitSections(t);return n.shift(),n},r.matchPrefix=function(t,n){return r.splitLines(t).filter(function(i){return i.indexOf(n)===0})},r.parseCandidate=function(t){var n;t.indexOf("a=candidate:")===0?n=t.substring(12).split(" "):n=t.substring(10).split(" ");for(var i={foundation:n[0],component:parseInt(n[1],10),protocol:n[2].toLowerCase(),priority:parseInt(n[3],10),ip:n[4],address:n[4],port:parseInt(n[5],10),type:n[7]},a=8;a<n.length;a+=2)switch(n[a]){case"raddr":i.relatedAddress=n[a+1];break;case"rport":i.relatedPort=parseInt(n[a+1],10);break;case"tcptype":i.tcpType=n[a+1];break;case"ufrag":i.ufrag=n[a+1],i.usernameFragment=n[a+1];break;default:i[n[a]]=n[a+1];break}return i},r.writeCandidate=function(t){var n=[];n.push(t.foundation),n.push(t.component),n.push(t.protocol.toUpperCase()),n.push(t.priority),n.push(t.address||t.ip),n.push(t.port);var i=t.type;return n.push("typ"),n.push(i),i!=="host"&&t.relatedAddress&&t.relatedPort&&(n.push("raddr"),n.push(t.relatedAddress),n.push("rport"),n.push(t.relatedPort)),t.tcpType&&t.protocol.toLowerCase()==="tcp"&&(n.push("tcptype"),n.push(t.tcpType)),(t.usernameFragment||t.ufrag)&&(n.push("ufrag"),n.push(t.usernameFragment||t.ufrag)),"candidate:"+n.join(" ")},r.parseIceOptions=function(t){return t.substr(14).split(" ")},r.parseRtpMap=function(t){var n=t.substr(9).split(" "),i={payloadType:parseInt(n.shift(),10)};return n=n[0].split("/"),i.name=n[0],i.clockRate=parseInt(n[1],10),i.channels=n.length===3?parseInt(n[2],10):1,i.numChannels=i.channels,i},r.writeRtpMap=function(t){var n=t.payloadType;t.preferredPayloadType!==void 0&&(n=t.preferredPayloadType);var i=t.channels||t.numChannels||1;return"a=rtpmap:"+n+" "+t.name+"/"+t.clockRate+(i!==1?"/"+i:"")+`\r
`},r.parseExtmap=function(t){var n=t.substr(9).split(" ");return{id:parseInt(n[0],10),direction:n[0].indexOf("/")>0?n[0].split("/")[1]:"sendrecv",uri:n[1]}},r.writeExtmap=function(t){return"a=extmap:"+(t.id||t.preferredId)+(t.direction&&t.direction!=="sendrecv"?"/"+t.direction:"")+" "+t.uri+`\r
`},r.parseFmtp=function(t){for(var n={},i,a=t.substr(t.indexOf(" ")+1).split(";"),c=0;c<a.length;c++)i=a[c].trim().split("="),n[i[0].trim()]=i[1];return n},r.writeFmtp=function(t){var n="",i=t.payloadType;if(t.preferredPayloadType!==void 0&&(i=t.preferredPayloadType),t.parameters&&Object.keys(t.parameters).length){var a=[];Object.keys(t.parameters).forEach(function(c){t.parameters[c]?a.push(c+"="+t.parameters[c]):a.push(c)}),n+="a=fmtp:"+i+" "+a.join(";")+`\r
`}return n},r.parseRtcpFb=function(t){var n=t.substr(t.indexOf(" ")+1).split(" ");return{type:n.shift(),parameter:n.join(" ")}},r.writeRtcpFb=function(t){var n="",i=t.payloadType;return t.preferredPayloadType!==void 0&&(i=t.preferredPayloadType),t.rtcpFeedback&&t.rtcpFeedback.length&&t.rtcpFeedback.forEach(function(a){n+="a=rtcp-fb:"+i+" "+a.type+(a.parameter&&a.parameter.length?" "+a.parameter:"")+`\r
`}),n},r.parseSsrcMedia=function(t){var n=t.indexOf(" "),i={ssrc:parseInt(t.substr(7,n-7),10)},a=t.indexOf(":",n);return a>-1?(i.attribute=t.substr(n+1,a-n-1),i.value=t.substr(a+1)):i.attribute=t.substr(n+1),i},r.parseSsrcGroup=function(t){var n=t.substr(13).split(" ");return{semantics:n.shift(),ssrcs:n.map(function(i){return parseInt(i,10)})}},r.getMid=function(t){var n=r.matchPrefix(t,"a=mid:")[0];if(n)return n.substr(6)},r.parseFingerprint=function(t){var n=t.substr(14).split(" ");return{algorithm:n[0].toLowerCase(),value:n[1]}},r.getDtlsParameters=function(t,n){var i=r.matchPrefix(t+n,"a=fingerprint:");return{role:"auto",fingerprints:i.map(r.parseFingerprint)}},r.writeDtlsParameters=function(t,n){var i="a=setup:"+n+`\r
`;return t.fingerprints.forEach(function(a){i+="a=fingerprint:"+a.algorithm+" "+a.value+`\r
`}),i},r.parseCryptoLine=function(t){var n=t.substr(9).split(" ");return{tag:parseInt(n[0],10),cryptoSuite:n[1],keyParams:n[2],sessionParams:n.slice(3)}},r.writeCryptoLine=function(t){return"a=crypto:"+t.tag+" "+t.cryptoSuite+" "+(typeof t.keyParams=="object"?r.writeCryptoKeyParams(t.keyParams):t.keyParams)+(t.sessionParams?" "+t.sessionParams.join(" "):"")+`\r
`},r.parseCryptoKeyParams=function(t){if(t.indexOf("inline:")!==0)return null;var n=t.substr(7).split("|");return{keyMethod:"inline",keySalt:n[0],lifeTime:n[1],mkiValue:n[2]?n[2].split(":")[0]:void 0,mkiLength:n[2]?n[2].split(":")[1]:void 0}},r.writeCryptoKeyParams=function(t){return t.keyMethod+":"+t.keySalt+(t.lifeTime?"|"+t.lifeTime:"")+(t.mkiValue&&t.mkiLength?"|"+t.mkiValue+":"+t.mkiLength:"")},r.getCryptoParameters=function(t,n){var i=r.matchPrefix(t+n,"a=crypto:");return i.map(r.parseCryptoLine)},r.getIceParameters=function(t,n){var i=r.matchPrefix(t+n,"a=ice-ufrag:")[0],a=r.matchPrefix(t+n,"a=ice-pwd:")[0];return i&&a?{usernameFragment:i.substr(12),password:a.substr(10)}:null},r.writeIceParameters=function(t){return"a=ice-ufrag:"+t.usernameFragment+`\r
a=ice-pwd:`+t.password+`\r
`},r.parseRtpParameters=function(t){for(var n={codecs:[],headerExtensions:[],fecMechanisms:[],rtcp:[]},i=r.splitLines(t),a=i[0].split(" "),c=3;c<a.length;c++){var l=a[c],o=r.matchPrefix(t,"a=rtpmap:"+l+" ")[0];if(o){var s=r.parseRtpMap(o),u=r.matchPrefix(t,"a=fmtp:"+l+" ");switch(s.parameters=u.length?r.parseFmtp(u[0]):{},s.rtcpFeedback=r.matchPrefix(t,"a=rtcp-fb:"+l+" ").map(r.parseRtcpFb),n.codecs.push(s),s.name.toUpperCase()){case"RED":case"ULPFEC":n.fecMechanisms.push(s.name.toUpperCase());break}}}return r.matchPrefix(t,"a=extmap:").forEach(function(f){n.headerExtensions.push(r.parseExtmap(f))}),n},r.writeRtpDescription=function(t,n){var i="";i+="m="+t+" ",i+=n.codecs.length>0?"9":"0",i+=" UDP/TLS/RTP/SAVPF ",i+=n.codecs.map(function(c){return c.preferredPayloadType!==void 0?c.preferredPayloadType:c.payloadType}).join(" ")+`\r
`,i+=`c=IN IP4 0.0.0.0\r
`,i+=`a=rtcp:9 IN IP4 0.0.0.0\r
`,n.codecs.forEach(function(c){i+=r.writeRtpMap(c),i+=r.writeFmtp(c),i+=r.writeRtcpFb(c)});var a=0;return n.codecs.forEach(function(c){c.maxptime>a&&(a=c.maxptime)}),a>0&&(i+="a=maxptime:"+a+`\r
`),i+=`a=rtcp-mux\r
`,n.headerExtensions&&n.headerExtensions.forEach(function(c){i+=r.writeExtmap(c)}),i},r.parseRtpEncodingParameters=function(t){var n=[],i=r.parseRtpParameters(t),a=i.fecMechanisms.indexOf("RED")!==-1,c=i.fecMechanisms.indexOf("ULPFEC")!==-1,l=r.matchPrefix(t,"a=ssrc:").map(function(d){return r.parseSsrcMedia(d)}).filter(function(d){return d.attribute==="cname"}),o=l.length>0&&l[0].ssrc,s,u=r.matchPrefix(t,"a=ssrc-group:FID").map(function(d){var p=d.substr(17).split(" ");return p.map(function(h){return parseInt(h,10)})});u.length>0&&u[0].length>1&&u[0][0]===o&&(s=u[0][1]),i.codecs.forEach(function(d){if(d.name.toUpperCase()==="RTX"&&d.parameters.apt){var p={ssrc:o,codecPayloadType:parseInt(d.parameters.apt,10)};o&&s&&(p.rtx={ssrc:s}),n.push(p),a&&(p=JSON.parse(JSON.stringify(p)),p.fec={ssrc:o,mechanism:c?"red+ulpfec":"red"},n.push(p))}}),n.length===0&&o&&n.push({ssrc:o});var f=r.matchPrefix(t,"b=");return f.length&&(f[0].indexOf("b=TIAS:")===0?f=parseInt(f[0].substr(7),10):f[0].indexOf("b=AS:")===0?f=parseInt(f[0].substr(5),10)*1e3*.95-50*40*8:f=void 0,n.forEach(function(d){d.maxBitrate=f})),n},r.parseRtcpParameters=function(t){var n={},i=r.matchPrefix(t,"a=ssrc:").map(function(l){return r.parseSsrcMedia(l)}).filter(function(l){return l.attribute==="cname"})[0];i&&(n.cname=i.value,n.ssrc=i.ssrc);var a=r.matchPrefix(t,"a=rtcp-rsize");n.reducedSize=a.length>0,n.compound=a.length===0;var c=r.matchPrefix(t,"a=rtcp-mux");return n.mux=c.length>0,n},r.parseMsid=function(t){var n,i=r.matchPrefix(t,"a=msid:");if(i.length===1)return n=i[0].substr(7).split(" "),{stream:n[0],track:n[1]};var a=r.matchPrefix(t,"a=ssrc:").map(function(c){return r.parseSsrcMedia(c)}).filter(function(c){return c.attribute==="msid"});if(a.length>0)return n=a[0].value.split(" "),{stream:n[0],track:n[1]}},r.parseSctpDescription=function(t){var n=r.parseMLine(t),i=r.matchPrefix(t,"a=max-message-size:"),a;i.length>0&&(a=parseInt(i[0].substr(19),10)),isNaN(a)&&(a=65536);var c=r.matchPrefix(t,"a=sctp-port:");if(c.length>0)return{port:parseInt(c[0].substr(12),10),protocol:n.fmt,maxMessageSize:a};var l=r.matchPrefix(t,"a=sctpmap:");if(l.length>0){var o=r.matchPrefix(t,"a=sctpmap:")[0].substr(10).split(" ");return{port:parseInt(o[0],10),protocol:o[1],maxMessageSize:a}}},r.writeSctpDescription=function(t,n){var i=[];return t.protocol!=="DTLS/SCTP"?i=["m="+t.kind+" 9 "+t.protocol+" "+n.protocol+`\r
`,`c=IN IP4 0.0.0.0\r
`,"a=sctp-port:"+n.port+`\r
`]:i=["m="+t.kind+" 9 "+t.protocol+" "+n.port+`\r
`,`c=IN IP4 0.0.0.0\r
`,"a=sctpmap:"+n.port+" "+n.protocol+` 65535\r
`],n.maxMessageSize!==void 0&&i.push("a=max-message-size:"+n.maxMessageSize+`\r
`),i.join("")},r.generateSessionId=function(){return Math.random().toString().substr(2,21)},r.writeSessionBoilerplate=function(t,n,i){var a,c=n!==void 0?n:2;t?a=t:a=r.generateSessionId();var l=i||"thisisadapterortc";return`v=0\r
o=`+l+" "+a+" "+c+` IN IP4 127.0.0.1\r
s=-\r
t=0 0\r
`},r.writeMediaSection=function(t,n,i,a){var c=r.writeRtpDescription(t.kind,n);if(c+=r.writeIceParameters(t.iceGatherer.getLocalParameters()),c+=r.writeDtlsParameters(t.dtlsTransport.getLocalParameters(),i==="offer"?"actpass":"active"),c+="a=mid:"+t.mid+`\r
`,t.direction?c+="a="+t.direction+`\r
`:t.rtpSender&&t.rtpReceiver?c+=`a=sendrecv\r
`:t.rtpSender?c+=`a=sendonly\r
`:t.rtpReceiver?c+=`a=recvonly\r
`:c+=`a=inactive\r
`,t.rtpSender){var l="msid:"+a.id+" "+t.rtpSender.track.id+`\r
`;c+="a="+l,c+="a=ssrc:"+t.sendEncodingParameters[0].ssrc+" "+l,t.sendEncodingParameters[0].rtx&&(c+="a=ssrc:"+t.sendEncodingParameters[0].rtx.ssrc+" "+l,c+="a=ssrc-group:FID "+t.sendEncodingParameters[0].ssrc+" "+t.sendEncodingParameters[0].rtx.ssrc+`\r
`)}return c+="a=ssrc:"+t.sendEncodingParameters[0].ssrc+" cname:"+r.localCName+`\r
`,t.rtpSender&&t.sendEncodingParameters[0].rtx&&(c+="a=ssrc:"+t.sendEncodingParameters[0].rtx.ssrc+" cname:"+r.localCName+`\r
`),c},r.getDirection=function(t,n){for(var i=r.splitLines(t),a=0;a<i.length;a++)switch(i[a]){case"a=sendrecv":case"a=sendonly":case"a=recvonly":case"a=inactive":return i[a].substr(2)}return n?r.getDirection(n):"sendrecv"},r.getKind=function(t){var n=r.splitLines(t),i=n[0].split(" ");return i[0].substr(2)},r.isRejected=function(t){return t.split(" ",2)[1]==="0"},r.parseMLine=function(t){var n=r.splitLines(t),i=n[0].substr(2).split(" ");return{kind:i[0],port:parseInt(i[1],10),protocol:i[2],fmt:i.slice(3).join(" ")}},r.parseOLine=function(t){var n=r.matchPrefix(t,"o=")[0],i=n.substr(2).split(" ");return{username:i[0],sessionId:i[1],sessionVersion:parseInt(i[2],10),netType:i[3],addressType:i[4],address:i[5]}},r.isValidSDP=function(t){if(typeof t!="string"||t.length===0)return!1;for(var n=r.splitLines(t),i=0;i<n.length;i++)if(n[i].length<2||n[i].charAt(1)!=="=")return!1;return!0},e.exports=r})(Kr);var Dt=Kr.exports,L=Kr.exports;function yo(e){return{inboundrtp:"inbound-rtp",outboundrtp:"outbound-rtp",candidatepair:"candidate-pair",localcandidate:"local-candidate",remotecandidate:"remote-candidate"}[e.type]||e.type}function _n(e,r,t,n,i){var a=L.writeRtpDescription(e.kind,r);if(a+=L.writeIceParameters(e.iceGatherer.getLocalParameters()),a+=L.writeDtlsParameters(e.dtlsTransport.getLocalParameters(),t==="offer"?"actpass":i||"active"),a+="a=mid:"+e.mid+`\r
`,e.rtpSender&&e.rtpReceiver?a+=`a=sendrecv\r
`:e.rtpSender?a+=`a=sendonly\r
`:e.rtpReceiver?a+=`a=recvonly\r
`:a+=`a=inactive\r
`,e.rtpSender){var c=e.rtpSender._initialTrackId||e.rtpSender.track.id;e.rtpSender._initialTrackId=c;var l="msid:"+(n?n.id:"-")+" "+c+`\r
`;a+="a="+l,a+="a=ssrc:"+e.sendEncodingParameters[0].ssrc+" "+l,e.sendEncodingParameters[0].rtx&&(a+="a=ssrc:"+e.sendEncodingParameters[0].rtx.ssrc+" "+l,a+="a=ssrc-group:FID "+e.sendEncodingParameters[0].ssrc+" "+e.sendEncodingParameters[0].rtx.ssrc+`\r
`)}return a+="a=ssrc:"+e.sendEncodingParameters[0].ssrc+" cname:"+L.localCName+`\r
`,e.rtpSender&&e.sendEncodingParameters[0].rtx&&(a+="a=ssrc:"+e.sendEncodingParameters[0].rtx.ssrc+" cname:"+L.localCName+`\r
`),a}function bo(e,r){var t=!1;return e=JSON.parse(JSON.stringify(e)),e.filter(function(n){if(n&&(n.urls||n.url)){var i=n.urls||n.url;n.url&&!n.urls&&console.warn("RTCIceServer.url is deprecated! Use urls instead.");var a=typeof i=="string";return a&&(i=[i]),i=i.filter(function(c){var l=c.indexOf("turn:")===0&&c.indexOf("transport=udp")!==-1&&c.indexOf("turn:[")===-1&&!t;return l?(t=!0,!0):c.indexOf("stun:")===0&&r>=14393&&c.indexOf("?transport=udp")===-1}),delete n.url,n.urls=a?i[0]:i,!!i.length}})}function kt(e,r){var t={codecs:[],headerExtensions:[],fecMechanisms:[]},n=function(a,c){a=parseInt(a,10);for(var l=0;l<c.length;l++)if(c[l].payloadType===a||c[l].preferredPayloadType===a)return c[l]},i=function(a,c,l,o){var s=n(a.parameters.apt,l),u=n(c.parameters.apt,o);return s&&u&&s.name.toLowerCase()===u.name.toLowerCase()};return e.codecs.forEach(function(a){for(var c=0;c<r.codecs.length;c++){var l=r.codecs[c];if(a.name.toLowerCase()===l.name.toLowerCase()&&a.clockRate===l.clockRate){if(a.name.toLowerCase()==="rtx"&&a.parameters&&l.parameters.apt&&!i(a,l,e.codecs,r.codecs))continue;l=JSON.parse(JSON.stringify(l)),l.numChannels=Math.min(a.numChannels,l.numChannels),t.codecs.push(l),l.rtcpFeedback=l.rtcpFeedback.filter(function(o){for(var s=0;s<a.rtcpFeedback.length;s++)if(a.rtcpFeedback[s].type===o.type&&a.rtcpFeedback[s].parameter===o.parameter)return!0;return!1});break}}}),e.headerExtensions.forEach(function(a){for(var c=0;c<r.headerExtensions.length;c++){var l=r.headerExtensions[c];if(a.uri===l.uri){t.headerExtensions.push(l);break}}}),t}function Sn(e,r,t){return{offer:{setLocalDescription:["stable","have-local-offer"],setRemoteDescription:["stable","have-remote-offer"]},answer:{setLocalDescription:["have-remote-offer","have-local-pranswer"],setRemoteDescription:["have-local-offer","have-remote-pranswer"]}}[r][e].indexOf(t)!==-1}function vr(e,r){var t=e.getRemoteCandidates().find(function(n){return r.foundation===n.foundation&&r.ip===n.ip&&r.port===n.port&&r.priority===n.priority&&r.protocol===n.protocol&&r.type===n.type});return t||e.addRemoteCandidate(r),!t}function ae(e,r){var t=new Error(r);return t.name=e,t.code={NotSupportedError:9,InvalidStateError:11,InvalidAccessError:15,TypeError:void 0,OperationError:void 0}[e],t}var _o=function(e,r){function t(o,s){s.addTrack(o),s.dispatchEvent(new e.MediaStreamTrackEvent("addtrack",{track:o}))}function n(o,s){s.removeTrack(o),s.dispatchEvent(new e.MediaStreamTrackEvent("removetrack",{track:o}))}function i(o,s,u,f){var d=new Event("track");d.track=s,d.receiver=u,d.transceiver={receiver:u},d.streams=f,e.setTimeout(function(){o._dispatchEvent("track",d)})}var a=function(o){var s=this,u=document.createDocumentFragment();if(["addEventListener","removeEventListener","dispatchEvent"].forEach(function(d){s[d]=u[d].bind(u)}),this.canTrickleIceCandidates=null,this.needNegotiation=!1,this.localStreams=[],this.remoteStreams=[],this._localDescription=null,this._remoteDescription=null,this.signalingState="stable",this.iceConnectionState="new",this.connectionState="new",this.iceGatheringState="new",o=JSON.parse(JSON.stringify(o||{})),this.usingBundle=o.bundlePolicy==="max-bundle",o.rtcpMuxPolicy==="negotiate")throw ae("NotSupportedError","rtcpMuxPolicy 'negotiate' is not supported");switch(o.rtcpMuxPolicy||(o.rtcpMuxPolicy="require"),o.iceTransportPolicy){case"all":case"relay":break;default:o.iceTransportPolicy="all";break}switch(o.bundlePolicy){case"balanced":case"max-compat":case"max-bundle":break;default:o.bundlePolicy="balanced";break}if(o.iceServers=bo(o.iceServers||[],r),this._iceGatherers=[],o.iceCandidatePoolSize)for(var f=o.iceCandidatePoolSize;f>0;f--)this._iceGatherers.push(new e.RTCIceGatherer({iceServers:o.iceServers,gatherPolicy:o.iceTransportPolicy}));else o.iceCandidatePoolSize=0;this._config=o,this.transceivers=[],this._sdpSessionId=L.generateSessionId(),this._sdpSessionVersion=0,this._dtlsRole=void 0,this._isClosed=!1};Object.defineProperty(a.prototype,"localDescription",{configurable:!0,get:function(){return this._localDescription}}),Object.defineProperty(a.prototype,"remoteDescription",{configurable:!0,get:function(){return this._remoteDescription}}),a.prototype.onicecandidate=null,a.prototype.onaddstream=null,a.prototype.ontrack=null,a.prototype.onremovestream=null,a.prototype.onsignalingstatechange=null,a.prototype.oniceconnectionstatechange=null,a.prototype.onconnectionstatechange=null,a.prototype.onicegatheringstatechange=null,a.prototype.onnegotiationneeded=null,a.prototype.ondatachannel=null,a.prototype._dispatchEvent=function(o,s){this._isClosed||(this.dispatchEvent(s),typeof this["on"+o]=="function"&&this["on"+o](s))},a.prototype._emitGatheringStateChange=function(){var o=new Event("icegatheringstatechange");this._dispatchEvent("icegatheringstatechange",o)},a.prototype.getConfiguration=function(){return this._config},a.prototype.getLocalStreams=function(){return this.localStreams},a.prototype.getRemoteStreams=function(){return this.remoteStreams},a.prototype._createTransceiver=function(o,s){var u=this.transceivers.length>0,f={track:null,iceGatherer:null,iceTransport:null,dtlsTransport:null,localCapabilities:null,remoteCapabilities:null,rtpSender:null,rtpReceiver:null,kind:o,mid:null,sendEncodingParameters:null,recvEncodingParameters:null,stream:null,associatedRemoteMediaStreams:[],wantReceive:!0};if(this.usingBundle&&u)f.iceTransport=this.transceivers[0].iceTransport,f.dtlsTransport=this.transceivers[0].dtlsTransport;else{var d=this._createIceAndDtlsTransports();f.iceTransport=d.iceTransport,f.dtlsTransport=d.dtlsTransport}return s||this.transceivers.push(f),f},a.prototype.addTrack=function(o,s){if(this._isClosed)throw ae("InvalidStateError","Attempted to call addTrack on a closed peerconnection.");var u=this.transceivers.find(function(p){return p.track===o});if(u)throw ae("InvalidAccessError","Track already exists.");for(var f,d=0;d<this.transceivers.length;d++)!this.transceivers[d].track&&this.transceivers[d].kind===o.kind&&(f=this.transceivers[d]);return f||(f=this._createTransceiver(o.kind)),this._maybeFireNegotiationNeeded(),this.localStreams.indexOf(s)===-1&&this.localStreams.push(s),f.track=o,f.stream=s,f.rtpSender=new e.RTCRtpSender(o,f.dtlsTransport),f.rtpSender},a.prototype.addStream=function(o){var s=this;if(r>=15025)o.getTracks().forEach(function(f){s.addTrack(f,o)});else{var u=o.clone();o.getTracks().forEach(function(f,d){var p=u.getTracks()[d];f.addEventListener("enabled",function(h){p.enabled=h.enabled})}),u.getTracks().forEach(function(f){s.addTrack(f,u)})}},a.prototype.removeTrack=function(o){if(this._isClosed)throw ae("InvalidStateError","Attempted to call removeTrack on a closed peerconnection.");if(!(o instanceof e.RTCRtpSender))throw new TypeError("Argument 1 of RTCPeerConnection.removeTrack does not implement interface RTCRtpSender.");var s=this.transceivers.find(function(d){return d.rtpSender===o});if(!s)throw ae("InvalidAccessError","Sender was not created by this connection.");var u=s.stream;s.rtpSender.stop(),s.rtpSender=null,s.track=null,s.stream=null;var f=this.transceivers.map(function(d){return d.stream});f.indexOf(u)===-1&&this.localStreams.indexOf(u)>-1&&this.localStreams.splice(this.localStreams.indexOf(u),1),this._maybeFireNegotiationNeeded()},a.prototype.removeStream=function(o){var s=this;o.getTracks().forEach(function(u){var f=s.getSenders().find(function(d){return d.track===u});f&&s.removeTrack(f)})},a.prototype.getSenders=function(){return this.transceivers.filter(function(o){return!!o.rtpSender}).map(function(o){return o.rtpSender})},a.prototype.getReceivers=function(){return this.transceivers.filter(function(o){return!!o.rtpReceiver}).map(function(o){return o.rtpReceiver})},a.prototype._createIceGatherer=function(o,s){var u=this;if(s&&o>0)return this.transceivers[0].iceGatherer;if(this._iceGatherers.length)return this._iceGatherers.shift();var f=new e.RTCIceGatherer({iceServers:this._config.iceServers,gatherPolicy:this._config.iceTransportPolicy});return Object.defineProperty(f,"state",{value:"new",writable:!0}),this.transceivers[o].bufferedCandidateEvents=[],this.transceivers[o].bufferCandidates=function(d){var p=!d.candidate||Object.keys(d.candidate).length===0;f.state=p?"completed":"gathering",u.transceivers[o].bufferedCandidateEvents!==null&&u.transceivers[o].bufferedCandidateEvents.push(d)},f.addEventListener("localcandidate",this.transceivers[o].bufferCandidates),f},a.prototype._gather=function(o,s){var u=this,f=this.transceivers[s].iceGatherer;if(!f.onlocalcandidate){var d=this.transceivers[s].bufferedCandidateEvents;this.transceivers[s].bufferedCandidateEvents=null,f.removeEventListener("localcandidate",this.transceivers[s].bufferCandidates),f.onlocalcandidate=function(p){if(!(u.usingBundle&&s>0)){var h=new Event("icecandidate");h.candidate={sdpMid:o,sdpMLineIndex:s};var v=p.candidate,C=!v||Object.keys(v).length===0;if(C)(f.state==="new"||f.state==="gathering")&&(f.state="completed");else{f.state==="new"&&(f.state="gathering"),v.component=1,v.ufrag=f.getLocalParameters().usernameFragment;var g=L.writeCandidate(v);h.candidate=Object.assign(h.candidate,L.parseCandidate(g)),h.candidate.candidate=g,h.candidate.toJSON=function(){return{candidate:h.candidate.candidate,sdpMid:h.candidate.sdpMid,sdpMLineIndex:h.candidate.sdpMLineIndex,usernameFragment:h.candidate.usernameFragment}}}var m=L.getMediaSections(u._localDescription.sdp);C?m[h.candidate.sdpMLineIndex]+=`a=end-of-candidates\r
`:m[h.candidate.sdpMLineIndex]+="a="+h.candidate.candidate+`\r
`,u._localDescription.sdp=L.getDescription(u._localDescription.sdp)+m.join("");var R=u.transceivers.every(function(P){return P.iceGatherer&&P.iceGatherer.state==="completed"});u.iceGatheringState!=="gathering"&&(u.iceGatheringState="gathering",u._emitGatheringStateChange()),C||u._dispatchEvent("icecandidate",h),R&&(u._dispatchEvent("icecandidate",new Event("icecandidate")),u.iceGatheringState="complete",u._emitGatheringStateChange())}},e.setTimeout(function(){d.forEach(function(p){f.onlocalcandidate(p)})},0)}},a.prototype._createIceAndDtlsTransports=function(){var o=this,s=new e.RTCIceTransport(null);s.onicestatechange=function(){o._updateIceConnectionState(),o._updateConnectionState()};var u=new e.RTCDtlsTransport(s);return u.ondtlsstatechange=function(){o._updateConnectionState()},u.onerror=function(){Object.defineProperty(u,"state",{value:"failed",writable:!0}),o._updateConnectionState()},{iceTransport:s,dtlsTransport:u}},a.prototype._disposeIceAndDtlsTransports=function(o){var s=this.transceivers[o].iceGatherer;s&&(delete s.onlocalcandidate,delete this.transceivers[o].iceGatherer);var u=this.transceivers[o].iceTransport;u&&(delete u.onicestatechange,delete this.transceivers[o].iceTransport);var f=this.transceivers[o].dtlsTransport;f&&(delete f.ondtlsstatechange,delete f.onerror,delete this.transceivers[o].dtlsTransport)},a.prototype._transceive=function(o,s,u){var f=kt(o.localCapabilities,o.remoteCapabilities);s&&o.rtpSender&&(f.encodings=o.sendEncodingParameters,f.rtcp={cname:L.localCName,compound:o.rtcpParameters.compound},o.recvEncodingParameters.length&&(f.rtcp.ssrc=o.recvEncodingParameters[0].ssrc),o.rtpSender.send(f)),u&&o.rtpReceiver&&f.codecs.length>0&&(o.kind==="video"&&o.recvEncodingParameters&&r<15019&&o.recvEncodingParameters.forEach(function(d){delete d.rtx}),o.recvEncodingParameters.length?f.encodings=o.recvEncodingParameters:f.encodings=[{}],f.rtcp={compound:o.rtcpParameters.compound},o.rtcpParameters.cname&&(f.rtcp.cname=o.rtcpParameters.cname),o.sendEncodingParameters.length&&(f.rtcp.ssrc=o.sendEncodingParameters[0].ssrc),o.rtpReceiver.receive(f))},a.prototype.setLocalDescription=function(o){var s=this;if(["offer","answer"].indexOf(o.type)===-1)return Promise.reject(ae("TypeError",'Unsupported type "'+o.type+'"'));if(!Sn("setLocalDescription",o.type,s.signalingState)||s._isClosed)return Promise.reject(ae("InvalidStateError","Can not set local "+o.type+" in state "+s.signalingState));var u,f;if(o.type==="offer")u=L.splitSections(o.sdp),f=u.shift(),u.forEach(function(p,h){var v=L.parseRtpParameters(p);s.transceivers[h].localCapabilities=v}),s.transceivers.forEach(function(p,h){s._gather(p.mid,h)});else if(o.type==="answer"){u=L.splitSections(s._remoteDescription.sdp),f=u.shift();var d=L.matchPrefix(f,"a=ice-lite").length>0;u.forEach(function(p,h){var v=s.transceivers[h],C=v.iceGatherer,g=v.iceTransport,m=v.dtlsTransport,R=v.localCapabilities,P=v.remoteCapabilities,y=L.isRejected(p)&&L.matchPrefix(p,"a=bundle-only").length===0;if(!y&&!v.rejected){var B=L.getIceParameters(p,f),E=L.getDtlsParameters(p,f);d&&(E.role="server"),(!s.usingBundle||h===0)&&(s._gather(v.mid,h),g.state==="new"&&g.start(C,B,d?"controlling":"controlled"),m.state==="new"&&m.start(E));var z=kt(R,P);s._transceive(v,z.codecs.length>0,!1)}})}return s._localDescription={type:o.type,sdp:o.sdp},o.type==="offer"?s._updateSignalingState("have-local-offer"):s._updateSignalingState("stable"),Promise.resolve()},a.prototype.setRemoteDescription=function(o){var s=this;if(["offer","answer"].indexOf(o.type)===-1)return Promise.reject(ae("TypeError",'Unsupported type "'+o.type+'"'));if(!Sn("setRemoteDescription",o.type,s.signalingState)||s._isClosed)return Promise.reject(ae("InvalidStateError","Can not set remote "+o.type+" in state "+s.signalingState));var u={};s.remoteStreams.forEach(function(g){u[g.id]=g});var f=[],d=L.splitSections(o.sdp),p=d.shift(),h=L.matchPrefix(p,"a=ice-lite").length>0,v=L.matchPrefix(p,"a=group:BUNDLE ").length>0;s.usingBundle=v;var C=L.matchPrefix(p,"a=ice-options:")[0];return C?s.canTrickleIceCandidates=C.substr(14).split(" ").indexOf("trickle")>=0:s.canTrickleIceCandidates=!1,d.forEach(function(g,m){var R=L.splitLines(g),P=L.getKind(g),y=L.isRejected(g)&&L.matchPrefix(g,"a=bundle-only").length===0,B=R[0].substr(2).split(" ")[2],E=L.getDirection(g,p),z=L.parseMsid(g),N=L.getMid(g)||L.generateIdentifier();if(y||P==="application"&&(B==="DTLS/SCTP"||B==="UDP/DTLS/SCTP")){s.transceivers[m]={mid:N,kind:P,protocol:B,rejected:!0};return}!y&&s.transceivers[m]&&s.transceivers[m].rejected&&(s.transceivers[m]=s._createTransceiver(P,!0));var M,G,Z,J,W,Y,x,S,A,H=L.parseRtpParameters(g),ne,_e;y||(ne=L.getIceParameters(g,p),_e=L.getDtlsParameters(g,p),_e.role="client"),x=L.parseRtpEncodingParameters(g);var Se=L.parseRtcpParameters(g),F=L.matchPrefix(g,"a=end-of-candidates",p).length>0,de=L.matchPrefix(g,"a=candidate:").map(function(I){return L.parseCandidate(I)}).filter(function(I){return I.component===1});if((o.type==="offer"||o.type==="answer")&&!y&&v&&m>0&&s.transceivers[m]&&(s._disposeIceAndDtlsTransports(m),s.transceivers[m].iceGatherer=s.transceivers[0].iceGatherer,s.transceivers[m].iceTransport=s.transceivers[0].iceTransport,s.transceivers[m].dtlsTransport=s.transceivers[0].dtlsTransport,s.transceivers[m].rtpSender&&s.transceivers[m].rtpSender.setTransport(s.transceivers[0].dtlsTransport),s.transceivers[m].rtpReceiver&&s.transceivers[m].rtpReceiver.setTransport(s.transceivers[0].dtlsTransport)),o.type==="offer"&&!y){M=s.transceivers[m]||s._createTransceiver(P),M.mid=N,M.iceGatherer||(M.iceGatherer=s._createIceGatherer(m,v)),de.length&&M.iceTransport.state==="new"&&(F&&(!v||m===0)?M.iceTransport.setRemoteCandidates(de):de.forEach(function(I){vr(M.iceTransport,I)})),S=e.RTCRtpReceiver.getCapabilities(P),r<15019&&(S.codecs=S.codecs.filter(function(I){return I.name!=="rtx"})),Y=M.sendEncodingParameters||[{ssrc:(2*m+2)*1001}];var ie=!1;if(E==="sendrecv"||E==="sendonly"){if(ie=!M.rtpReceiver,W=M.rtpReceiver||new e.RTCRtpReceiver(M.dtlsTransport,P),ie){var le;A=W.track,z&&z.stream==="-"||(z?(u[z.stream]||(u[z.stream]=new e.MediaStream,Object.defineProperty(u[z.stream],"id",{get:function(){return z.stream}})),Object.defineProperty(A,"id",{get:function(){return z.track}}),le=u[z.stream]):(u.default||(u.default=new e.MediaStream),le=u.default)),le&&(t(A,le),M.associatedRemoteMediaStreams.push(le)),f.push([A,W,le])}}else M.rtpReceiver&&M.rtpReceiver.track&&(M.associatedRemoteMediaStreams.forEach(function(I){var Ae=I.getTracks().find(function(rt){return rt.id===M.rtpReceiver.track.id});Ae&&n(Ae,I)}),M.associatedRemoteMediaStreams=[]);M.localCapabilities=S,M.remoteCapabilities=H,M.rtpReceiver=W,M.rtcpParameters=Se,M.sendEncodingParameters=Y,M.recvEncodingParameters=x,s._transceive(s.transceivers[m],!1,ie)}else if(o.type==="answer"&&!y){M=s.transceivers[m],G=M.iceGatherer,Z=M.iceTransport,J=M.dtlsTransport,W=M.rtpReceiver,Y=M.sendEncodingParameters,S=M.localCapabilities,s.transceivers[m].recvEncodingParameters=x,s.transceivers[m].remoteCapabilities=H,s.transceivers[m].rtcpParameters=Se,de.length&&Z.state==="new"&&((h||F)&&(!v||m===0)?Z.setRemoteCandidates(de):de.forEach(function(I){vr(M.iceTransport,I)})),(!v||m===0)&&(Z.state==="new"&&Z.start(G,ne,"controlling"),J.state==="new"&&J.start(_e));var Ee=kt(M.localCapabilities,M.remoteCapabilities),tt=Ee.codecs.filter(function(I){return I.name.toLowerCase()==="rtx"}).length;!tt&&M.sendEncodingParameters[0].rtx&&delete M.sendEncodingParameters[0].rtx,s._transceive(M,E==="sendrecv"||E==="recvonly",E==="sendrecv"||E==="sendonly"),W&&(E==="sendrecv"||E==="sendonly")?(A=W.track,z?(u[z.stream]||(u[z.stream]=new e.MediaStream),t(A,u[z.stream]),f.push([A,W,u[z.stream]])):(u.default||(u.default=new e.MediaStream),t(A,u.default),f.push([A,W,u.default]))):delete M.rtpReceiver}}),s._dtlsRole===void 0&&(s._dtlsRole=o.type==="offer"?"active":"passive"),s._remoteDescription={type:o.type,sdp:o.sdp},o.type==="offer"?s._updateSignalingState("have-remote-offer"):s._updateSignalingState("stable"),Object.keys(u).forEach(function(g){var m=u[g];if(m.getTracks().length){if(s.remoteStreams.indexOf(m)===-1){s.remoteStreams.push(m);var R=new Event("addstream");R.stream=m,e.setTimeout(function(){s._dispatchEvent("addstream",R)})}f.forEach(function(P){var y=P[0],B=P[1];m.id===P[2].id&&i(s,y,B,[m])})}}),f.forEach(function(g){g[2]||i(s,g[0],g[1],[])}),e.setTimeout(function(){!(s&&s.transceivers)||s.transceivers.forEach(function(g){g.iceTransport&&g.iceTransport.state==="new"&&g.iceTransport.getRemoteCandidates().length>0&&(console.warn("Timeout for addRemoteCandidate. Consider sending an end-of-candidates notification"),g.iceTransport.addRemoteCandidate({}))})},4e3),Promise.resolve()},a.prototype.close=function(){this.transceivers.forEach(function(o){o.iceTransport&&o.iceTransport.stop(),o.dtlsTransport&&o.dtlsTransport.stop(),o.rtpSender&&o.rtpSender.stop(),o.rtpReceiver&&o.rtpReceiver.stop()}),this._isClosed=!0,this._updateSignalingState("closed")},a.prototype._updateSignalingState=function(o){this.signalingState=o;var s=new Event("signalingstatechange");this._dispatchEvent("signalingstatechange",s)},a.prototype._maybeFireNegotiationNeeded=function(){var o=this;this.signalingState!=="stable"||this.needNegotiation===!0||(this.needNegotiation=!0,e.setTimeout(function(){if(o.needNegotiation){o.needNegotiation=!1;var s=new Event("negotiationneeded");o._dispatchEvent("negotiationneeded",s)}},0))},a.prototype._updateIceConnectionState=function(){var o,s={new:0,closed:0,checking:0,connected:0,completed:0,disconnected:0,failed:0};if(this.transceivers.forEach(function(f){f.iceTransport&&!f.rejected&&s[f.iceTransport.state]++}),o="new",s.failed>0?o="failed":s.checking>0?o="checking":s.disconnected>0?o="disconnected":s.new>0?o="new":s.connected>0?o="connected":s.completed>0&&(o="completed"),o!==this.iceConnectionState){this.iceConnectionState=o;var u=new Event("iceconnectionstatechange");this._dispatchEvent("iceconnectionstatechange",u)}},a.prototype._updateConnectionState=function(){var o,s={new:0,closed:0,connecting:0,connected:0,completed:0,disconnected:0,failed:0};if(this.transceivers.forEach(function(f){f.iceTransport&&f.dtlsTransport&&!f.rejected&&(s[f.iceTransport.state]++,s[f.dtlsTransport.state]++)}),s.connected+=s.completed,o="new",s.failed>0?o="failed":s.connecting>0?o="connecting":s.disconnected>0?o="disconnected":s.new>0?o="new":s.connected>0&&(o="connected"),o!==this.connectionState){this.connectionState=o;var u=new Event("connectionstatechange");this._dispatchEvent("connectionstatechange",u)}},a.prototype.createOffer=function(){var o=this;if(o._isClosed)return Promise.reject(ae("InvalidStateError","Can not call createOffer after close"));var s=o.transceivers.filter(function(h){return h.kind==="audio"}).length,u=o.transceivers.filter(function(h){return h.kind==="video"}).length,f=arguments[0];if(f){if(f.mandatory||f.optional)throw new TypeError("Legacy mandatory/optional constraints not supported.");f.offerToReceiveAudio!==void 0&&(f.offerToReceiveAudio===!0?s=1:f.offerToReceiveAudio===!1?s=0:s=f.offerToReceiveAudio),f.offerToReceiveVideo!==void 0&&(f.offerToReceiveVideo===!0?u=1:f.offerToReceiveVideo===!1?u=0:u=f.offerToReceiveVideo)}for(o.transceivers.forEach(function(h){h.kind==="audio"?(s--,s<0&&(h.wantReceive=!1)):h.kind==="video"&&(u--,u<0&&(h.wantReceive=!1))});s>0||u>0;)s>0&&(o._createTransceiver("audio"),s--),u>0&&(o._createTransceiver("video"),u--);var d=L.writeSessionBoilerplate(o._sdpSessionId,o._sdpSessionVersion++);o.transceivers.forEach(function(h,v){var C=h.track,g=h.kind,m=h.mid||L.generateIdentifier();h.mid=m,h.iceGatherer||(h.iceGatherer=o._createIceGatherer(v,o.usingBundle));var R=e.RTCRtpSender.getCapabilities(g);r<15019&&(R.codecs=R.codecs.filter(function(y){return y.name!=="rtx"})),R.codecs.forEach(function(y){y.name==="H264"&&y.parameters["level-asymmetry-allowed"]===void 0&&(y.parameters["level-asymmetry-allowed"]="1"),h.remoteCapabilities&&h.remoteCapabilities.codecs&&h.remoteCapabilities.codecs.forEach(function(B){y.name.toLowerCase()===B.name.toLowerCase()&&y.clockRate===B.clockRate&&(y.preferredPayloadType=B.payloadType)})}),R.headerExtensions.forEach(function(y){var B=h.remoteCapabilities&&h.remoteCapabilities.headerExtensions||[];B.forEach(function(E){y.uri===E.uri&&(y.id=E.id)})});var P=h.sendEncodingParameters||[{ssrc:(2*v+1)*1001}];C&&r>=15019&&g==="video"&&!P[0].rtx&&(P[0].rtx={ssrc:P[0].ssrc+1}),h.wantReceive&&(h.rtpReceiver=new e.RTCRtpReceiver(h.dtlsTransport,g)),h.localCapabilities=R,h.sendEncodingParameters=P}),o._config.bundlePolicy!=="max-compat"&&(d+="a=group:BUNDLE "+o.transceivers.map(function(h){return h.mid}).join(" ")+`\r
`),d+=`a=ice-options:trickle\r
`,o.transceivers.forEach(function(h,v){d+=_n(h,h.localCapabilities,"offer",h.stream,o._dtlsRole),d+=`a=rtcp-rsize\r
`,h.iceGatherer&&o.iceGatheringState!=="new"&&(v===0||!o.usingBundle)&&(h.iceGatherer.getLocalCandidates().forEach(function(C){C.component=1,d+="a="+L.writeCandidate(C)+`\r
`}),h.iceGatherer.state==="completed"&&(d+=`a=end-of-candidates\r
`))});var p=new e.RTCSessionDescription({type:"offer",sdp:d});return Promise.resolve(p)},a.prototype.createAnswer=function(){var o=this;if(o._isClosed)return Promise.reject(ae("InvalidStateError","Can not call createAnswer after close"));if(!(o.signalingState==="have-remote-offer"||o.signalingState==="have-local-pranswer"))return Promise.reject(ae("InvalidStateError","Can not call createAnswer in signalingState "+o.signalingState));var s=L.writeSessionBoilerplate(o._sdpSessionId,o._sdpSessionVersion++);o.usingBundle&&(s+="a=group:BUNDLE "+o.transceivers.map(function(d){return d.mid}).join(" ")+`\r
`),s+=`a=ice-options:trickle\r
`;var u=L.getMediaSections(o._remoteDescription.sdp).length;o.transceivers.forEach(function(d,p){if(!(p+1>u)){if(d.rejected){d.kind==="application"?d.protocol==="DTLS/SCTP"?s+=`m=application 0 DTLS/SCTP 5000\r
`:s+="m=application 0 "+d.protocol+` webrtc-datachannel\r
`:d.kind==="audio"?s+=`m=audio 0 UDP/TLS/RTP/SAVPF 0\r
a=rtpmap:0 PCMU/8000\r
`:d.kind==="video"&&(s+=`m=video 0 UDP/TLS/RTP/SAVPF 120\r
a=rtpmap:120 VP8/90000\r
`),s+=`c=IN IP4 0.0.0.0\r
a=inactive\r
a=mid:`+d.mid+`\r
`;return}if(d.stream){var h;d.kind==="audio"?h=d.stream.getAudioTracks()[0]:d.kind==="video"&&(h=d.stream.getVideoTracks()[0]),h&&r>=15019&&d.kind==="video"&&!d.sendEncodingParameters[0].rtx&&(d.sendEncodingParameters[0].rtx={ssrc:d.sendEncodingParameters[0].ssrc+1})}var v=kt(d.localCapabilities,d.remoteCapabilities),C=v.codecs.filter(function(g){return g.name.toLowerCase()==="rtx"}).length;!C&&d.sendEncodingParameters[0].rtx&&delete d.sendEncodingParameters[0].rtx,s+=_n(d,v,"answer",d.stream,o._dtlsRole),d.rtcpParameters&&d.rtcpParameters.reducedSize&&(s+=`a=rtcp-rsize\r
`)}});var f=new e.RTCSessionDescription({type:"answer",sdp:s});return Promise.resolve(f)},a.prototype.addIceCandidate=function(o){var s=this,u;return o&&!(o.sdpMLineIndex!==void 0||o.sdpMid)?Promise.reject(new TypeError("sdpMLineIndex or sdpMid required")):new Promise(function(f,d){if(s._remoteDescription)if(!o||o.candidate==="")for(var p=0;p<s.transceivers.length&&!(!s.transceivers[p].rejected&&(s.transceivers[p].iceTransport.addRemoteCandidate({}),u=L.getMediaSections(s._remoteDescription.sdp),u[p]+=`a=end-of-candidates\r
`,s._remoteDescription.sdp=L.getDescription(s._remoteDescription.sdp)+u.join(""),s.usingBundle));p++);else{var h=o.sdpMLineIndex;if(o.sdpMid){for(var v=0;v<s.transceivers.length;v++)if(s.transceivers[v].mid===o.sdpMid){h=v;break}}var C=s.transceivers[h];if(C){if(C.rejected)return f();var g=Object.keys(o.candidate).length>0?L.parseCandidate(o.candidate):{};if(g.protocol==="tcp"&&(g.port===0||g.port===9)||g.component&&g.component!==1)return f();if((h===0||h>0&&C.iceTransport!==s.transceivers[0].iceTransport)&&!vr(C.iceTransport,g))return d(ae("OperationError","Can not add ICE candidate"));var m=o.candidate.trim();m.indexOf("a=")===0&&(m=m.substr(2)),u=L.getMediaSections(s._remoteDescription.sdp),u[h]+="a="+(g.type?m:"end-of-candidates")+`\r
`,s._remoteDescription.sdp=L.getDescription(s._remoteDescription.sdp)+u.join("")}else return d(ae("OperationError","Can not add ICE candidate"))}else return d(ae("InvalidStateError","Can not add ICE candidate without a remote description"));f()})},a.prototype.getStats=function(o){if(o&&o instanceof e.MediaStreamTrack){var s=null;if(this.transceivers.forEach(function(f){f.rtpSender&&f.rtpSender.track===o?s=f.rtpSender:f.rtpReceiver&&f.rtpReceiver.track===o&&(s=f.rtpReceiver)}),!s)throw ae("InvalidAccessError","Invalid selector.");return s.getStats()}var u=[];return this.transceivers.forEach(function(f){["rtpSender","rtpReceiver","iceGatherer","iceTransport","dtlsTransport"].forEach(function(d){f[d]&&u.push(f[d].getStats())})}),Promise.all(u).then(function(f){var d=new Map;return f.forEach(function(p){p.forEach(function(h){d.set(h.id,h)})}),d})};var c=["RTCRtpSender","RTCRtpReceiver","RTCIceGatherer","RTCIceTransport","RTCDtlsTransport"];c.forEach(function(o){var s=e[o];if(s&&s.prototype&&s.prototype.getStats){var u=s.prototype.getStats;s.prototype.getStats=function(){return u.apply(this).then(function(f){var d=new Map;return Object.keys(f).forEach(function(p){f[p].type=yo(f[p]),d.set(p,f[p])}),d})}}});var l=["createOffer","createAnswer"];return l.forEach(function(o){var s=a.prototype[o];a.prototype[o]=function(){var u=arguments;return typeof u[0]=="function"||typeof u[1]=="function"?s.apply(this,[arguments[2]]).then(function(f){typeof u[0]=="function"&&u[0].apply(null,[f])},function(f){typeof u[1]=="function"&&u[1].apply(null,[f])}):s.apply(this,arguments)}}),l=["setLocalDescription","setRemoteDescription","addIceCandidate"],l.forEach(function(o){var s=a.prototype[o];a.prototype[o]=function(){var u=arguments;return typeof u[1]=="function"||typeof u[2]=="function"?s.apply(this,arguments).then(function(){typeof u[1]=="function"&&u[1].apply(null)},function(f){typeof u[2]=="function"&&u[2].apply(null,[f])}):s.apply(this,arguments)}}),["getStats"].forEach(function(o){var s=a.prototype[o];a.prototype[o]=function(){var u=arguments;return typeof u[1]=="function"?s.apply(this,arguments).then(function(){typeof u[1]=="function"&&u[1].apply(null)}):s.apply(this,arguments)}}),a};function ki(e){const r=e&&e.navigator,t=function(i){return{name:{PermissionDeniedError:"NotAllowedError"}[i.name]||i.name,message:i.message,constraint:i.constraint,toString(){return this.name}}},n=r.mediaDevices.getUserMedia.bind(r.mediaDevices);r.mediaDevices.getUserMedia=function(i){return n(i).catch(a=>Promise.reject(t(a)))}}function xi(e){"getDisplayMedia"in e.navigator&&(!e.navigator.mediaDevices||e.navigator.mediaDevices&&"getDisplayMedia"in e.navigator.mediaDevices||(e.navigator.mediaDevices.getDisplayMedia=e.navigator.getDisplayMedia.bind(e.navigator)))}function Pr(e,r){if(e.RTCIceGatherer&&(e.RTCIceCandidate||(e.RTCIceCandidate=function(i){return i}),e.RTCSessionDescription||(e.RTCSessionDescription=function(i){return i}),r.version<15025)){const n=Object.getOwnPropertyDescriptor(e.MediaStreamTrack.prototype,"enabled");Object.defineProperty(e.MediaStreamTrack.prototype,"enabled",{set(i){n.set.call(this,i);const a=new Event("enabled");a.enabled=i,this.dispatchEvent(a)}})}e.RTCRtpSender&&!("dtmf"in e.RTCRtpSender.prototype)&&Object.defineProperty(e.RTCRtpSender.prototype,"dtmf",{get(){return this._dtmf===void 0&&(this.track.kind==="audio"?this._dtmf=new e.RTCDtmfSender(this):this.track.kind==="video"&&(this._dtmf=null)),this._dtmf}}),e.RTCDtmfSender&&!e.RTCDTMFSender&&(e.RTCDTMFSender=e.RTCDtmfSender);const t=_o(e,r.version);e.RTCPeerConnection=function(i){return i&&i.iceServers&&(i.iceServers=go(i.iceServers,r.version),Wr("ICE servers after filtering:",i.iceServers)),new t(i)},e.RTCPeerConnection.prototype=t.prototype}function Pi(e){e.RTCRtpSender&&!("replaceTrack"in e.RTCRtpSender.prototype)&&(e.RTCRtpSender.prototype.replaceTrack=e.RTCRtpSender.prototype.setTrack)}var Cn=Object.freeze(Object.defineProperty({__proto__:null,shimPeerConnection:Pr,shimReplaceTrack:Pi,shimGetUserMedia:ki,shimGetDisplayMedia:xi},Symbol.toStringTag,{value:"Module"}));function Ri(e,r){const t=e&&e.navigator,n=e&&e.MediaStreamTrack;if(t.getUserMedia=function(i,a,c){nr("navigator.getUserMedia","navigator.mediaDevices.getUserMedia"),t.mediaDevices.getUserMedia(i).then(a,c)},!(r.version>55&&"autoGainControl"in t.mediaDevices.getSupportedConstraints())){const i=function(c,l,o){l in c&&!(o in c)&&(c[o]=c[l],delete c[l])},a=t.mediaDevices.getUserMedia.bind(t.mediaDevices);if(t.mediaDevices.getUserMedia=function(c){return typeof c=="object"&&typeof c.audio=="object"&&(c=JSON.parse(JSON.stringify(c)),i(c.audio,"autoGainControl","mozAutoGainControl"),i(c.audio,"noiseSuppression","mozNoiseSuppression")),a(c)},n&&n.prototype.getSettings){const c=n.prototype.getSettings;n.prototype.getSettings=function(){const l=c.apply(this,arguments);return i(l,"mozAutoGainControl","autoGainControl"),i(l,"mozNoiseSuppression","noiseSuppression"),l}}if(n&&n.prototype.applyConstraints){const c=n.prototype.applyConstraints;n.prototype.applyConstraints=function(l){return this.kind==="audio"&&typeof l=="object"&&(l=JSON.parse(JSON.stringify(l)),i(l,"autoGainControl","mozAutoGainControl"),i(l,"noiseSuppression","mozNoiseSuppression")),c.apply(this,[l])}}}}function So(e,r){e.navigator.mediaDevices&&"getDisplayMedia"in e.navigator.mediaDevices||!e.navigator.mediaDevices||(e.navigator.mediaDevices.getDisplayMedia=function(n){if(!(n&&n.video)){const i=new DOMException("getDisplayMedia without video constraints is undefined");return i.name="NotFoundError",i.code=8,Promise.reject(i)}return n.video===!0?n.video={mediaSource:r}:n.video.mediaSource=r,e.navigator.mediaDevices.getUserMedia(n)})}function Ei(e){typeof e=="object"&&e.RTCTrackEvent&&"receiver"in e.RTCTrackEvent.prototype&&!("transceiver"in e.RTCTrackEvent.prototype)&&Object.defineProperty(e.RTCTrackEvent.prototype,"transceiver",{get(){return{receiver:this.receiver}}})}function Rr(e,r){if(typeof e!="object"||!(e.RTCPeerConnection||e.mozRTCPeerConnection))return;!e.RTCPeerConnection&&e.mozRTCPeerConnection&&(e.RTCPeerConnection=e.mozRTCPeerConnection),r.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(i){const a=e.RTCPeerConnection.prototype[i],c={[i](){return arguments[0]=new(i==="addIceCandidate"?e.RTCIceCandidate:e.RTCSessionDescription)(arguments[0]),a.apply(this,arguments)}};e.RTCPeerConnection.prototype[i]=c[i]});const t={inboundrtp:"inbound-rtp",outboundrtp:"outbound-rtp",candidatepair:"candidate-pair",localcandidate:"local-candidate",remotecandidate:"remote-candidate"},n=e.RTCPeerConnection.prototype.getStats;e.RTCPeerConnection.prototype.getStats=function(){const[a,c,l]=arguments;return n.apply(this,[a||null]).then(o=>{if(r.version<53&&!c)try{o.forEach(s=>{s.type=t[s.type]||s.type})}catch(s){if(s.name!=="TypeError")throw s;o.forEach((u,f)=>{o.set(f,Object.assign({},u,{type:t[u.type]||u.type}))})}return o}).then(c,l)}}function Oi(e){if(!(typeof e=="object"&&e.RTCPeerConnection&&e.RTCRtpSender)||e.RTCRtpSender&&"getStats"in e.RTCRtpSender.prototype)return;const r=e.RTCPeerConnection.prototype.getSenders;r&&(e.RTCPeerConnection.prototype.getSenders=function(){const i=r.apply(this,[]);return i.forEach(a=>a._pc=this),i});const t=e.RTCPeerConnection.prototype.addTrack;t&&(e.RTCPeerConnection.prototype.addTrack=function(){const i=t.apply(this,arguments);return i._pc=this,i}),e.RTCRtpSender.prototype.getStats=function(){return this.track?this._pc.getStats(this.track):Promise.resolve(new Map)}}function Di(e){if(!(typeof e=="object"&&e.RTCPeerConnection&&e.RTCRtpSender)||e.RTCRtpSender&&"getStats"in e.RTCRtpReceiver.prototype)return;const r=e.RTCPeerConnection.prototype.getReceivers;r&&(e.RTCPeerConnection.prototype.getReceivers=function(){const n=r.apply(this,[]);return n.forEach(i=>i._pc=this),n}),et(e,"track",t=>(t.receiver._pc=t.srcElement,t)),e.RTCRtpReceiver.prototype.getStats=function(){return this._pc.getStats(this.track)}}function Mi(e){!e.RTCPeerConnection||"removeStream"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.removeStream=function(t){nr("removeStream","removeTrack"),this.getSenders().forEach(n=>{n.track&&t.getTracks().includes(n.track)&&this.removeTrack(n)})})}function Ii(e){e.DataChannel&&!e.RTCDataChannel&&(e.RTCDataChannel=e.DataChannel)}function Ai(e){if(!(typeof e=="object"&&e.RTCPeerConnection))return;const r=e.RTCPeerConnection.prototype.addTransceiver;r&&(e.RTCPeerConnection.prototype.addTransceiver=function(){this.setParametersPromises=[];const n=arguments[1],i=n&&"sendEncodings"in n;i&&n.sendEncodings.forEach(c=>{if("rid"in c&&!/^[a-z0-9]{0,16}$/i.test(c.rid))throw new TypeError("Invalid RID value provided.");if("scaleResolutionDownBy"in c&&!(parseFloat(c.scaleResolutionDownBy)>=1))throw new RangeError("scale_resolution_down_by must be >= 1.0");if("maxFramerate"in c&&!(parseFloat(c.maxFramerate)>=0))throw new RangeError("max_framerate must be >= 0.0")});const a=r.apply(this,arguments);if(i){const{sender:c}=a,l=c.getParameters();(!("encodings"in l)||l.encodings.length===1&&Object.keys(l.encodings[0]).length===0)&&(l.encodings=n.sendEncodings,c.sendEncodings=n.sendEncodings,this.setParametersPromises.push(c.setParameters(l).then(()=>{delete c.sendEncodings}).catch(()=>{delete c.sendEncodings})))}return a})}function wi(e){if(!(typeof e=="object"&&e.RTCRtpSender))return;const r=e.RTCRtpSender.prototype.getParameters;r&&(e.RTCRtpSender.prototype.getParameters=function(){const n=r.apply(this,arguments);return"encodings"in n||(n.encodings=[].concat(this.sendEncodings||[{}])),n})}function Bi(e){if(!(typeof e=="object"&&e.RTCPeerConnection))return;const r=e.RTCPeerConnection.prototype.createOffer;e.RTCPeerConnection.prototype.createOffer=function(){return this.setParametersPromises&&this.setParametersPromises.length?Promise.all(this.setParametersPromises).then(()=>r.apply(this,arguments)).finally(()=>{this.setParametersPromises=[]}):r.apply(this,arguments)}}function Li(e){if(!(typeof e=="object"&&e.RTCPeerConnection))return;const r=e.RTCPeerConnection.prototype.createAnswer;e.RTCPeerConnection.prototype.createAnswer=function(){return this.setParametersPromises&&this.setParametersPromises.length?Promise.all(this.setParametersPromises).then(()=>r.apply(this,arguments)).finally(()=>{this.setParametersPromises=[]}):r.apply(this,arguments)}}var Tn=Object.freeze(Object.defineProperty({__proto__:null,shimOnTrack:Ei,shimPeerConnection:Rr,shimSenderGetStats:Oi,shimReceiverGetStats:Di,shimRemoveStream:Mi,shimRTCDataChannel:Ii,shimAddTransceiver:Ai,shimGetParameters:wi,shimCreateOffer:Bi,shimCreateAnswer:Li,shimGetUserMedia:Ri,shimGetDisplayMedia:So},Symbol.toStringTag,{value:"Module"}));function ji(e){if(!(typeof e!="object"||!e.RTCPeerConnection)){if("getLocalStreams"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.getLocalStreams=function(){return this._localStreams||(this._localStreams=[]),this._localStreams}),!("addStream"in e.RTCPeerConnection.prototype)){const r=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addStream=function(n){this._localStreams||(this._localStreams=[]),this._localStreams.includes(n)||this._localStreams.push(n),n.getAudioTracks().forEach(i=>r.call(this,i,n)),n.getVideoTracks().forEach(i=>r.call(this,i,n))},e.RTCPeerConnection.prototype.addTrack=function(n,...i){return i&&i.forEach(a=>{this._localStreams?this._localStreams.includes(a)||this._localStreams.push(a):this._localStreams=[a]}),r.apply(this,arguments)}}"removeStream"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.removeStream=function(t){this._localStreams||(this._localStreams=[]);const n=this._localStreams.indexOf(t);if(n===-1)return;this._localStreams.splice(n,1);const i=t.getTracks();this.getSenders().forEach(a=>{i.includes(a.track)&&this.removeTrack(a)})})}}function zi(e){if(!(typeof e!="object"||!e.RTCPeerConnection)&&("getRemoteStreams"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.getRemoteStreams=function(){return this._remoteStreams?this._remoteStreams:[]}),!("onaddstream"in e.RTCPeerConnection.prototype))){Object.defineProperty(e.RTCPeerConnection.prototype,"onaddstream",{get(){return this._onaddstream},set(t){this._onaddstream&&(this.removeEventListener("addstream",this._onaddstream),this.removeEventListener("track",this._onaddstreampoly)),this.addEventListener("addstream",this._onaddstream=t),this.addEventListener("track",this._onaddstreampoly=n=>{n.streams.forEach(i=>{if(this._remoteStreams||(this._remoteStreams=[]),this._remoteStreams.includes(i))return;this._remoteStreams.push(i);const a=new Event("addstream");a.stream=i,this.dispatchEvent(a)})})}});const r=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(){const n=this;return this._onaddstreampoly||this.addEventListener("track",this._onaddstreampoly=function(i){i.streams.forEach(a=>{if(n._remoteStreams||(n._remoteStreams=[]),n._remoteStreams.indexOf(a)>=0)return;n._remoteStreams.push(a);const c=new Event("addstream");c.stream=a,n.dispatchEvent(c)})}),r.apply(n,arguments)}}}function $i(e){if(typeof e!="object"||!e.RTCPeerConnection)return;const r=e.RTCPeerConnection.prototype,t=r.createOffer,n=r.createAnswer,i=r.setLocalDescription,a=r.setRemoteDescription,c=r.addIceCandidate;r.createOffer=function(s,u){const f=arguments.length>=2?arguments[2]:arguments[0],d=t.apply(this,[f]);return u?(d.then(s,u),Promise.resolve()):d},r.createAnswer=function(s,u){const f=arguments.length>=2?arguments[2]:arguments[0],d=n.apply(this,[f]);return u?(d.then(s,u),Promise.resolve()):d};let l=function(o,s,u){const f=i.apply(this,[o]);return u?(f.then(s,u),Promise.resolve()):f};r.setLocalDescription=l,l=function(o,s,u){const f=a.apply(this,[o]);return u?(f.then(s,u),Promise.resolve()):f},r.setRemoteDescription=l,l=function(o,s,u){const f=c.apply(this,[o]);return u?(f.then(s,u),Promise.resolve()):f},r.addIceCandidate=l}function qi(e){const r=e&&e.navigator;if(r.mediaDevices&&r.mediaDevices.getUserMedia){const t=r.mediaDevices,n=t.getUserMedia.bind(t);r.mediaDevices.getUserMedia=i=>n(Fi(i))}!r.getUserMedia&&r.mediaDevices&&r.mediaDevices.getUserMedia&&(r.getUserMedia=function(n,i,a){r.mediaDevices.getUserMedia(n).then(i,a)}.bind(r))}function Fi(e){return e&&e.video!==void 0?Object.assign({},e,{video:hi(e.video)}):e}function Ni(e){if(!e.RTCPeerConnection)return;const r=e.RTCPeerConnection;e.RTCPeerConnection=function(n,i){if(n&&n.iceServers){const a=[];for(let c=0;c<n.iceServers.length;c++){let l=n.iceServers[c];!l.hasOwnProperty("urls")&&l.hasOwnProperty("url")?(nr("RTCIceServer.url","RTCIceServer.urls"),l=JSON.parse(JSON.stringify(l)),l.urls=l.url,delete l.url,a.push(l)):a.push(n.iceServers[c])}n.iceServers=a}return new r(n,i)},e.RTCPeerConnection.prototype=r.prototype,"generateCertificate"in r&&Object.defineProperty(e.RTCPeerConnection,"generateCertificate",{get(){return r.generateCertificate}})}function Hi(e){typeof e=="object"&&e.RTCTrackEvent&&"receiver"in e.RTCTrackEvent.prototype&&!("transceiver"in e.RTCTrackEvent.prototype)&&Object.defineProperty(e.RTCTrackEvent.prototype,"transceiver",{get(){return{receiver:this.receiver}}})}function Ui(e){const r=e.RTCPeerConnection.prototype.createOffer;e.RTCPeerConnection.prototype.createOffer=function(n){if(n){typeof n.offerToReceiveAudio<"u"&&(n.offerToReceiveAudio=!!n.offerToReceiveAudio);const i=this.getTransceivers().find(c=>c.receiver.track.kind==="audio");n.offerToReceiveAudio===!1&&i?i.direction==="sendrecv"?i.setDirection?i.setDirection("sendonly"):i.direction="sendonly":i.direction==="recvonly"&&(i.setDirection?i.setDirection("inactive"):i.direction="inactive"):n.offerToReceiveAudio===!0&&!i&&this.addTransceiver("audio"),typeof n.offerToReceiveVideo<"u"&&(n.offerToReceiveVideo=!!n.offerToReceiveVideo);const a=this.getTransceivers().find(c=>c.receiver.track.kind==="video");n.offerToReceiveVideo===!1&&a?a.direction==="sendrecv"?a.setDirection?a.setDirection("sendonly"):a.direction="sendonly":a.direction==="recvonly"&&(a.setDirection?a.setDirection("inactive"):a.direction="inactive"):n.offerToReceiveVideo===!0&&!a&&this.addTransceiver("video")}return r.apply(this,arguments)}}function Gi(e){typeof e!="object"||e.AudioContext||(e.AudioContext=e.webkitAudioContext)}var kn=Object.freeze(Object.defineProperty({__proto__:null,shimLocalStreamsAPI:ji,shimRemoteStreamsAPI:zi,shimCallbacksAPI:$i,shimGetUserMedia:qi,shimConstraints:Fi,shimRTCIceServerUrls:Ni,shimTrackEventTransceiver:Hi,shimCreateOfferLegacy:Ui,shimAudioContext:Gi},Symbol.toStringTag,{value:"Module"}));function Mt(e){if(!e.RTCIceCandidate||e.RTCIceCandidate&&"foundation"in e.RTCIceCandidate.prototype)return;const r=e.RTCIceCandidate;e.RTCIceCandidate=function(n){if(typeof n=="object"&&n.candidate&&n.candidate.indexOf("a=")===0&&(n=JSON.parse(JSON.stringify(n)),n.candidate=n.candidate.substr(2)),n.candidate&&n.candidate.length){const i=new r(n),a=Dt.parseCandidate(n.candidate),c=Object.assign(i,a);return c.toJSON=function(){return{candidate:c.candidate,sdpMid:c.sdpMid,sdpMLineIndex:c.sdpMLineIndex,usernameFragment:c.usernameFragment}},c}return new r(n)},e.RTCIceCandidate.prototype=r.prototype,et(e,"icecandidate",t=>(t.candidate&&Object.defineProperty(t,"candidate",{value:new e.RTCIceCandidate(t.candidate),writable:"false"}),t))}function lt(e,r){if(!e.RTCPeerConnection)return;"sctp"in e.RTCPeerConnection.prototype||Object.defineProperty(e.RTCPeerConnection.prototype,"sctp",{get(){return typeof this._sctp>"u"?null:this._sctp}});const t=function(l){if(!l||!l.sdp)return!1;const o=Dt.splitSections(l.sdp);return o.shift(),o.some(s=>{const u=Dt.parseMLine(s);return u&&u.kind==="application"&&u.protocol.indexOf("SCTP")!==-1})},n=function(l){const o=l.sdp.match(/mozilla...THIS_IS_SDPARTA-(\d+)/);if(o===null||o.length<2)return-1;const s=parseInt(o[1],10);return s!==s?-1:s},i=function(l){let o=65536;return r.browser==="firefox"&&(r.version<57?l===-1?o=16384:o=2147483637:r.version<60?o=r.version===57?65535:65536:o=2147483637),o},a=function(l,o){let s=65536;r.browser==="firefox"&&r.version===57&&(s=65535);const u=Dt.matchPrefix(l.sdp,"a=max-message-size:");return u.length>0?s=parseInt(u[0].substr(19),10):r.browser==="firefox"&&o!==-1&&(s=2147483637),s},c=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(){if(this._sctp=null,r.browser==="chrome"&&r.version>=76){const{sdpSemantics:o}=this.getConfiguration();o==="plan-b"&&Object.defineProperty(this,"sctp",{get(){return typeof this._sctp>"u"?null:this._sctp},enumerable:!0,configurable:!0})}if(t(arguments[0])){const o=n(arguments[0]),s=i(o),u=a(arguments[0],o);let f;s===0&&u===0?f=Number.POSITIVE_INFINITY:s===0||u===0?f=Math.max(s,u):f=Math.min(s,u);const d={};Object.defineProperty(d,"maxMessageSize",{get(){return f}}),this._sctp=d}return c.apply(this,arguments)}}function ut(e){if(!(e.RTCPeerConnection&&"createDataChannel"in e.RTCPeerConnection.prototype))return;function r(n,i){const a=n.send;n.send=function(){const l=arguments[0],o=l.length||l.size||l.byteLength;if(n.readyState==="open"&&i.sctp&&o>i.sctp.maxMessageSize)throw new TypeError("Message too large (can send a maximum of "+i.sctp.maxMessageSize+" bytes)");return a.apply(n,arguments)}}const t=e.RTCPeerConnection.prototype.createDataChannel;e.RTCPeerConnection.prototype.createDataChannel=function(){const i=t.apply(this,arguments);return r(i,this),i},et(e,"datachannel",n=>(r(n.channel,n.target),n))}function Er(e){if(!e.RTCPeerConnection||"connectionState"in e.RTCPeerConnection.prototype)return;const r=e.RTCPeerConnection.prototype;Object.defineProperty(r,"connectionState",{get(){return{completed:"connected",checking:"connecting"}[this.iceConnectionState]||this.iceConnectionState},enumerable:!0,configurable:!0}),Object.defineProperty(r,"onconnectionstatechange",{get(){return this._onconnectionstatechange||null},set(t){this._onconnectionstatechange&&(this.removeEventListener("connectionstatechange",this._onconnectionstatechange),delete this._onconnectionstatechange),t&&this.addEventListener("connectionstatechange",this._onconnectionstatechange=t)},enumerable:!0,configurable:!0}),["setLocalDescription","setRemoteDescription"].forEach(t=>{const n=r[t];r[t]=function(){return this._connectionstatechangepoly||(this._connectionstatechangepoly=i=>{const a=i.target;if(a._lastConnectionState!==a.connectionState){a._lastConnectionState=a.connectionState;const c=new Event("connectionstatechange",i);a.dispatchEvent(c)}return i},this.addEventListener("iceconnectionstatechange",this._connectionstatechangepoly)),n.apply(this,arguments)}})}function Or(e,r){if(!e.RTCPeerConnection||r.browser==="chrome"&&r.version>=71||r.browser==="safari"&&r.version>=605)return;const t=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(i){if(i&&i.sdp&&i.sdp.indexOf(`
a=extmap-allow-mixed`)!==-1){const a=i.sdp.split(`
`).filter(c=>c.trim()!=="a=extmap-allow-mixed").join(`
`);e.RTCSessionDescription&&i instanceof e.RTCSessionDescription?arguments[0]=new e.RTCSessionDescription({type:i.type,sdp:a}):i.sdp=a}return t.apply(this,arguments)}}function It(e,r){if(!(e.RTCPeerConnection&&e.RTCPeerConnection.prototype))return;const t=e.RTCPeerConnection.prototype.addIceCandidate;!t||t.length===0||(e.RTCPeerConnection.prototype.addIceCandidate=function(){return arguments[0]?(r.browser==="chrome"&&r.version<78||r.browser==="firefox"&&r.version<68||r.browser==="safari")&&arguments[0]&&arguments[0].candidate===""?Promise.resolve():t.apply(this,arguments):(arguments[1]&&arguments[1].apply(null),Promise.resolve())})}var Co=Object.freeze(Object.defineProperty({__proto__:null,shimRTCIceCandidate:Mt,shimMaxMessageSize:lt,shimSendThrowTypeError:ut,shimConnectionState:Er,removeExtmapAllowMixed:Or,shimAddIceCandidateNullOrEmpty:It},Symbol.toStringTag,{value:"Module"}));function To({window:e}={},r={shimChrome:!0,shimFirefox:!0,shimEdge:!0,shimSafari:!0}){const t=Wr,n=vo(e),i={browserDetails:n,commonShim:Co,extractVersion:ct,disableLog:po,disableWarnings:ho};switch(n.browser){case"chrome":if(!bn||!xr||!r.shimChrome)return t("Chrome shim is not included in this adapter release."),i;if(n.version===null)return t("Chrome shim can not determine version, not shimming."),i;t("adapter.js shimming chrome."),i.browserShim=bn,It(e,n),vi(e,n),mi(e),xr(e,n),gi(e),Ci(e,n),yi(e),bi(e),_i(e),Ti(e,n),Mt(e),Er(e),lt(e,n),ut(e),Or(e,n);break;case"firefox":if(!Tn||!Rr||!r.shimFirefox)return t("Firefox shim is not included in this adapter release."),i;t("adapter.js shimming firefox."),i.browserShim=Tn,It(e,n),Ri(e,n),Rr(e,n),Ei(e),Mi(e),Oi(e),Di(e),Ii(e),Ai(e),wi(e),Bi(e),Li(e),Mt(e),Er(e),lt(e,n),ut(e);break;case"edge":if(!Cn||!Pr||!r.shimEdge)return t("MS edge shim is not included in this adapter release."),i;t("adapter.js shimming edge."),i.browserShim=Cn,ki(e),xi(e),Pr(e,n),Pi(e),lt(e,n),ut(e);break;case"safari":if(!kn||!r.shimSafari)return t("Safari shim is not included in this adapter release."),i;t("adapter.js shimming safari."),i.browserShim=kn,It(e,n),Ni(e),Ui(e),$i(e),ji(e),zi(e),Hi(e),qi(e),Gi(e),Mt(e),lt(e,n),ut(e),Or(e,n);break;default:t("Unsupported browser!");break}return i}const xn=To({window:typeof window>"u"?void 0:window});function Re(e,r,t,n){Object.defineProperty(e,r,{get:t,set:n,enumerable:!0,configurable:!0})}var mr=xn.default||xn,it=new(function(){function e(){this.isIOS=["iPad","iPhone","iPod"].includes(navigator.platform),this.supportedBrowsers=["firefox","chrome","safari"],this.minFirefoxVersion=59,this.minChromeVersion=72,this.minSafariVersion=605}return e.prototype.isWebRTCSupported=function(){return typeof RTCPeerConnection<"u"},e.prototype.isBrowserSupported=function(){var r=this.getBrowser(),t=this.getVersion(),n=this.supportedBrowsers.includes(r);return n?r==="chrome"?t>=this.minChromeVersion:r==="firefox"?t>=this.minFirefoxVersion:r==="safari"?!this.isIOS&&t>=this.minSafariVersion:!1:!1},e.prototype.getBrowser=function(){return mr.browserDetails.browser},e.prototype.getVersion=function(){return mr.browserDetails.version||0},e.prototype.isUnifiedPlanSupported=function(){var r=this.getBrowser(),t=mr.browserDetails.version||0;if(r==="chrome"&&t<this.minChromeVersion)return!1;if(r==="firefox"&&t>=this.minFirefoxVersion)return!0;if(!window.RTCRtpTransceiver||!("currentDirection"in RTCRtpTransceiver.prototype))return!1;var n,i=!1;try{n=new RTCPeerConnection,n.addTransceiver("audio"),i=!0}catch{}finally{n&&n.close()}return i},e.prototype.toString=function(){return`Supports:
    browser:`.concat(this.getBrowser(),`
    version:`).concat(this.getVersion(),`
    isIOS:`).concat(this.isIOS,`
    isWebRTCSupported:`).concat(this.isWebRTCSupported(),`
    isBrowserSupported:`).concat(this.isBrowserSupported(),`
    isUnifiedPlanSupported:`).concat(this.isUnifiedPlanSupported())},e}()),Pn={iceServers:[{urls:"stun:stun.l.google.com:19302"},{urls:["turn:eu-0.turn.peerjs.com:3478","turn:us-0.turn.peerjs.com:3478"],username:"peerjs",credential:"peerjsp"}],sdpSemantics:"unified-plan"},ko=function(){function e(){this.CLOUD_HOST="0.peerjs.com",this.CLOUD_PORT=443,this.chunkedBrowsers={Chrome:1,chrome:1},this.chunkedMTU=16300,this.defaultConfig=Pn,this.browser=it.getBrowser(),this.browserVersion=it.getVersion(),this.supports=function(){var r={browser:it.isBrowserSupported(),webRTC:it.isWebRTCSupported(),audioVideo:!1,data:!1,binaryBlob:!1,reliable:!1};if(!r.webRTC)return r;var t;try{t=new RTCPeerConnection(Pn),r.audioVideo=!0;var n=void 0;try{n=t.createDataChannel("_PEERJSTEST",{ordered:!0}),r.data=!0,r.reliable=!!n.ordered;try{n.binaryType="blob",r.binaryBlob=!it.isIOS}catch{}}catch{}finally{n&&n.close()}}catch{}finally{t&&t.close()}return r}(),this.pack=vn.pack,this.unpack=vn.unpack,this._dataCount=1}return e.prototype.noop=function(){},e.prototype.validateId=function(r){return!r||/^[A-Za-z0-9]+(?:[ _-][A-Za-z0-9]+)*$/.test(r)},e.prototype.chunk=function(r){for(var t=[],n=r.size,i=Math.ceil(n/q.chunkedMTU),a=0,c=0;c<n;){var l=Math.min(n,c+q.chunkedMTU),o=r.slice(c,l),s={__peerData:this._dataCount,n:a,data:o,total:i};t.push(s),c=l,a++}return this._dataCount++,t},e.prototype.blobToArrayBuffer=function(r,t){var n=new FileReader;return n.onload=function(i){i.target&&t(i.target.result)},n.readAsArrayBuffer(r),n},e.prototype.binaryStringToArrayBuffer=function(r){for(var t=new Uint8Array(r.length),n=0;n<r.length;n++)t[n]=r.charCodeAt(n)&255;return t.buffer},e.prototype.randomToken=function(){return Math.random().toString(36).slice(2)},e.prototype.isSecure=function(){return location.protocol==="https:"},e}(),q=new ko,Vi={};Re(Vi,"Peer",()=>jn,e=>jn=e);var St={},xo=Object.prototype.hasOwnProperty,fe="~";function mt(){}Object.create&&(mt.prototype=Object.create(null),new mt().__proto__||(fe=!1));function Po(e,r,t){this.fn=e,this.context=r,this.once=t||!1}function Wi(e,r,t,n,i){if(typeof t!="function")throw new TypeError("The listener must be a function");var a=new Po(t,n||e,i),c=fe?fe+r:r;return e._events[c]?e._events[c].fn?e._events[c]=[e._events[c],a]:e._events[c].push(a):(e._events[c]=a,e._eventsCount++),e}function At(e,r){--e._eventsCount===0?e._events=new mt:delete e._events[r]}function se(){this._events=new mt,this._eventsCount=0}se.prototype.eventNames=function(){var r=[],t,n;if(this._eventsCount===0)return r;for(n in t=this._events)xo.call(t,n)&&r.push(fe?n.slice(1):n);return Object.getOwnPropertySymbols?r.concat(Object.getOwnPropertySymbols(t)):r};se.prototype.listeners=function(r){var t=fe?fe+r:r,n=this._events[t];if(!n)return[];if(n.fn)return[n.fn];for(var i=0,a=n.length,c=new Array(a);i<a;i++)c[i]=n[i].fn;return c};se.prototype.listenerCount=function(r){var t=fe?fe+r:r,n=this._events[t];return n?n.fn?1:n.length:0};se.prototype.emit=function(r,t,n,i,a,c){var l=fe?fe+r:r;if(!this._events[l])return!1;var o=this._events[l],s=arguments.length,u,f;if(o.fn){switch(o.once&&this.removeListener(r,o.fn,void 0,!0),s){case 1:return o.fn.call(o.context),!0;case 2:return o.fn.call(o.context,t),!0;case 3:return o.fn.call(o.context,t,n),!0;case 4:return o.fn.call(o.context,t,n,i),!0;case 5:return o.fn.call(o.context,t,n,i,a),!0;case 6:return o.fn.call(o.context,t,n,i,a,c),!0}for(f=1,u=new Array(s-1);f<s;f++)u[f-1]=arguments[f];o.fn.apply(o.context,u)}else{var d=o.length,p;for(f=0;f<d;f++)switch(o[f].once&&this.removeListener(r,o[f].fn,void 0,!0),s){case 1:o[f].fn.call(o[f].context);break;case 2:o[f].fn.call(o[f].context,t);break;case 3:o[f].fn.call(o[f].context,t,n);break;case 4:o[f].fn.call(o[f].context,t,n,i);break;default:if(!u)for(p=1,u=new Array(s-1);p<s;p++)u[p-1]=arguments[p];o[f].fn.apply(o[f].context,u)}}return!0};se.prototype.on=function(r,t,n){return Wi(this,r,t,n,!1)};se.prototype.once=function(r,t,n){return Wi(this,r,t,n,!0)};se.prototype.removeListener=function(r,t,n,i){var a=fe?fe+r:r;if(!this._events[a])return this;if(!t)return At(this,a),this;var c=this._events[a];if(c.fn)c.fn===t&&(!i||c.once)&&(!n||c.context===n)&&At(this,a);else{for(var l=0,o=[],s=c.length;l<s;l++)(c[l].fn!==t||i&&!c[l].once||n&&c[l].context!==n)&&o.push(c[l]);o.length?this._events[a]=o.length===1?o[0]:o:At(this,a)}return this};se.prototype.removeAllListeners=function(r){var t;return r?(t=fe?fe+r:r,this._events[t]&&At(this,t)):(this._events=new mt,this._eventsCount=0),this};se.prototype.off=se.prototype.removeListener;se.prototype.addListener=se.prototype.on;se.prefixed=fe;se.EventEmitter=se;St=se;var D={};Re(D,"LogLevel",()=>he,e=>he=e);Re(D,"default",()=>Rn,e=>Rn=e);var Fe=function(e,r){var t=typeof Symbol=="function"&&e[Symbol.iterator];if(!t)return e;var n=t.call(e),i,a=[],c;try{for(;(r===void 0||r-- >0)&&!(i=n.next()).done;)a.push(i.value)}catch(l){c={error:l}}finally{try{i&&!i.done&&(t=n.return)&&t.call(n)}finally{if(c)throw c.error}}return a},Ne=function(e,r,t){if(t||arguments.length===2)for(var n=0,i=r.length,a;n<i;n++)(a||!(n in r))&&(a||(a=Array.prototype.slice.call(r,0,n)),a[n]=r[n]);return e.concat(a||Array.prototype.slice.call(r))},Ro="PeerJS: ",he;(function(e){e[e.Disabled=0]="Disabled",e[e.Errors=1]="Errors",e[e.Warnings=2]="Warnings",e[e.All=3]="All"})(he||(he={}));var Eo=function(){function e(){this._logLevel=he.Disabled}return Object.defineProperty(e.prototype,"logLevel",{get:function(){return this._logLevel},set:function(r){this._logLevel=r},enumerable:!1,configurable:!0}),e.prototype.log=function(){for(var r=[],t=0;t<arguments.length;t++)r[t]=arguments[t];this._logLevel>=he.All&&this._print.apply(this,Ne([he.All],Fe(r),!1))},e.prototype.warn=function(){for(var r=[],t=0;t<arguments.length;t++)r[t]=arguments[t];this._logLevel>=he.Warnings&&this._print.apply(this,Ne([he.Warnings],Fe(r),!1))},e.prototype.error=function(){for(var r=[],t=0;t<arguments.length;t++)r[t]=arguments[t];this._logLevel>=he.Errors&&this._print.apply(this,Ne([he.Errors],Fe(r),!1))},e.prototype.setLogFunction=function(r){this._print=r},e.prototype._print=function(r){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];var i=Ne([Ro],Fe(t),!1);for(var a in i)i[a]instanceof Error&&(i[a]="("+i[a].name+") "+i[a].message);r>=he.All?console.log.apply(console,Ne([],Fe(i),!1)):r>=he.Warnings?console.warn.apply(console,Ne(["WARNING"],Fe(i),!1)):r>=he.Errors&&console.error.apply(console,Ne(["ERROR"],Fe(i),!1))},e}(),Rn=new Eo,Ki={};Re(Ki,"Socket",()=>En,e=>En=e);var ke;(function(e){e.Data="data",e.Media="media"})(ke||(ke={}));var K;(function(e){e.BrowserIncompatible="browser-incompatible",e.Disconnected="disconnected",e.InvalidID="invalid-id",e.InvalidKey="invalid-key",e.Network="network",e.PeerUnavailable="peer-unavailable",e.SslUnavailable="ssl-unavailable",e.ServerError="server-error",e.SocketError="socket-error",e.SocketClosed="socket-closed",e.UnavailableID="unavailable-id",e.WebRTC="webrtc"})(K||(K={}));var Oe;(function(e){e.Binary="binary",e.BinaryUTF8="binary-utf8",e.JSON="json"})(Oe||(Oe={}));var De;(function(e){e.Message="message",e.Disconnected="disconnected",e.Error="error",e.Close="close"})(De||(De={}));var ee;(function(e){e.Heartbeat="HEARTBEAT",e.Candidate="CANDIDATE",e.Offer="OFFER",e.Answer="ANSWER",e.Open="OPEN",e.Error="ERROR",e.IdTaken="ID-TAKEN",e.InvalidKey="INVALID-KEY",e.Leave="LEAVE",e.Expire="EXPIRE"})(ee||(ee={}));var Qr={};Qr=JSON.parse('{"name":"peerjs","version":"1.4.7","keywords":["peerjs","webrtc","p2p","rtc"],"description":"PeerJS client","homepage":"https://peerjs.com","bugs":{"url":"https://github.com/peers/peerjs/issues"},"repository":{"type":"git","url":"https://github.com/peers/peerjs"},"license":"MIT","contributors":["Michelle Bu <michelle@michellebu.com>","afrokick <devbyru@gmail.com>","ericz <really.ez@gmail.com>","Jairo <kidandcat@gmail.com>","Jonas Gloning <34194370+jonasgloning@users.noreply.github.com>","Jairo Caro-Accino Viciana <jairo@galax.be>","Carlos Caballero <carlos.caballero.gonzalez@gmail.com>","hc <hheennrryy@gmail.com>","Muhammad Asif <capripio@gmail.com>","PrashoonB <prashoonbhattacharjee@gmail.com>","Harsh Bardhan Mishra <47351025+HarshCasper@users.noreply.github.com>","akotynski <aleksanderkotbury@gmail.com>","lmb <i@lmb.io>","Jairooo <jairocaro@msn.com>","Moritz St\xFCckler <moritz.stueckler@gmail.com>","Simon <crydotsnakegithub@gmail.com>","Denis Lukov <denismassters@gmail.com>","Philipp Hancke <fippo@andyet.net>","Hans Oksendahl <hansoksendahl@gmail.com>","Jess <jessachandler@gmail.com>","khankuan <khankuan@gmail.com>","DUODVK <kurmanov.work@gmail.com>","XiZhao <kwang1imsa@gmail.com>","Matthias Lohr <matthias@lohr.me>","=frank tree <=frnktrb@googlemail.com>","Andre Eckardt <aeckardt@outlook.com>","Chris Cowan <agentme49@gmail.com>","Alex Chuev <alex@chuev.com>","alxnull <alxnull@e.mail.de>","Yemel Jardi <angel.jardi@gmail.com>","Ben Parnell <benjaminparnell.94@gmail.com>","Benny Lichtner <bennlich@gmail.com>","fresheneesz <bitetrudpublic@gmail.com>","bob.barstead@exaptive.com <bob.barstead@exaptive.com>","chandika <chandika@gmail.com>","emersion <contact@emersion.fr>","Christopher Van <cvan@users.noreply.github.com>","eddieherm <edhermoso@gmail.com>","Eduardo Pinho <enet4mikeenet@gmail.com>","Evandro Zanatta <ezanatta@tray.net.br>","Gardner Bickford <gardner@users.noreply.github.com>","Gian Luca <gianluca.cecchi@cynny.com>","PatrickJS <github@gdi2290.com>","jonnyf <github@jonathanfoss.co.uk>","Hizkia Felix <hizkifw@gmail.com>","Hristo Oskov <hristo.oskov@gmail.com>","Isaac Madwed <i.madwed@gmail.com>","Ilya Konanykhin <ilya.konanykhin@gmail.com>","jasonbarry <jasbarry@me.com>","Jonathan Burke <jonathan.burke.1311@googlemail.com>","Josh Hamit <josh.hamit@gmail.com>","Jordan Austin <jrax86@gmail.com>","Joel Wetzell <jwetzell@yahoo.com>","xizhao <kevin.wang@cloudera.com>","Alberto Torres <kungfoobar@gmail.com>","Jonathan Mayol <mayoljonathan@gmail.com>","Jefferson Felix <me@jsfelix.dev>","Rolf Erik Lekang <me@rolflekang.com>","Kevin Mai-Husan Chia <mhchia@users.noreply.github.com>","Pepijn de Vos <pepijndevos@gmail.com>","JooYoung <qkdlql@naver.com>","Tobias Speicher <rootcommander@gmail.com>","Steve Blaurock <sblaurock@gmail.com>","Kyrylo Shegeda <shegeda@ualberta.ca>","Diwank Singh Tomer <singh@diwank.name>","So\u0308ren Balko <Soeren.Balko@gmail.com>","Arpit Solanki <solankiarpit1997@gmail.com>","Yuki Ito <yuki@gnnk.net>","Artur Zayats <zag2art@gmail.com>"],"funding":{"type":"opencollective","url":"https://opencollective.com/peer"},"collective":{"type":"opencollective","url":"https://opencollective.com/peer"},"files":["dist/*"],"sideEffects":["lib/global.ts","lib/supports.ts"],"main":"dist/bundler.cjs","module":"dist/bundler.mjs","browser-minified":"dist/peerjs.min.js","browser-unminified":"dist/peerjs.js","types":"dist/types.d.ts","engines":{"node":">= 10"},"targets":{"types":{"source":"lib/exports.ts"},"main":{"source":"lib/exports.ts","sourceMap":{"inlineSources":true}},"module":{"source":"lib/exports.ts","includeNodeModules":["eventemitter3"],"sourceMap":{"inlineSources":true}},"browser-minified":{"context":"browser","outputFormat":"global","optimize":true,"engines":{"browsers":"cover 99%, not dead"},"source":"lib/global.ts"},"browser-unminified":{"context":"browser","outputFormat":"global","optimize":false,"engines":{"browsers":"cover 99%, not dead"},"source":"lib/global.ts"}},"scripts":{"contributors":"git-authors-cli --print=false && prettier --write package.json && git add package.json package-lock.json && git commit -m \\"chore(contributors): update and sort contributors list\\"","check":"tsc --noEmit","watch":"parcel watch","build":"rm -rf dist && parcel build","prepublishOnly":"npm run build","test":"mocha -r ts-node/register -r jsdom-global/register test/**/*.ts","format":"prettier --write .","semantic-release":"semantic-release"},"devDependencies":{"@parcel/config-default":"^2.5.0","@parcel/packager-ts":"^2.5.0","@parcel/transformer-typescript-tsc":"^2.5.0","@parcel/transformer-typescript-types":"^2.5.0","@semantic-release/changelog":"^6.0.1","@semantic-release/git":"^10.0.1","@types/chai":"^4.3.0","@types/mocha":"^9.1.0","@types/node":"^17.0.18","chai":"^4.3.6","git-authors-cli":"^1.0.40","jsdom":"^19.0.0","jsdom-global":"^3.0.2","mocha":"^9.2.0","mock-socket":"8.0.5","parcel":"^2.5.0","parcel-transformer-tsc-sourcemaps":"^1.0.2","prettier":"^2.6.2","semantic-release":"^19.0.2","standard":"^16.0.4","ts-node":"^10.5.0","typescript":"^4.5.5"},"dependencies":{"@swc/helpers":"^0.3.13","eventemitter3":"^4.0.7","peerjs-js-binarypack":"1.0.1","webrtc-adapter":"^7.7.1"}}');var Oo=function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),Do=function(e,r){var t=typeof Symbol=="function"&&e[Symbol.iterator];if(!t)return e;var n=t.call(e),i,a=[],c;try{for(;(r===void 0||r-- >0)&&!(i=n.next()).done;)a.push(i.value)}catch(l){c={error:l}}finally{try{i&&!i.done&&(t=n.return)&&t.call(n)}finally{if(c)throw c.error}}return a},Mo=function(e,r,t){if(t||arguments.length===2)for(var n=0,i=r.length,a;n<i;n++)(a||!(n in r))&&(a||(a=Array.prototype.slice.call(r,0,n)),a[n]=r[n]);return e.concat(a||Array.prototype.slice.call(r))},Io=function(e){var r=typeof Symbol=="function"&&Symbol.iterator,t=r&&e[r],n=0;if(t)return t.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(r?"Object is not iterable.":"Symbol.iterator is not defined.")},En=function(e){Oo(r,e);function r(t,n,i,a,c,l){l===void 0&&(l=5e3);var o=e.call(this)||this;o.pingInterval=l,o._disconnected=!0,o._messagesQueue=[];var s=t?"wss://":"ws://";return o._baseUrl=s+n+":"+i+a+"peerjs?key="+c,o}return r.prototype.start=function(t,n){var i=this;this._id=t;var a="".concat(this._baseUrl,"&id=").concat(t,"&token=").concat(n);!!this._socket||!this._disconnected||(this._socket=new WebSocket(a+"&version="+Qr.version),this._disconnected=!1,this._socket.onmessage=function(c){var l;try{l=JSON.parse(c.data),D.default.log("Server message received:",l)}catch{D.default.log("Invalid server message",c.data);return}i.emit(De.Message,l)},this._socket.onclose=function(c){i._disconnected||(D.default.log("Socket closed.",c),i._cleanup(),i._disconnected=!0,i.emit(De.Disconnected))},this._socket.onopen=function(){i._disconnected||(i._sendQueuedMessages(),D.default.log("Socket open"),i._scheduleHeartbeat())})},r.prototype._scheduleHeartbeat=function(){var t=this;this._wsPingTimer=setTimeout(function(){t._sendHeartbeat()},this.pingInterval)},r.prototype._sendHeartbeat=function(){if(!this._wsOpen()){D.default.log("Cannot send heartbeat, because socket closed");return}var t=JSON.stringify({type:ee.Heartbeat});this._socket.send(t),this._scheduleHeartbeat()},r.prototype._wsOpen=function(){return!!this._socket&&this._socket.readyState===1},r.prototype._sendQueuedMessages=function(){var t,n,i=Mo([],Do(this._messagesQueue),!1);this._messagesQueue=[];try{for(var a=Io(i),c=a.next();!c.done;c=a.next()){var l=c.value;this.send(l)}}catch(o){t={error:o}}finally{try{c&&!c.done&&(n=a.return)&&n.call(a)}finally{if(t)throw t.error}}},r.prototype.send=function(t){if(!this._disconnected){if(!this._id){this._messagesQueue.push(t);return}if(!t.type){this.emit(De.Error,"Invalid message");return}if(!!this._wsOpen()){var n=JSON.stringify(t);this._socket.send(n)}}},r.prototype.close=function(){this._disconnected||(this._cleanup(),this._disconnected=!0)},r.prototype._cleanup=function(){this._socket&&(this._socket.onopen=this._socket.onmessage=this._socket.onclose=null,this._socket.close(),this._socket=void 0),clearTimeout(this._wsPingTimer)},r}(St.EventEmitter),Dr={};Re(Dr,"MediaConnection",()=>Mn,e=>Mn=e);var Jr={};Re(Jr,"Negotiator",()=>On,e=>On=e);var Ht=function(){return Ht=Object.assign||function(e){for(var r,t=1,n=arguments.length;t<n;t++){r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e},Ht.apply(this,arguments)},xt=function(e,r,t,n){function i(a){return a instanceof t?a:new t(function(c){c(a)})}return new(t||(t=Promise))(function(a,c){function l(u){try{s(n.next(u))}catch(f){c(f)}}function o(u){try{s(n.throw(u))}catch(f){c(f)}}function s(u){u.done?a(u.value):i(u.value).then(l,o)}s((n=n.apply(e,r||[])).next())})},Pt=function(e,r){var t={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},n,i,a,c;return c={next:l(0),throw:l(1),return:l(2)},typeof Symbol=="function"&&(c[Symbol.iterator]=function(){return this}),c;function l(s){return function(u){return o([s,u])}}function o(s){if(n)throw new TypeError("Generator is already executing.");for(;t;)try{if(n=1,i&&(a=s[0]&2?i.return:s[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,s[1])).done)return a;switch(i=0,a&&(s=[s[0]&2,a.value]),s[0]){case 0:case 1:a=s;break;case 4:return t.label++,{value:s[1],done:!1};case 5:t.label++,i=s[1],s=[0];continue;case 7:s=t.ops.pop(),t.trys.pop();continue;default:if(a=t.trys,!(a=a.length>0&&a[a.length-1])&&(s[0]===6||s[0]===2)){t=0;continue}if(s[0]===3&&(!a||s[1]>a[0]&&s[1]<a[3])){t.label=s[1];break}if(s[0]===6&&t.label<a[1]){t.label=a[1],a=s;break}if(a&&t.label<a[2]){t.label=a[2],t.ops.push(s);break}a[2]&&t.ops.pop(),t.trys.pop();continue}s=r.call(e,t)}catch(u){s=[6,u],i=0}finally{n=a=0}if(s[0]&5)throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}},On=function(){function e(r){this.connection=r}return e.prototype.startConnection=function(r){var t=this._startPeerConnection();if(this.connection.peerConnection=t,this.connection.type===ke.Media&&r._stream&&this._addTracksToConnection(r._stream,t),r.originator){if(this.connection.type===ke.Data){var n=this.connection,i={ordered:!!r.reliable},a=t.createDataChannel(n.label,i);n.initialize(a)}this._makeOffer()}else this.handleSDP("OFFER",r.sdp)},e.prototype._startPeerConnection=function(){D.default.log("Creating RTCPeerConnection.");var r=new RTCPeerConnection(this.connection.provider.options.config);return this._setupListeners(r),r},e.prototype._setupListeners=function(r){var t=this,n=this.connection.peer,i=this.connection.connectionId,a=this.connection.type,c=this.connection.provider;D.default.log("Listening for ICE candidates."),r.onicecandidate=function(l){!l.candidate||!l.candidate.candidate||(D.default.log("Received ICE candidates for ".concat(n,":"),l.candidate),c.socket.send({type:ee.Candidate,payload:{candidate:l.candidate,type:a,connectionId:i},dst:n}))},r.oniceconnectionstatechange=function(){switch(r.iceConnectionState){case"failed":D.default.log("iceConnectionState is failed, closing connections to "+n),t.connection.emit("error",new Error("Negotiation of connection to "+n+" failed.")),t.connection.close();break;case"closed":D.default.log("iceConnectionState is closed, closing connections to "+n),t.connection.emit("error",new Error("Connection to "+n+" closed.")),t.connection.close();break;case"disconnected":D.default.log("iceConnectionState changed to disconnected on the connection with "+n);break;case"completed":r.onicecandidate=q.noop;break}t.connection.emit("iceStateChanged",r.iceConnectionState)},D.default.log("Listening for data channel"),r.ondatachannel=function(l){D.default.log("Received data channel");var o=l.channel,s=c.getConnection(n,i);s.initialize(o)},D.default.log("Listening for remote stream"),r.ontrack=function(l){D.default.log("Received remote stream");var o=l.streams[0],s=c.getConnection(n,i);if(s.type===ke.Media){var u=s;t._addStreamToMediaConnection(o,u)}}},e.prototype.cleanup=function(){D.default.log("Cleaning up PeerConnection to "+this.connection.peer);var r=this.connection.peerConnection;if(!!r){this.connection.peerConnection=null,r.onicecandidate=r.oniceconnectionstatechange=r.ondatachannel=r.ontrack=function(){};var t=r.signalingState!=="closed",n=!1;if(this.connection.type===ke.Data){var i=this.connection,a=i.dataChannel;a&&(n=!!a.readyState&&a.readyState!=="closed")}(t||n)&&r.close()}},e.prototype._makeOffer=function(){return xt(this,void 0,Promise,function(){var r,t,n,i,a,c,l;return Pt(this,function(o){switch(o.label){case 0:r=this.connection.peerConnection,t=this.connection.provider,o.label=1;case 1:return o.trys.push([1,7,,8]),[4,r.createOffer(this.connection.options.constraints)];case 2:n=o.sent(),D.default.log("Created offer."),this.connection.options.sdpTransform&&typeof this.connection.options.sdpTransform=="function"&&(n.sdp=this.connection.options.sdpTransform(n.sdp)||n.sdp),o.label=3;case 3:return o.trys.push([3,5,,6]),[4,r.setLocalDescription(n)];case 4:return o.sent(),D.default.log("Set localDescription:",n,"for:".concat(this.connection.peer)),i={sdp:n,type:this.connection.type,connectionId:this.connection.connectionId,metadata:this.connection.metadata,browser:q.browser},this.connection.type===ke.Data&&(a=this.connection,i=Ht(Ht({},i),{label:a.label,reliable:a.reliable,serialization:a.serialization})),t.socket.send({type:ee.Offer,payload:i,dst:this.connection.peer}),[3,6];case 5:return c=o.sent(),c!="OperationError: Failed to set local offer sdp: Called in wrong state: kHaveRemoteOffer"&&(t.emitError(K.WebRTC,c),D.default.log("Failed to setLocalDescription, ",c)),[3,6];case 6:return[3,8];case 7:return l=o.sent(),t.emitError(K.WebRTC,l),D.default.log("Failed to createOffer, ",l),[3,8];case 8:return[2]}})})},e.prototype._makeAnswer=function(){return xt(this,void 0,Promise,function(){var r,t,n,i,a;return Pt(this,function(c){switch(c.label){case 0:r=this.connection.peerConnection,t=this.connection.provider,c.label=1;case 1:return c.trys.push([1,7,,8]),[4,r.createAnswer()];case 2:n=c.sent(),D.default.log("Created answer."),this.connection.options.sdpTransform&&typeof this.connection.options.sdpTransform=="function"&&(n.sdp=this.connection.options.sdpTransform(n.sdp)||n.sdp),c.label=3;case 3:return c.trys.push([3,5,,6]),[4,r.setLocalDescription(n)];case 4:return c.sent(),D.default.log("Set localDescription:",n,"for:".concat(this.connection.peer)),t.socket.send({type:ee.Answer,payload:{sdp:n,type:this.connection.type,connectionId:this.connection.connectionId,browser:q.browser},dst:this.connection.peer}),[3,6];case 5:return i=c.sent(),t.emitError(K.WebRTC,i),D.default.log("Failed to setLocalDescription, ",i),[3,6];case 6:return[3,8];case 7:return a=c.sent(),t.emitError(K.WebRTC,a),D.default.log("Failed to create answer, ",a),[3,8];case 8:return[2]}})})},e.prototype.handleSDP=function(r,t){return xt(this,void 0,Promise,function(){var n,i,a,c;return Pt(this,function(l){switch(l.label){case 0:t=new RTCSessionDescription(t),n=this.connection.peerConnection,i=this.connection.provider,D.default.log("Setting remote description",t),a=this,l.label=1;case 1:return l.trys.push([1,5,,6]),[4,n.setRemoteDescription(t)];case 2:return l.sent(),D.default.log("Set remoteDescription:".concat(r," for:").concat(this.connection.peer)),r!=="OFFER"?[3,4]:[4,a._makeAnswer()];case 3:l.sent(),l.label=4;case 4:return[3,6];case 5:return c=l.sent(),i.emitError(K.WebRTC,c),D.default.log("Failed to setRemoteDescription, ",c),[3,6];case 6:return[2]}})})},e.prototype.handleCandidate=function(r){return xt(this,void 0,Promise,function(){var t,n,i,a,c,l;return Pt(this,function(o){switch(o.label){case 0:D.default.log("handleCandidate:",r),t=r.candidate,n=r.sdpMLineIndex,i=r.sdpMid,a=this.connection.peerConnection,c=this.connection.provider,o.label=1;case 1:return o.trys.push([1,3,,4]),[4,a.addIceCandidate(new RTCIceCandidate({sdpMid:i,sdpMLineIndex:n,candidate:t}))];case 2:return o.sent(),D.default.log("Added ICE candidate for:".concat(this.connection.peer)),[3,4];case 3:return l=o.sent(),c.emitError(K.WebRTC,l),D.default.log("Failed to handleCandidate, ",l),[3,4];case 4:return[2]}})})},e.prototype._addTracksToConnection=function(r,t){if(D.default.log("add tracks from stream ".concat(r.id," to peer connection")),!t.addTrack)return D.default.error("Your browser does't support RTCPeerConnection#addTrack. Ignored.");r.getTracks().forEach(function(n){t.addTrack(n,r)})},e.prototype._addStreamToMediaConnection=function(r,t){D.default.log("add stream ".concat(r.id," to media connection ").concat(t.connectionId)),t.addStream(r)},e}(),Yr={};Re(Yr,"BaseConnection",()=>Dn,e=>Dn=e);var Ao=function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),Dn=function(e){Ao(r,e);function r(t,n,i){var a=e.call(this)||this;return a.peer=t,a.provider=n,a.options=i,a._open=!1,a.metadata=i.metadata,a}return Object.defineProperty(r.prototype,"open",{get:function(){return this._open},enumerable:!1,configurable:!0}),r}(St.EventEmitter),wo=function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),Ut=function(){return Ut=Object.assign||function(e){for(var r,t=1,n=arguments.length;t<n;t++){r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e},Ut.apply(this,arguments)},Bo=function(e){var r=typeof Symbol=="function"&&Symbol.iterator,t=r&&e[r],n=0;if(t)return t.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(r?"Object is not iterable.":"Symbol.iterator is not defined.")},Mn=function(e){wo(r,e);function r(t,n,i){var a=e.call(this,t,n,i)||this;return a._localStream=a.options._stream,a.connectionId=a.options.connectionId||r.ID_PREFIX+q.randomToken(),a._negotiator=new Jr.Negotiator(a),a._localStream&&a._negotiator.startConnection({_stream:a._localStream,originator:!0}),a}return Object.defineProperty(r.prototype,"type",{get:function(){return ke.Media},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"localStream",{get:function(){return this._localStream},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"remoteStream",{get:function(){return this._remoteStream},enumerable:!1,configurable:!0}),r.prototype.addStream=function(t){D.default.log("Receiving stream",t),this._remoteStream=t,e.prototype.emit.call(this,"stream",t)},r.prototype.handleMessage=function(t){var n=t.type,i=t.payload;switch(t.type){case ee.Answer:this._negotiator.handleSDP(n,i.sdp),this._open=!0;break;case ee.Candidate:this._negotiator.handleCandidate(i.candidate);break;default:D.default.warn("Unrecognized message type:".concat(n," from peer:").concat(this.peer));break}},r.prototype.answer=function(t,n){var i,a;if(n===void 0&&(n={}),this._localStream){D.default.warn("Local stream already exists on this MediaConnection. Are you answering a call twice?");return}this._localStream=t,n&&n.sdpTransform&&(this.options.sdpTransform=n.sdpTransform),this._negotiator.startConnection(Ut(Ut({},this.options._payload),{_stream:t}));var c=this.provider._getMessages(this.connectionId);try{for(var l=Bo(c),o=l.next();!o.done;o=l.next()){var s=o.value;this.handleMessage(s)}}catch(u){i={error:u}}finally{try{o&&!o.done&&(a=l.return)&&a.call(l)}finally{if(i)throw i.error}}this._open=!0},r.prototype.close=function(){this._negotiator&&(this._negotiator.cleanup(),this._negotiator=null),this._localStream=null,this._remoteStream=null,this.provider&&(this.provider._removeConnection(this),this.provider=null),this.options&&this.options._stream&&(this.options._stream=null),this.open&&(this._open=!1,e.prototype.emit.call(this,"close"))},r.ID_PREFIX="mc_",r}(Yr.BaseConnection),Mr={};Re(Mr,"DataConnection",()=>An,e=>An=e);var Qi={};Re(Qi,"EncodingQueue",()=>In,e=>In=e);var Lo=function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),In=function(e){Lo(r,e);function r(){var t=e.call(this)||this;return t.fileReader=new FileReader,t._queue=[],t._processing=!1,t.fileReader.onload=function(n){t._processing=!1,n.target&&t.emit("done",n.target.result),t.doNextTask()},t.fileReader.onerror=function(n){D.default.error("EncodingQueue error:",n),t._processing=!1,t.destroy(),t.emit("error",n)},t}return Object.defineProperty(r.prototype,"queue",{get:function(){return this._queue},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"size",{get:function(){return this.queue.length},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"processing",{get:function(){return this._processing},enumerable:!1,configurable:!0}),r.prototype.enque=function(t){this.queue.push(t),!this.processing&&this.doNextTask()},r.prototype.destroy=function(){this.fileReader.abort(),this._queue=[]},r.prototype.doNextTask=function(){this.size!==0&&(this.processing||(this._processing=!0,this.fileReader.readAsArrayBuffer(this.queue.shift())))},r}(St.EventEmitter),jo=function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),zo=function(e){var r=typeof Symbol=="function"&&Symbol.iterator,t=r&&e[r],n=0;if(t)return t.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(r?"Object is not iterable.":"Symbol.iterator is not defined.")},An=function(e){jo(r,e);function r(t,n,i){var a=e.call(this,t,n,i)||this;return a.stringify=JSON.stringify,a.parse=JSON.parse,a._buffer=[],a._bufferSize=0,a._buffering=!1,a._chunkedData={},a._encodingQueue=new Qi.EncodingQueue,a.connectionId=a.options.connectionId||r.ID_PREFIX+q.randomToken(),a.label=a.options.label||a.connectionId,a.serialization=a.options.serialization||Oe.Binary,a.reliable=!!a.options.reliable,a._encodingQueue.on("done",function(c){a._bufferedSend(c)}),a._encodingQueue.on("error",function(){D.default.error("DC#".concat(a.connectionId,": Error occured in encoding from blob to arraybuffer, close DC")),a.close()}),a._negotiator=new Jr.Negotiator(a),a._negotiator.startConnection(a.options._payload||{originator:!0}),a}return Object.defineProperty(r.prototype,"type",{get:function(){return ke.Data},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"dataChannel",{get:function(){return this._dc},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"bufferSize",{get:function(){return this._bufferSize},enumerable:!1,configurable:!0}),r.prototype.initialize=function(t){this._dc=t,this._configureDataChannel()},r.prototype._configureDataChannel=function(){var t=this;(!q.supports.binaryBlob||q.supports.reliable)&&(this.dataChannel.binaryType="arraybuffer"),this.dataChannel.onopen=function(){D.default.log("DC#".concat(t.connectionId," dc connection success")),t._open=!0,t.emit("open")},this.dataChannel.onmessage=function(n){D.default.log("DC#".concat(t.connectionId," dc onmessage:"),n.data),t._handleDataMessage(n)},this.dataChannel.onclose=function(){D.default.log("DC#".concat(t.connectionId," dc closed for:"),t.peer),t.close()}},r.prototype._handleDataMessage=function(t){var n=this,i=t.data,a=i.constructor,c=this.serialization===Oe.Binary||this.serialization===Oe.BinaryUTF8,l=i;if(c){if(a===Blob){q.blobToArrayBuffer(i,function(s){var u=q.unpack(s);n.emit("data",u)});return}else if(a===ArrayBuffer)l=q.unpack(i);else if(a===String){var o=q.binaryStringToArrayBuffer(i);l=q.unpack(o)}}else this.serialization===Oe.JSON&&(l=this.parse(i));if(l.__peerData){this._handleChunk(l);return}e.prototype.emit.call(this,"data",l)},r.prototype._handleChunk=function(t){var n=t.__peerData,i=this._chunkedData[n]||{data:[],count:0,total:t.total};if(i.data[t.n]=t.data,i.count++,this._chunkedData[n]=i,i.total===i.count){delete this._chunkedData[n];var a=new Blob(i.data);this._handleDataMessage({data:a})}},r.prototype.close=function(){this._buffer=[],this._bufferSize=0,this._chunkedData={},this._negotiator&&(this._negotiator.cleanup(),this._negotiator=null),this.provider&&(this.provider._removeConnection(this),this.provider=null),this.dataChannel&&(this.dataChannel.onopen=null,this.dataChannel.onmessage=null,this.dataChannel.onclose=null,this._dc=null),this._encodingQueue&&(this._encodingQueue.destroy(),this._encodingQueue.removeAllListeners(),this._encodingQueue=null),this.open&&(this._open=!1,e.prototype.emit.call(this,"close"))},r.prototype.send=function(t,n){if(!this.open){e.prototype.emit.call(this,"error",new Error("Connection is not open. You should listen for the `open` event before sending messages."));return}if(this.serialization===Oe.JSON)this._bufferedSend(this.stringify(t));else if(this.serialization===Oe.Binary||this.serialization===Oe.BinaryUTF8){var i=q.pack(t);if(!n&&i.size>q.chunkedMTU){this._sendChunks(i);return}q.supports.binaryBlob?this._bufferedSend(i):this._encodingQueue.enque(i)}else this._bufferedSend(t)},r.prototype._bufferedSend=function(t){(this._buffering||!this._trySend(t))&&(this._buffer.push(t),this._bufferSize=this._buffer.length)},r.prototype._trySend=function(t){var n=this;if(!this.open)return!1;if(this.dataChannel.bufferedAmount>r.MAX_BUFFERED_AMOUNT)return this._buffering=!0,setTimeout(function(){n._buffering=!1,n._tryBuffer()},50),!1;try{this.dataChannel.send(t)}catch(i){return D.default.error("DC#:".concat(this.connectionId," Error when sending:"),i),this._buffering=!0,this.close(),!1}return!0},r.prototype._tryBuffer=function(){if(!!this.open&&this._buffer.length!==0){var t=this._buffer[0];this._trySend(t)&&(this._buffer.shift(),this._bufferSize=this._buffer.length,this._tryBuffer())}},r.prototype._sendChunks=function(t){var n,i,a=q.chunk(t);D.default.log("DC#".concat(this.connectionId," Try to send ").concat(a.length," chunks..."));try{for(var c=zo(a),l=c.next();!l.done;l=c.next()){var o=l.value;this.send(o,!0)}}catch(s){n={error:s}}finally{try{l&&!l.done&&(i=c.return)&&i.call(c)}finally{if(n)throw n.error}}},r.prototype.handleMessage=function(t){var n=t.payload;switch(t.type){case ee.Answer:this._negotiator.handleSDP(t.type,n.sdp);break;case ee.Candidate:this._negotiator.handleCandidate(n.candidate);break;default:D.default.warn("Unrecognized message type:",t.type,"from peer:",this.peer);break}},r.ID_PREFIX="dc_",r.MAX_BUFFERED_AMOUNT=8388608,r}(Yr.BaseConnection),Ji={};Re(Ji,"API",()=>Ln,e=>Ln=e);var wn=function(e,r,t,n){function i(a){return a instanceof t?a:new t(function(c){c(a)})}return new(t||(t=Promise))(function(a,c){function l(u){try{s(n.next(u))}catch(f){c(f)}}function o(u){try{s(n.throw(u))}catch(f){c(f)}}function s(u){u.done?a(u.value):i(u.value).then(l,o)}s((n=n.apply(e,r||[])).next())})},Bn=function(e,r){var t={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},n,i,a,c;return c={next:l(0),throw:l(1),return:l(2)},typeof Symbol=="function"&&(c[Symbol.iterator]=function(){return this}),c;function l(s){return function(u){return o([s,u])}}function o(s){if(n)throw new TypeError("Generator is already executing.");for(;t;)try{if(n=1,i&&(a=s[0]&2?i.return:s[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,s[1])).done)return a;switch(i=0,a&&(s=[s[0]&2,a.value]),s[0]){case 0:case 1:a=s;break;case 4:return t.label++,{value:s[1],done:!1};case 5:t.label++,i=s[1],s=[0];continue;case 7:s=t.ops.pop(),t.trys.pop();continue;default:if(a=t.trys,!(a=a.length>0&&a[a.length-1])&&(s[0]===6||s[0]===2)){t=0;continue}if(s[0]===3&&(!a||s[1]>a[0]&&s[1]<a[3])){t.label=s[1];break}if(s[0]===6&&t.label<a[1]){t.label=a[1],a=s;break}if(a&&t.label<a[2]){t.label=a[2],t.ops.push(s);break}a[2]&&t.ops.pop(),t.trys.pop();continue}s=r.call(e,t)}catch(u){s=[6,u],i=0}finally{n=a=0}if(s[0]&5)throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}},Ln=function(){function e(r){this._options=r}return e.prototype._buildRequest=function(r){var t=this._options.secure?"https":"http",n=this._options,i=n.host,a=n.port,c=n.path,l=n.key,o=new URL("".concat(t,"://").concat(i,":").concat(a).concat(c).concat(l,"/").concat(r));return o.searchParams.set("ts","".concat(Date.now()).concat(Math.random())),o.searchParams.set("version",Qr.version),fetch(o.href,{referrerPolicy:this._options.referrerPolicy})},e.prototype.retrieveId=function(){return wn(this,void 0,Promise,function(){var r,t,n;return Bn(this,function(i){switch(i.label){case 0:return i.trys.push([0,2,,3]),[4,this._buildRequest("id")];case 1:if(r=i.sent(),r.status!==200)throw new Error("Error. Status:".concat(r.status));return[2,r.text()];case 2:throw t=i.sent(),D.default.error("Error retrieving ID",t),n="",this._options.path==="/"&&this._options.host!==q.CLOUD_HOST&&(n=" If you passed in a `path` to your self-hosted PeerServer, you'll also need to pass in that same path when creating a new Peer."),new Error("Could not get an ID from the server."+n);case 3:return[2]}})})},e.prototype.listAllPeers=function(){return wn(this,void 0,Promise,function(){var r,t,n;return Bn(this,function(i){switch(i.label){case 0:return i.trys.push([0,2,,3]),[4,this._buildRequest("peers")];case 1:if(r=i.sent(),r.status!==200)throw r.status===401?(t="",this._options.host===q.CLOUD_HOST?t="It looks like you're using the cloud server. You can email team@peerjs.com to enable peer listing for your API key.":t="You need to enable `allow_discovery` on your self-hosted PeerServer to use this feature.",new Error("It doesn't look like you have permission to list peers IDs. "+t)):new Error("Error. Status:".concat(r.status));return[2,r.json()];case 2:throw n=i.sent(),D.default.error("Error retrieving list peers",n),new Error("Could not get list peers from the server."+n);case 3:return[2]}})})},e}(),$o=function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),ht=function(){return ht=Object.assign||function(e){for(var r,t=1,n=arguments.length;t<n;t++){r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e},ht.apply(this,arguments)},at=function(e){var r=typeof Symbol=="function"&&Symbol.iterator,t=r&&e[r],n=0;if(t)return t.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(r?"Object is not iterable.":"Symbol.iterator is not defined.")},qo=function(e,r){var t=typeof Symbol=="function"&&e[Symbol.iterator];if(!t)return e;var n=t.call(e),i,a=[],c;try{for(;(r===void 0||r-- >0)&&!(i=n.next()).done;)a.push(i.value)}catch(l){c={error:l}}finally{try{i&&!i.done&&(t=n.return)&&t.call(n)}finally{if(c)throw c.error}}return a},jn=function(e){$o(r,e);function r(t,n){var i=e.call(this)||this;i._id=null,i._lastServerId=null,i._destroyed=!1,i._disconnected=!1,i._open=!1,i._connections=new Map,i._lostMessages=new Map;var a;return t&&t.constructor==Object?n=t:t&&(a=t.toString()),n=ht({debug:0,host:q.CLOUD_HOST,port:q.CLOUD_PORT,path:"/",key:r.DEFAULT_KEY,token:q.randomToken(),config:q.defaultConfig,referrerPolicy:"strict-origin-when-cross-origin"},n),i._options=n,i._options.host==="/"&&(i._options.host=window.location.hostname),i._options.path&&(i._options.path[0]!=="/"&&(i._options.path="/"+i._options.path),i._options.path[i._options.path.length-1]!=="/"&&(i._options.path+="/")),i._options.secure===void 0&&i._options.host!==q.CLOUD_HOST?i._options.secure=q.isSecure():i._options.host==q.CLOUD_HOST&&(i._options.secure=!0),i._options.logFunction&&D.default.setLogFunction(i._options.logFunction),D.default.logLevel=i._options.debug||0,i._api=new Ji.API(n),i._socket=i._createServerConnection(),!q.supports.audioVideo&&!q.supports.data?(i._delayedAbort(K.BrowserIncompatible,"The current browser does not support WebRTC"),i):!!a&&!q.validateId(a)?(i._delayedAbort(K.InvalidID,'ID "'.concat(a,'" is invalid')),i):(a?i._initialize(a):i._api.retrieveId().then(function(c){return i._initialize(c)}).catch(function(c){return i._abort(K.ServerError,c)}),i)}return Object.defineProperty(r.prototype,"id",{get:function(){return this._id},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"options",{get:function(){return this._options},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"open",{get:function(){return this._open},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"socket",{get:function(){return this._socket},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"connections",{get:function(){var t,n,i=Object.create(null);try{for(var a=at(this._connections),c=a.next();!c.done;c=a.next()){var l=qo(c.value,2),o=l[0],s=l[1];i[o]=s}}catch(u){t={error:u}}finally{try{c&&!c.done&&(n=a.return)&&n.call(a)}finally{if(t)throw t.error}}return i},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"destroyed",{get:function(){return this._destroyed},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"disconnected",{get:function(){return this._disconnected},enumerable:!1,configurable:!0}),r.prototype._createServerConnection=function(){var t=this,n=new Ki.Socket(this._options.secure,this._options.host,this._options.port,this._options.path,this._options.key,this._options.pingInterval);return n.on(De.Message,function(i){t._handleMessage(i)}),n.on(De.Error,function(i){t._abort(K.SocketError,i)}),n.on(De.Disconnected,function(){t.disconnected||(t.emitError(K.Network,"Lost connection to server."),t.disconnect())}),n.on(De.Close,function(){t.disconnected||t._abort(K.SocketClosed,"Underlying socket is already closed.")}),n},r.prototype._initialize=function(t){this._id=t,this.socket.start(t,this._options.token)},r.prototype._handleMessage=function(t){var n,i,a=t.type,c=t.payload,l=t.src;switch(a){case ee.Open:this._lastServerId=this.id,this._open=!0,this.emit("open",this.id);break;case ee.Error:this._abort(K.ServerError,c.msg);break;case ee.IdTaken:this._abort(K.UnavailableID,'ID "'.concat(this.id,'" is taken'));break;case ee.InvalidKey:this._abort(K.InvalidKey,'API KEY "'.concat(this._options.key,'" is invalid'));break;case ee.Leave:D.default.log("Received leave message from ".concat(l)),this._cleanupPeer(l),this._connections.delete(l);break;case ee.Expire:this.emitError(K.PeerUnavailable,"Could not connect to peer ".concat(l));break;case ee.Offer:var h=c.connectionId,v=this.getConnection(l,h);if(v&&(v.close(),D.default.warn("Offer received for existing Connection ID:".concat(h))),c.type===ke.Media){var o=new Dr.MediaConnection(l,this,{connectionId:h,_payload:c,metadata:c.metadata});v=o,this._addConnection(l,v),this.emit("call",o)}else if(c.type===ke.Data){var s=new Mr.DataConnection(l,this,{connectionId:h,_payload:c,metadata:c.metadata,label:c.label,serialization:c.serialization,reliable:c.reliable});v=s,this._addConnection(l,v),this.emit("connection",s)}else{D.default.warn("Received malformed connection type:".concat(c.type));return}var u=this._getMessages(h);try{for(var f=at(u),d=f.next();!d.done;d=f.next()){var p=d.value;v.handleMessage(p)}}catch(C){n={error:C}}finally{try{d&&!d.done&&(i=f.return)&&i.call(f)}finally{if(n)throw n.error}}break;default:if(!c){D.default.warn("You received a malformed message from ".concat(l," of type ").concat(a));return}var h=c.connectionId,v=this.getConnection(l,h);v&&v.peerConnection?v.handleMessage(t):h?this._storeMessage(h,t):D.default.warn("You received an unrecognized message:",t);break}},r.prototype._storeMessage=function(t,n){this._lostMessages.has(t)||this._lostMessages.set(t,[]),this._lostMessages.get(t).push(n)},r.prototype._getMessages=function(t){var n=this._lostMessages.get(t);return n?(this._lostMessages.delete(t),n):[]},r.prototype.connect=function(t,n){if(n===void 0&&(n={}),this.disconnected){D.default.warn("You cannot connect to a new Peer because you called .disconnect() on this Peer and ended your connection with the server. You can create a new Peer to reconnect, or call reconnect on this peer if you believe its ID to still be available."),this.emitError(K.Disconnected,"Cannot connect to new Peer after disconnecting from server.");return}var i=new Mr.DataConnection(t,this,n);return this._addConnection(t,i),i},r.prototype.call=function(t,n,i){if(i===void 0&&(i={}),this.disconnected){D.default.warn("You cannot connect to a new Peer because you called .disconnect() on this Peer and ended your connection with the server. You can create a new Peer to reconnect."),this.emitError(K.Disconnected,"Cannot connect to new Peer after disconnecting from server.");return}if(!n){D.default.error("To call a peer, you must provide a stream from your browser's `getUserMedia`.");return}var a=new Dr.MediaConnection(t,this,ht(ht({},i),{_stream:n}));return this._addConnection(t,a),a},r.prototype._addConnection=function(t,n){D.default.log("add connection ".concat(n.type,":").concat(n.connectionId," to peerId:").concat(t)),this._connections.has(t)||this._connections.set(t,[]),this._connections.get(t).push(n)},r.prototype._removeConnection=function(t){var n=this._connections.get(t.peer);if(n){var i=n.indexOf(t);i!==-1&&n.splice(i,1)}this._lostMessages.delete(t.connectionId)},r.prototype.getConnection=function(t,n){var i,a,c=this._connections.get(t);if(!c)return null;try{for(var l=at(c),o=l.next();!o.done;o=l.next()){var s=o.value;if(s.connectionId===n)return s}}catch(u){i={error:u}}finally{try{o&&!o.done&&(a=l.return)&&a.call(l)}finally{if(i)throw i.error}}return null},r.prototype._delayedAbort=function(t,n){var i=this;setTimeout(function(){i._abort(t,n)},0)},r.prototype._abort=function(t,n){D.default.error("Aborting!"),this.emitError(t,n),this._lastServerId?this.disconnect():this.destroy()},r.prototype.emitError=function(t,n){D.default.error("Error:",n);var i;typeof n=="string"?i=new Error(n):i=n,i.type=t,this.emit("error",i)},r.prototype.destroy=function(){this.destroyed||(D.default.log("Destroy peer with ID:".concat(this.id)),this.disconnect(),this._cleanup(),this._destroyed=!0,this.emit("close"))},r.prototype._cleanup=function(){var t,n;try{for(var i=at(this._connections.keys()),a=i.next();!a.done;a=i.next()){var c=a.value;this._cleanupPeer(c),this._connections.delete(c)}}catch(l){t={error:l}}finally{try{a&&!a.done&&(n=i.return)&&n.call(i)}finally{if(t)throw t.error}}this.socket.removeAllListeners()},r.prototype._cleanupPeer=function(t){var n,i,a=this._connections.get(t);if(!!a)try{for(var c=at(a),l=c.next();!l.done;l=c.next()){var o=l.value;o.close()}}catch(s){n={error:s}}finally{try{l&&!l.done&&(i=c.return)&&i.call(c)}finally{if(n)throw n.error}}},r.prototype.disconnect=function(){if(!this.disconnected){var t=this.id;D.default.log("Disconnect peer with ID:".concat(t)),this._disconnected=!0,this._open=!1,this.socket.close(),this._lastServerId=t,this._id=null,this.emit("disconnected",t)}},r.prototype.reconnect=function(){if(this.disconnected&&!this.destroyed)D.default.log("Attempting reconnection to server with ID ".concat(this._lastServerId)),this._disconnected=!1,this._initialize(this._lastServerId);else{if(this.destroyed)throw new Error("This peer cannot reconnect to the server. It has already been destroyed.");if(!this.disconnected&&!this.open)D.default.error("In a hurry? We're still trying to make the initial connection!");else throw new Error("Peer ".concat(this.id," cannot reconnect because it is not disconnected from the server!"))}},r.prototype.listAllPeers=function(t){var n=this;t===void 0&&(t=function(i){}),this._api.listAllPeers().then(function(i){return t(i)}).catch(function(i){return n._abort(K.ServerError,i)})},r.DEFAULT_KEY="peerjs",r}(St.EventEmitter),Fo=Vi.Peer;const No=[O("circle",{cx:"15",cy:"15",r:"15"},[O("animate",{attributeName:"r",from:"15",to:"15",begin:"0s",dur:"0.8s",values:"15;9;15",calcMode:"linear",repeatCount:"indefinite"}),O("animate",{attributeName:"fill-opacity",from:"1",to:"1",begin:"0s",dur:"0.8s",values:"1;.5;1",calcMode:"linear",repeatCount:"indefinite"})]),O("circle",{cx:"60",cy:"15",r:"9","fill-opacity":".3"},[O("animate",{attributeName:"r",from:"9",to:"9",begin:"0s",dur:"0.8s",values:"9;15;9",calcMode:"linear",repeatCount:"indefinite"}),O("animate",{attributeName:"fill-opacity",from:".5",to:".5",begin:"0s",dur:"0.8s",values:".5;1;.5",calcMode:"linear",repeatCount:"indefinite"})]),O("circle",{cx:"105",cy:"15",r:"15"},[O("animate",{attributeName:"r",from:"15",to:"15",begin:"0s",dur:"0.8s",values:"15;9;15",calcMode:"linear",repeatCount:"indefinite"}),O("animate",{attributeName:"fill-opacity",from:"1",to:"1",begin:"0s",dur:"0.8s",values:"1;.5;1",calcMode:"linear",repeatCount:"indefinite"})])];var Ho=Q({name:"QSpinnerDots",props:Pa,setup(e){const{cSize:r,classes:t}=Ra(e);return()=>O("svg",{class:t.value,fill:"currentColor",width:r.value,height:r.value,viewBox:"0 0 120 30",xmlns:"http://www.w3.org/2000/svg"},No)}});const{passive:He}=Ve;var Uo=Q({name:"QInfiniteScroll",props:{offset:{type:Number,default:500},debounce:{type:[String,Number],default:100},scrollTarget:{default:void 0},initialIndex:Number,disable:Boolean,reverse:Boolean},emits:["load"],setup(e,{slots:r,emit:t}){const n=w(!1),i=w(!0),a=w(null),c=w(null);let l=e.initialIndex||0,o,s;const u=b(()=>"q-infinite-scroll__loading"+(n.value===!0?"":" invisible"));function f(){if(e.disable===!0||n.value===!0||i.value===!1)return;const E=Tt(o),z=Et(o),N=nn(o);e.reverse===!1?Math.round(z+N+e.offset)>=Math.round(E)&&d():Math.round(z)<=e.offset&&d()}function d(){if(e.disable===!0||n.value===!0||i.value===!1)return;l++,n.value=!0;const E=Tt(o);t("load",l,z=>{i.value===!0&&(n.value=!1,qe(()=>{if(e.reverse===!0){const N=Tt(o),M=Et(o),G=N-E;dt(o,M+G)}z===!0?v():a.value&&a.value.closest("body")&&s()}))})}function p(){l=0}function h(){i.value===!1&&(i.value=!0,o.addEventListener("scroll",s,He)),f()}function v(){i.value===!0&&(i.value=!1,n.value=!1,o.removeEventListener("scroll",s,He),s!==void 0&&s.cancel!==void 0&&s.cancel())}function C(){if(o&&i.value===!0&&o.removeEventListener("scroll",s,He),o=rr(a.value,e.scrollTarget),i.value===!0){if(o.addEventListener("scroll",s,He),e.reverse===!0){const E=Tt(o),z=nn(o);dt(o,E-z)}f()}}function g(E){l=E}function m(E){E=parseInt(E,10);const z=s;s=E<=0?f:ti(f,isNaN(E)===!0?100:E),o&&i.value===!0&&(z!==void 0&&o.removeEventListener("scroll",z,He),o.addEventListener("scroll",s,He))}function R(E){if(P.value===!0){if(c.value===null){E!==!0&&qe(()=>{R(!0)});return}const z=`${n.value===!0?"un":""}pauseAnimations`;Array.from(c.value.getElementsByTagName("svg")).forEach(N=>{N[z]()})}}const P=b(()=>e.disable!==!0&&i.value===!0);j([n,P],()=>{R()}),j(()=>e.disable,E=>{E===!0?v():h()}),j(()=>e.reverse,()=>{n.value===!1&&i.value===!0&&f()}),j(()=>e.scrollTarget,C),j(()=>e.debounce,m);let y=!1;Zn(()=>{y!==!1&&o&&dt(o,y)}),ei(()=>{y=o?Et(o):!1}),ue(()=>{i.value===!0&&o.removeEventListener("scroll",s,He)}),$e(()=>{m(e.debounce),C(),n.value===!1&&R()});const B=ce();return Object.assign(B.proxy,{poll:()=>{s!==void 0&&s()},trigger:d,stop:v,reset:p,resume:h,setIndex:g}),()=>{const E=zr(r.default,[]);return P.value===!0&&E[e.reverse===!1?"push":"unshift"](O("div",{ref:c,class:u.value},Pe(r.loading))),O("div",{class:"q-infinite-scroll",ref:a},E)}}});const zn=["vertical","horizontal"],gr={vertical:{offset:"offsetY",scroll:"scrollTop",dir:"down",dist:"y"},horizontal:{offset:"offsetX",scroll:"scrollLeft",dir:"right",dist:"x"}},$n={prevent:!0,mouse:!0,mouseAllDir:!0},qn=e=>e>=250?50:Math.ceil(e/5);var Yi=Q({name:"QScrollArea",props:{...Xe,thumbStyle:Object,verticalThumbStyle:Object,horizontalThumbStyle:Object,barStyle:[Array,String,Object],verticalBarStyle:[Array,String,Object],horizontalBarStyle:[Array,String,Object],contentStyle:[Array,String,Object],contentActiveStyle:[Array,String,Object],delay:{type:[String,Number],default:1e3},visible:{type:Boolean,default:null},tabindex:[String,Number],onScroll:Function},setup(e,{slots:r,emit:t}){const n=w(!1),i=w(!1),a=w(!1),c={vertical:w(0),horizontal:w(0)},l={vertical:{ref:w(null),position:w(0),size:w(0)},horizontal:{ref:w(null),position:w(0),size:w(0)}},{proxy:o}=ce(),s=Ze(e,o.$q);let u=null,f;const d=w(null),p=b(()=>"q-scrollarea"+(s.value===!0?" q-scrollarea--dark":""));l.vertical.percentage=b(()=>{const x=l.vertical.size.value-c.vertical.value;if(x<=0)return 0;const S=je(l.vertical.position.value/x,0,1);return Math.round(S*1e4)/1e4}),l.vertical.thumbHidden=b(()=>(e.visible===null?a.value:e.visible)!==!0&&n.value===!1&&i.value===!1||l.vertical.size.value<=c.vertical.value+1),l.vertical.thumbStart=b(()=>l.vertical.percentage.value*(c.vertical.value-l.vertical.thumbSize.value)),l.vertical.thumbSize=b(()=>Math.round(je(c.vertical.value*c.vertical.value/l.vertical.size.value,qn(c.vertical.value),c.vertical.value))),l.vertical.style=b(()=>({...e.thumbStyle,...e.verticalThumbStyle,top:`${l.vertical.thumbStart.value}px`,height:`${l.vertical.thumbSize.value}px`})),l.vertical.thumbClass=b(()=>"q-scrollarea__thumb q-scrollarea__thumb--v absolute-right"+(l.vertical.thumbHidden.value===!0?" q-scrollarea__thumb--invisible":"")),l.vertical.barClass=b(()=>"q-scrollarea__bar q-scrollarea__bar--v absolute-right"+(l.vertical.thumbHidden.value===!0?" q-scrollarea__bar--invisible":"")),l.horizontal.percentage=b(()=>{const x=l.horizontal.size.value-c.horizontal.value;if(x<=0)return 0;const S=je(Math.abs(l.horizontal.position.value)/x,0,1);return Math.round(S*1e4)/1e4}),l.horizontal.thumbHidden=b(()=>(e.visible===null?a.value:e.visible)!==!0&&n.value===!1&&i.value===!1||l.horizontal.size.value<=c.horizontal.value+1),l.horizontal.thumbStart=b(()=>l.horizontal.percentage.value*(c.horizontal.value-l.horizontal.thumbSize.value)),l.horizontal.thumbSize=b(()=>Math.round(je(c.horizontal.value*c.horizontal.value/l.horizontal.size.value,qn(c.horizontal.value),c.horizontal.value))),l.horizontal.style=b(()=>({...e.thumbStyle,...e.horizontalThumbStyle,[o.$q.lang.rtl===!0?"right":"left"]:`${l.horizontal.thumbStart.value}px`,width:`${l.horizontal.thumbSize.value}px`})),l.horizontal.thumbClass=b(()=>"q-scrollarea__thumb q-scrollarea__thumb--h absolute-bottom"+(l.horizontal.thumbHidden.value===!0?" q-scrollarea__thumb--invisible":"")),l.horizontal.barClass=b(()=>"q-scrollarea__bar q-scrollarea__bar--h absolute-bottom"+(l.horizontal.thumbHidden.value===!0?" q-scrollarea__bar--invisible":""));const h=b(()=>l.vertical.thumbHidden.value===!0&&l.horizontal.thumbHidden.value===!0?e.contentStyle:e.contentActiveStyle),v=[[pt,x=>{E(x,"vertical")},void 0,{vertical:!0,...$n}]],C=[[pt,x=>{E(x,"horizontal")},void 0,{horizontal:!0,...$n}]];function g(){const x={};return zn.forEach(S=>{const A=l[S];x[S+"Position"]=A.position.value,x[S+"Percentage"]=A.percentage.value,x[S+"Size"]=A.size.value,x[S+"ContainerSize"]=c[S].value}),x}const m=ti(()=>{const x=g();x.ref=o,t("scroll",x)},0);function R(x,S,A){if(zn.includes(x)===!1){console.error("[QScrollArea]: wrong first param of setScrollPosition (vertical/horizontal)");return}(x==="vertical"?dt:dr)(d.value,S,A)}function P({height:x,width:S}){let A=!1;c.vertical.value!==x&&(c.vertical.value=x,A=!0),c.horizontal.value!==S&&(c.horizontal.value=S,A=!0),A===!0&&G()}function y({position:x}){let S=!1;l.vertical.position.value!==x.top&&(l.vertical.position.value=x.top,S=!0),l.horizontal.position.value!==x.left&&(l.horizontal.position.value=x.left,S=!0),S===!0&&G()}function B({height:x,width:S}){l.horizontal.size.value!==S&&(l.horizontal.size.value=S,G()),l.vertical.size.value!==x&&(l.vertical.size.value=x,G())}function E(x,S){const A=l[S];if(x.isFirst===!0){if(A.thumbHidden.value===!0)return;f=A.position.value,i.value=!0}else if(i.value!==!0)return;x.isFinal===!0&&(i.value=!1);const H=gr[S],ne=c[S].value,_e=(A.size.value-ne)/(ne-A.thumbSize.value),Se=x.distance[H.dist],F=f+(x.direction===H.dir?1:-1)*Se*_e;Z(F,S)}function z(x,S){const A=l[S];if(A.thumbHidden.value!==!0){const H=x[gr[S].offset];if(H<A.thumbStart.value||H>A.thumbStart.value+A.thumbSize.value){const ne=H-A.thumbSize.value/2;Z(ne/c[S].value*A.size.value,S)}A.ref.value!==null&&A.ref.value.dispatchEvent(new MouseEvent(x.type,x))}}function N(x){z(x,"vertical")}function M(x){z(x,"horizontal")}function G(){n.value=!0,u!==null&&clearTimeout(u),u=setTimeout(()=>{u=null,n.value=!1},e.delay),e.onScroll!==void 0&&m()}function Z(x,S){d.value[gr[S].scroll]=x}function J(){a.value=!0}function W(){a.value=!1}let Y=null;return j(()=>o.$q.lang.rtl,x=>{d.value!==null&&dr(d.value,Math.abs(l.horizontal.position.value)*(x===!0?-1:1))}),ei(()=>{Y={top:l.vertical.position.value,left:l.horizontal.position.value}}),Zn(()=>{if(Y===null)return;const x=d.value;x!==null&&(dr(x,Y.left),dt(x,Y.top))}),ue(m.cancel),Object.assign(o,{getScrollTarget:()=>d.value,getScroll:g,getScrollPosition:()=>({top:l.vertical.position.value,left:l.horizontal.position.value}),getScrollPercentage:()=>({top:l.vertical.percentage.value,left:l.horizontal.percentage.value}),setScrollPosition:R,setScrollPercentage(x,S,A){R(x,S*(l[x].size.value-c[x].value)*(x==="horizontal"&&o.$q.lang.rtl===!0?-1:1),A)}}),()=>O("div",{class:p.value,onMouseenter:J,onMouseleave:W},[O("div",{ref:d,class:"q-scrollarea__container scroll relative-position fit hide-scrollbar",tabindex:e.tabindex!==void 0?e.tabindex:void 0},[O("div",{class:"q-scrollarea__content absolute",style:h.value},jr(r.default,[O(Ye,{debounce:0,onResize:B})])),O(fi,{axis:"both",onScroll:y})]),O(Ye,{debounce:0,onResize:P}),O("div",{class:l.vertical.barClass.value,style:[e.barStyle,e.verticalBarStyle],"aria-hidden":"true",onMousedown:N}),O("div",{class:l.horizontal.barClass.value,style:[e.barStyle,e.horizontalBarStyle],"aria-hidden":"true",onMousedown:M}),$t(O("div",{ref:l.vertical.ref,class:l.vertical.thumbClass.value,style:l.vertical.style.value,"aria-hidden":"true"}),v),$t(O("div",{ref:l.horizontal.ref,class:l.horizontal.thumbClass.value,style:l.horizontal.style.value,"aria-hidden":"true"}),C)])}});const Go=()=>!0;function Vo(e){const r={};return e.forEach(t=>{r[t]=Go}),r}function Gt(){const{emit:e,proxy:r}=ce(),t=w(null);function n(){t.value.show()}function i(){t.value.hide()}function a(l){e("ok",l),i()}function c(){e("hide")}return Object.assign(r,{show:n,hide:i}),{dialogRef:t,onDialogHide:c,onDialogOK:a,onDialogCancel:i}}const Xi=["ok","hide"];Gt.emits=Xi;Gt.emitsObject=Vo(Xi);function Me(e,r,t){return parseInt(e.substr(r,t),16)}function Zi(e){return e|=0,e<0?"00":e<16?"0"+e.toString(16):e<256?e.toString(16):"ff"}function yr(e,r,t){return t=t<0?t+6:t>6?t-6:t,Zi(255*(t<1?e+(r-e)*t:t<3?r:t<4?e+(r-e)*(4-t):e))}function Wo(e){if(/^#[0-9a-f]{3,8}$/i.test(e)){let r;const t=e.length;if(t<6){const n=e[1],i=e[2],a=e[3],c=e[4]||"";r="#"+n+n+i+i+a+a+c+c}return(t==7||t>8)&&(r=e),r}}function Fn(e){const r=Me(e,7,2);let t;if(isNaN(r))t=e;else{const n=Me(e,1,2),i=Me(e,3,2),a=Me(e,5,2);t="rgba("+n+","+i+","+a+","+(r/255).toFixed(2)+")"}return t}function Ko(e,r,t){let n;if(r==0){const i=Zi(t*255);n=i+i+i}else{const i=t<=.5?t*(r+1):t+r-t*r,a=t*2-i;n=yr(a,i,e*6+2)+yr(a,i,e*6)+yr(a,i,e*6-2)}return"#"+n}function ot(e,r,t){const n=[.55,.5,.5,.46,.6,.55,.55],i=n[e*6+.5|0];return t=t<.5?t*i*2:i+(t-.5)*(1-i)*2,Ko(e,r,t)}const Qo=typeof window<"u"?window:typeof self<"u"?self:typeof global<"u"?global:{},Nn={V:"jdenticon_config",n:"config"};var Jo={};function Yo(e,r){const t=typeof e=="object"&&e||Jo[Nn.n]||Qo[Nn.V]||{},n=t.lightness||{},i=t.saturation||{},a="color"in i?i.color:i,c=i.grayscale,l=t.backColor,o=t.padding;function s(f,d){let p=n[f];return p&&p.length>1||(p=d),function(h){return h=p[0]+h*(p[1]-p[0]),h<0?0:h>1?1:h}}function u(f){const d=t.hues;let p;return d&&d.length>0&&(p=d[0|.999*f*d.length]),typeof p=="number"?(p/360%1+1)%1:f}return{W:u,o:typeof a=="number"?a:.5,D:typeof c=="number"?c:0,p:s("color",[.4,.8]),F:s("grayscale",[.3,.9]),G:Wo(l),X:typeof e=="number"?e:typeof o=="number"?o:r}}class Rt{constructor(r,t){this.x=r,this.y=t}}class ea{constructor(r,t,n,i){this.q=r,this.t=t,this.H=n,this.Y=i}I(r,t,n,i){const a=this.q+this.H,c=this.t+this.H,l=this.Y;return l===1?new Rt(a-t-(i||0),this.t+r):l===2?new Rt(a-r-(n||0),c-t-(i||0)):l===3?new Rt(this.q+t,c-r-(n||0)):new Rt(this.q+r,this.t+t)}}const Xo=new ea(0,0,0,0);class Zo{constructor(r){this.J=r,this.u=Xo}g(r,t){const n=t?-2:2,i=[];for(let a=t?r.length-2:0;a<r.length&&a>=0;a+=n)i.push(this.u.I(r[a],r[a+1]));this.J.g(i)}h(r,t,n,i){const a=this.u.I(r,t,n,n);this.J.h(a,n,i)}i(r,t,n,i,a){this.g([r,t,r+n,t,r+n,t+i,r,t+i],a)}j(r,t,n,i,a,c){const l=[r+n,t,r+n,t+i,r,t+i,r,t];l.splice((a||0)%4*2,2),this.g(l,c)}K(r,t,n,i,a){this.g([r+n/2,t,r+n,t+i/2,r+n/2,t+i,r,t+i/2],a)}}function es(e,r,t,n){e=e%14;let i,a,c,l,o,s;e?e==1?(c=0|t*.5,l=0|t*.8,r.j(t-c,0,c,l,2)):e==2?(c=0|t/3,r.i(c,c,t-c,t-c)):e==3?(o=t*.1,s=t<6?1:t<8?2:0|t*.25,o=o>1?0|o:o>.5?1:o,r.i(s,s,t-o-s,t-o-s)):e==4?(a=0|t*.15,c=0|t*.5,r.h(t-c-a,t-c-a,c)):e==5?(o=t*.1,s=o*4,s>3&&(s=0|s),r.i(0,0,t,t),r.g([s,s,t-o,s,s+(t-s-o)/2,t-o],!0)):e==6?r.g([0,0,t,0,t,t*.7,t*.4,t*.4,t*.7,t,0,t]):e==7?r.j(t/2,t/2,t/2,t/2,3):e==8?(r.i(0,0,t,t/2),r.i(0,t/2,t/2,t/2),r.j(t/2,t/2,t/2,t/2,1)):e==9?(o=t*.14,s=t<4?1:t<6?2:0|t*.35,o=t<8?o:0|o,r.i(0,0,t,t),r.i(s,s,t-s-o,t-s-o,!0)):e==10?(o=t*.12,s=o*3,r.i(0,0,t,t),r.h(s,s,t-o-s,!0)):e==11?r.j(t/2,t/2,t/2,t/2,3):e==12?(a=t*.25,r.i(0,0,t,t),r.K(a,a,t-a,t-a,!0)):!n&&(a=t*.4,c=t*1.2,r.h(a,a,c)):(i=t*.42,r.g([0,0,t,0,t,t-i*2,t-i,t,0,t]))}function Hn(e,r,t){e=e%4;let n;e?e==1?r.j(0,t/2,t,t/2,0):e==2?r.K(0,0,t,t):(n=t/6,r.h(n,n,t-2*n)):r.j(0,0,t,t,0)}function ts(e,r){return e=r.W(e),[ot(e,r.D,r.F(0)),ot(e,r.o,r.p(.5)),ot(e,r.D,r.F(1)),ot(e,r.o,r.p(1)),ot(e,r.o,r.p(0))]}function rs(e,r,t){const n=Yo(t,.08);n.G&&e.m(n.G);let i=e.k;const a=.5+i*n.X|0;i-=a*2;const c=new Zo(e),l=0|i/4,o=0|a+i/2-l*2,s=0|a+i/2-l*2;function u(C,g,m,R,P){const y=Me(r,m,1);let B=R?Me(r,R,1):0;e.L(d[p[C]]);for(let E=0;E<P.length;E++)c.u=new ea(o+P[E][0]*l,s+P[E][1]*l,l,B++%4),g(y,c,l,E);e.M()}const f=Me(r,-7)/268435455,d=ts(f,n),p=[];let h;function v(C){if(C.indexOf(h)>=0){for(let g=0;g<C.length;g++)if(p.indexOf(C[g])>=0)return!0}}for(let C=0;C<3;C++)h=Me(r,8+C,1)%d.length,(v([0,4])||v([2,3]))&&(h=1),p.push(h);u(0,Hn,2,3,[[1,0],[2,0],[2,3],[1,3],[0,1],[3,1],[3,2],[0,2]]),u(1,Hn,4,5,[[0,0],[3,0],[3,3],[0,3]]),u(2,es,1,null,[[1,1],[2,1],[2,2],[1,2]]),e.finish()}function ns(e){var n=0,i=0,a=encodeURI(e)+"%80",c=[],l,o=[],s=1732584193,u=4023233417,f=~s,d=~u,p=3285377520,h=[s,u,f,d,p],v=0,C="";function g(m,R){return m<<R|m>>>32-R}for(;n<a.length;i++)c[i>>2]=c[i>>2]|(a[n]=="%"?parseInt(a.substring(n+1,n+=3),16):a.charCodeAt(n++))<<(3-(i&3))*8;for(l=((i+7>>6)+1)*16,c[l-1]=i*8-8;v<l;v+=16){for(n=0;n<80;n++)i=g(s,5)+p+(n<20?(u&f^~u&d)+1518500249:n<40?(u^f^d)+1859775393:n<60?(u&f^u&d^f&d)+2400959708:(u^f^d)+3395469782)+(o[n]=n<16?c[v+n]|0:g(o[n-3]^o[n-8]^o[n-14]^o[n-16],1)),p=d,d=f,f=g(u,30),u=s,s=i;h[0]=s=h[0]+s|0,h[1]=u=h[1]+u|0,h[2]=f=h[2]+f|0,h[3]=d=h[3]+d|0,h[4]=p=h[4]+p|0}for(n=0;n<40;n++)C+=(h[n>>3]>>>(7-(n&7))*4&15).toString(16);return C}function Un(e){return/^[0-9a-f]{11,}$/i.test(e)&&e}function Gn(e){return ns(e==null?"":""+e)}class is{constructor(r,t){const n=r.canvas,i=n.width,a=n.height;r.save(),t||(t=Math.min(i,a),r.translate((i-t)/2|0,(a-t)/2|0)),this.l=r,this.k=t,r.clearRect(0,0,t,t)}m(r){const t=this.l,n=this.k;t.fillStyle=Fn(r),t.fillRect(0,0,n,n)}L(r){const t=this.l;t.fillStyle=Fn(r),t.beginPath()}M(){this.l.fill()}g(r){const t=this.l;t.moveTo(r[0].x,r[0].y);for(let n=1;n<r.length;n++)t.lineTo(r[n].x,r[n].y);t.closePath()}h(r,t,n){const i=this.l,a=t/2;i.moveTo(r.x+a,r.y+a),i.arc(r.x+a,r.y+a,a,0,Math.PI*2,n),i.closePath()}finish(){this.l.restore()}}function Ke(e){return(e*10+.5|0)/10}class as{constructor(){this.v=""}g(r){let t="";for(let n=0;n<r.length;n++)t+=(n?"L":"M")+Ke(r[n].x)+" "+Ke(r[n].y);this.v+=t+"Z"}h(r,t,n){const i=n?0:1,a=Ke(t/2),c=Ke(t),l="a"+a+","+a+" 0 1,"+i+" ";this.v+="M"+Ke(r.x)+" "+Ke(r.y+t/2)+l+c+",0"+l+-c+",0"}}class os{constructor(r){this.A,this.B={},this.N=r,this.k=r.k}m(r){const t=/^(#......)(..)?/.exec(r),n=t[2]?Me(t[2],0)/255:1;this.N.m(t[1],n)}L(r){this.A=this.B[r]||(this.B[r]=new as)}M(){}g(r){this.A.g(r)}h(r,t,n){this.A.h(r,t,n)}finish(){const r=this.B;for(let t in r)r.hasOwnProperty(t)&&this.N.O(t,r[t].v)}}const ft={P:"http://www.w3.org/2000/svg",R:"width",S:"height"},ta=1,ss=2,br={Z:"data-jdenticon-hash",T:"data-jdenticon-value"},Vn=typeof document<"u"&&document.querySelectorAll.bind(document);function cs(e){if(e){const r=e.tagName;if(/^svg$/i.test(r))return ta;if(/^canvas$/i.test(r)&&"getContext"in e)return ss}}function Wn(e,r,...t){const n=document.createElementNS(ft.P,r);for(let i=0;i+1<t.length;i+=2)n.setAttribute(t[i],t[i+1]);e.appendChild(n)}class ls{constructor(r){const t=this.k=Math.min(Number(r.getAttribute(ft.R))||100,Number(r.getAttribute(ft.S))||100);for(this.U=r;r.firstChild;)r.removeChild(r.firstChild);r.setAttribute("viewBox","0 0 "+t+" "+t),r.setAttribute("preserveAspectRatio","xMidYMid meet")}m(r,t){t&&Wn(this.U,"rect",ft.R,"100%",ft.S,"100%","fill",r,"opacity",t)}O(r,t){Wn(this.U,"path","fill",r,"d",t)}}function us(e,r,t){ra(e,r,t,function(n,i){if(i)return i==ta?new os(new ls(n)):new is(n.getContext("2d"))})}function ra(e,r,t,n){if(typeof e=="string"){if(Vn){const c=Vn(e);for(let l=0;l<c.length;l++)ra(c[l],r,t,n)}return}const i=Un(r)||r!=null&&Gn(r)||Un(e.getAttribute(br.Z))||e.hasAttribute(br.T)&&Gn(e.getAttribute(br.T));if(!i)return;const a=n(e,cs(e));a&&rs(a,i,t)}const ir=We({__name:"JdentIcon",props:{hash:null},setup(e){const r=e,t=w();return $e(()=>us(t.value,r.hash)),(n,i)=>(U(),ye("svg",{class:"jdent-icon",ref_key:"svgRef",ref:t},null,512))}});const fs=me("div",{class:"text-h6"},"Chose your Username and Avatar",-1),ds=me("div",{class:"text-caption"}," Your avatar is coupled to your peer ID so it cannot be changed later. ",-1),ps={class:"icon-flex-container"},hs={class:"row justify-center"},vs=We({__name:"AvatarPicker",emits:{...Gt.emitsObject},setup(e){const{dialogRef:r,onDialogOK:t,onDialogHide:n}=Gt(),i=w([]),a=w(),c=w("");function l(u){return Promise.all([...Array(u)].map(ys))}const o=async(u,f)=>{const d=await l(12);i.value.push(...d),f()};async function s(u){if(a.value?.resetValidation(),await qe(),!await a.value?.validate()){a.value?.focus();return}t({keyPair:u,username:c.value})}return(u,f)=>(U(),ve(Ea,{ref_key:"dialogRef",ref:r,onHide:oe(n),class:"avatar-picker"},{default:k(()=>[_(Oa,{style:{width:"700px","max-width":"650px","max-height":"90vh"}},{default:k(()=>[_(pr,null,{default:k(()=>[fs,ds]),_:1}),_(pr,null,{default:k(()=>[_($r,{outlined:"",ref_key:"usernameRef",ref:a,modelValue:c.value,"onUpdate:modelValue":f[0]||(f[0]=d=>c.value=d),label:"Username",autofocus:!0,rules:[Boolean]},null,8,["modelValue"])]),_:1}),_(pr,{class:"q-pt-sm"},{default:k(()=>[_(Yi,{style:{height:"340px"},visible:"",class:"scroll-blur"},{default:k(()=>[_(Uo,{offset:750,onLoad:o},{loading:k(()=>[me("div",hs,[_(Ho,{color:"primary",size:"lg"})])]),default:k(()=>[me("div",ps,[(U(!0),ye(Fr,null,qr(i.value,d=>(U(),ve(ir,{key:d.serializedPublicKey,hash:d.serializedPublicKey,onClick:p=>s(d)},null,8,["hash","onClick"]))),128))])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["onHide"]))}}),ar=Ka("username",""),or={name:"RSA-OAEP",hash:"SHA-256"},na=Symbol();let wt=localStorage.getItem("publicKey"),Bt=localStorage.getItem("privateKey");if(!wt||!Bt){const e=await gs();ar.value=e.username,wt=e.keyPair.serializedPublicKey,Bt=e.keyPair[na],localStorage.setItem("publicKey",wt),localStorage.setItem("privateKey",Bt)}const ms=await ia(Bt,"private"),Ir=wt;function gs(){return new Promise(e=>{Da.create({component:vs,componentProps:{persistent:!0}}).onOk(e)})}async function ys(){const e=await crypto.subtle.generateKey({...or,modulusLength:2048,publicExponent:new Uint8Array([1,0,1])},!0,["encrypt","decrypt"]),[r,t]=await Promise.all([Kn(e.publicKey),Kn(e.privateKey)]);return{pair:e,serializedPublicKey:r,[na]:t}}async function Kn(e){const r=e.type==="public"?"spki":"pkcs8",t=await crypto.subtle.exportKey(r,e);return oo(t)}async function ia(e,r){const t=r==="public"?"spki":"pkcs8",n=r==="public"?["encrypt"]:["decrypt"],i=so(e);return await crypto.subtle.importKey(t,i,or,!0,n)}async function aa(e){const r=await ia(e,"public"),t=crypto.getRandomValues(new Uint8Array(100)).buffer,n=await crypto.subtle.encrypt(or,r,t);return{riddle:[...new Uint8Array(n)],solution:[...new Uint8Array(t)]}}async function oa(e){const r=new Uint8Array(e),t=await crypto.subtle.decrypt(or,ms,r);return[...new Uint8Array(t)]}const Vt=new Fo(Ir,{secure:!0});await new Promise((e,r)=>{Vt.once("open",e),Vt.once("error",r)});async function bs(e){await new Promise(r=>setTimeout(r,e))}async function _r(e){const{riddle:r,solution:t}=await aa(e.id),n={username:ar.value,callerRiddle:r},i=Vt.connect(e.id,{metadata:n});return ri(i),i.once("data",async a=>{const c=a;if(e.verification="pending",sa(c.calleeAnswer,t)!=="verified"){i.close(),console.error("Contact could not authenticate itself.",i),e.verification="untrusted";return}const o={callerAnswer:await oa(c.calleeRiddle)};i.send(o),i.once("data",s=>{const u=s;u?.message==="Hello my friend"&&(e.verification="verified",e.status="friend",e.username=u.username)})}),ca(i,e),i}Vt.on("connection",async e=>{const r=ze.value.find(t=>t.id===e.peer);try{r&&(r.verification="pending"),await _s(e),r&&(r.verification="verified")}catch(t){console.error(t),r&&(r.verification="untrusted"),e.close();return}if(r?.status==="outgoing friend request"){const t=e.metadata;r.status="friend",r.username=t.username}if(r?.status==="friend"){ri(e),r.connection=e,r.connected=!0,ca(e,r);return}if(e.close(),!r){ze.value=[await Xr(e.peer,"incoming friend request",e.metadata.username),...ze.value];return}});async function _s(e){const r=e.metadata,t=await oa(r.callerRiddle),{riddle:n,solution:i}=await aa(e.peer),a={calleeAnswer:t,calleeRiddle:n};await bs(500),e.send(a),await new Promise((c,l)=>{e.once("data",o=>{if(sa(o.callerAnswer,i)!=="verified"){e.close(),console.error("Contact could not authenticate itself.",e),l();return}const f={message:"Hello my friend",username:ar.value};e.send(f),c()})})}function sa(e,r){return Array.isArray(e)&&e.length===r.length&&e.every((t,n)=>t===r[n])?"verified":"untrusted"}function ca(e,r){e.on("open",()=>{r.connected=!0}),e.on("close",()=>{r.connected=!1}),e.on("iceStateChanged",t=>{t==="disconnected"&&(r.connected=!1)})}async function Xr(e,r,t){const n=st({id:e,status:r,username:t??e,connected:!1,highlight:!1,verification:"pending",connection:void 0,remove:i,ignore:a,pardon:c,acceptFriendRequest:l});(r==="friend"||r==="outgoing friend request")&&(n.connection=await _r(n));function i(){n.connection?.close(),gt.value=gt.value.filter(o=>o.id!==e)}function a(){n.connection?.close(),n.status="ignore"}async function c(){n.status="friend",n.connection=await _r(n)}async function l(){n.status="friend",n.connection=await _r(n)}return n}const gt=w(await Ss()),ze=gt;j(gt,Cs,{deep:!0});async function Ss(){const e=localStorage.getItem("contacts")??"[]",r=JSON.parse(e);return await Promise.all(r.map(({id:t,status:n,username:i})=>Xr(t,n,i)))}function Cs(){const e=gt.value.map(t=>({id:t.id,status:t.status,username:t.username})),r=JSON.stringify(e);localStorage.setItem("contacts",r)}const Ts=We({__name:"AddFriendInput",setup(e){const r=w("");function t(){setTimeout(()=>{r.value=""},0)}async function n(i){if(i.endsWith(Nt)){t();const a=ze.value.find(c=>c.id===i);if(a){a.highlight=!0,setTimeout(()=>a.highlight=!1,150);return}ze.value=[await Xr(i,"outgoing friend request"),...ze.value]}}return(i,a)=>(U(),ve($r,{rounded:"",outlined:"",dense:"",class:"WAL__field full-width",modelValue:r.value,"onUpdate:modelValue":[a[0]||(a[0]=c=>r.value=c),a[1]||(a[1]=c=>n(c))],placeholder:"Paste your friend's peer ID"},{prepend:k(()=>[_(Ce,{name:"person_add",class:"q-mr-xs"})]),_:1},8,["modelValue"]))}});var V=Q({name:"QItemSection",props:{avatar:Boolean,thumbnail:Boolean,side:Boolean,top:Boolean,noWrap:Boolean},setup(e,{slots:r}){const t=b(()=>`q-item__section column q-item__section--${e.avatar===!0||e.side===!0||e.thumbnail===!0?"side":"main"}`+(e.top===!0?" q-item__section--top justify-start":" justify-center")+(e.avatar===!0?" q-item__section--avatar":"")+(e.thumbnail===!0?" q-item__section--thumbnail":"")+(e.noWrap===!0?" q-item__section--nowrap":""));return()=>O("div",{class:t.value},Pe(r.default))}}),Ie=Q({name:"QItemLabel",props:{overline:Boolean,caption:Boolean,header:Boolean,lines:[Number,String]},setup(e,{slots:r}){const t=b(()=>parseInt(e.lines,10)),n=b(()=>"q-item__label"+(e.overline===!0?" q-item__label--overline text-overline":"")+(e.caption===!0?" q-item__label--caption text-caption":"")+(e.header===!0?" q-item__label--header":"")+(t.value===1?" ellipsis":"")),i=b(()=>e.lines!==void 0&&t.value>1?{overflow:"hidden",display:"-webkit-box","-webkit-box-orient":"vertical","-webkit-line-clamp":t.value}:null);return()=>O("div",{style:i.value,class:n.value},Pe(r.default))}}),xe=Q({name:"QItem",props:{...Xe,...Nr,tag:{type:String,default:"div"},active:{type:Boolean,default:null},clickable:Boolean,dense:Boolean,insetLevel:Number,tabindex:[String,Number],focused:Boolean,manualFocus:Boolean},emits:["click","keyup"],setup(e,{slots:r,emit:t}){const{proxy:{$q:n}}=ce(),i=Ze(e,n),{hasLink:a,linkAttrs:c,linkClass:l,linkTag:o,navigateOnClick:s}=Ma(),u=w(null),f=w(null),d=b(()=>e.clickable===!0||a.value===!0||e.tag==="label"),p=b(()=>e.disable!==!0&&d.value===!0),h=b(()=>"q-item q-item-type row no-wrap"+(e.dense===!0?" q-item--dense":"")+(i.value===!0?" q-item--dark":"")+(a.value===!0&&e.active===null?l.value:e.active===!0?` q-item--active${e.activeClass!==void 0?` ${e.activeClass}`:""}`:"")+(e.disable===!0?" disabled":"")+(p.value===!0?" q-item--clickable q-link cursor-pointer "+(e.manualFocus===!0?"q-manual-focusable":"q-focusable q-hoverable")+(e.focused===!0?" q-manual-focusable--focused":""):"")),v=b(()=>{if(e.insetLevel===void 0)return null;const R=n.lang.rtl===!0?"Right":"Left";return{["padding"+R]:16+e.insetLevel*56+"px"}});function C(R){p.value===!0&&(f.value!==null&&(R.qKeyEvent!==!0&&document.activeElement===u.value?f.value.focus():document.activeElement===f.value&&u.value.focus()),s(R))}function g(R){if(p.value===!0&&ni(R,13)===!0){bt(R),R.qKeyEvent=!0;const P=new MouseEvent("click",R);P.qKeyEvent=!0,u.value.dispatchEvent(P)}t("keyup",R)}function m(){const R=zr(r.default,[]);return p.value===!0&&R.unshift(O("div",{class:"q-focus-helper",tabindex:-1,ref:f})),R}return()=>{const R={ref:u,class:h.value,style:v.value,role:"listitem",onClick:C,onKeyup:g};return p.value===!0?(R.tabindex=e.tabindex||"0",Object.assign(R,c.value)):d.value===!0&&(R["aria-disabled"]="true"),O(o.value,R,m())}}}),yt=Q({name:"QList",props:{...Xe,bordered:Boolean,dense:Boolean,separator:Boolean,padding:Boolean,tag:{type:String,default:"div"}},setup(e,{slots:r}){const t=ce(),n=Ze(e,t.proxy.$q),i=b(()=>"q-list"+(e.bordered===!0?" q-list--bordered":"")+(e.dense===!0?" q-list--dense":"")+(e.separator===!0?" q-list--separator":"")+(n.value===!0?" q-list--dark":"")+(e.padding===!0?" q-list--padding":""));return()=>O(e.tag,{class:i.value},Pe(r.default))}});const la={target:{default:!0},noParentEvent:Boolean,contextMenu:Boolean};function ua({showing:e,avoidEmit:r,configureAnchorEl:t}){const{props:n,proxy:i,emit:a}=ce(),c=w(null);let l=null;function o(p){return c.value===null?!1:p===void 0||p.touches===void 0||p.touches.length<=1}const s={};t===void 0&&(Object.assign(s,{hide(p){i.hide(p)},toggle(p){i.toggle(p),p.qAnchorHandled=!0},toggleKey(p){ni(p,13)===!0&&s.toggle(p)},contextClick(p){i.hide(p),jt(p),qe(()=>{i.show(p),p.qAnchorHandled=!0})},prevent:jt,mobileTouch(p){if(s.mobileCleanup(p),o(p)!==!0)return;i.hide(p),c.value.classList.add("non-selectable");const h=p.target;Le(s,"anchor",[[h,"touchmove","mobileCleanup","passive"],[h,"touchend","mobileCleanup","passive"],[h,"touchcancel","mobileCleanup","passive"],[c.value,"contextmenu","prevent","notPassive"]]),l=setTimeout(()=>{l=null,i.show(p),p.qAnchorHandled=!0},300)},mobileCleanup(p){c.value.classList.remove("non-selectable"),l!==null&&(clearTimeout(l),l=null),e.value===!0&&p!==void 0&&Ft()}}),t=function(p=n.contextMenu){if(n.noParentEvent===!0||c.value===null)return;let h;p===!0?i.$q.platform.is.mobile===!0?h=[[c.value,"touchstart","mobileTouch","passive"]]:h=[[c.value,"mousedown","hide","passive"],[c.value,"contextmenu","contextClick","notPassive"]]:h=[[c.value,"click","toggle","passive"],[c.value,"keyup","toggleKey","passive"]],Le(s,"anchor",h)});function u(){Je(s,"anchor")}function f(p){for(c.value=p;c.value.classList.contains("q-anchor--skip");)c.value=c.value.parentNode;t()}function d(){if(n.target===!1||n.target===""||i.$el.parentNode===null)c.value=null;else if(n.target===!0)f(i.$el.parentNode);else{let p=n.target;if(typeof n.target=="string")try{p=document.querySelector(n.target)}catch{p=void 0}p!=null?(c.value=p.$el||p,t()):(c.value=null,console.error(`Anchor: target "${n.target}" not found`))}}return j(()=>n.contextMenu,p=>{c.value!==null&&(u(),t(p))}),j(()=>n.target,()=>{c.value!==null&&u(),d()}),j(()=>n.noParentEvent,p=>{c.value!==null&&(p===!0?u():t())}),$e(()=>{d(),r!==!0&&n.modelValue===!0&&c.value===null&&a("update:modelValue",!1)}),ue(()=>{l!==null&&clearTimeout(l),u()}),{anchorEl:c,canShow:o,anchorEvents:s}}function fa(e,r){const t=w(null);let n;function i(l,o){const s=`${o!==void 0?"add":"remove"}EventListener`,u=o!==void 0?o:n;l!==window&&l[s]("scroll",u,Ve.passive),window[s]("scroll",u,Ve.passive),n=o}function a(){t.value!==null&&(i(t.value),t.value=null)}const c=j(()=>e.noParentEvent,()=>{t.value!==null&&(a(),r())});return ue(c),{localScrollTarget:t,unconfigureScrollTarget:a,changeScrollEvent:i}}const{notPassiveCapture:Wt}=Ve,Ge=[];function Kt(e){const r=e.target;if(r===void 0||r.nodeType===8||r.classList.contains("no-pointer-events")===!0)return;let t=an.length-1;for(;t>=0;){const n=an[t].$;if(n.type.name!=="QDialog")break;if(n.props.seamless!==!0)return;t--}for(let n=Ge.length-1;n>=0;n--){const i=Ge[n];if((i.anchorEl.value===null||i.anchorEl.value.contains(r)===!1)&&(r===document.body||i.innerRef.value!==null&&i.innerRef.value.contains(r)===!1))e.qClickOutside=!0,i.onClickOutside(e);else return}}function da(e){Ge.push(e),Ge.length===1&&(document.addEventListener("mousedown",Kt,Wt),document.addEventListener("touchstart",Kt,Wt))}function Qt(e){const r=Ge.findIndex(t=>t===e);r>-1&&(Ge.splice(r,1),Ge.length===0&&(document.removeEventListener("mousedown",Kt,Wt),document.removeEventListener("touchstart",Kt,Wt)))}let Qn,Jn;function Jt(e){const r=e.split(" ");return r.length!==2?!1:["top","center","bottom"].includes(r[0])!==!0?(console.error("Anchor/Self position must start with one of top/center/bottom"),!1):["left","middle","right","start","end"].includes(r[1])!==!0?(console.error("Anchor/Self position must end with one of left/middle/right/start/end"),!1):!0}function pa(e){return e?!(e.length!==2||typeof e[0]!="number"||typeof e[1]!="number"):!0}const Ar={"start#ltr":"left","start#rtl":"right","end#ltr":"right","end#rtl":"left"};["left","middle","right"].forEach(e=>{Ar[`${e}#ltr`]=e,Ar[`${e}#rtl`]=e});function Yt(e,r){const t=e.split(" ");return{vertical:t[0],horizontal:Ar[`${t[1]}#${r===!0?"rtl":"ltr"}`]}}function ks(e,r){let{top:t,left:n,right:i,bottom:a,width:c,height:l}=e.getBoundingClientRect();return r!==void 0&&(t-=r[1],n-=r[0],a+=r[1],i+=r[0],c+=r[0],l+=r[1]),{top:t,bottom:a,height:l,left:n,right:i,width:c,middle:n+(i-n)/2,center:t+(a-t)/2}}function xs(e,r,t){let{top:n,left:i}=e.getBoundingClientRect();return n+=r.top,i+=r.left,t!==void 0&&(n+=t[1],i+=t[0]),{top:n,bottom:n+1,height:1,left:i,right:i+1,width:1,middle:i,center:n}}function Ps(e){return{top:0,center:e.offsetHeight/2,bottom:e.offsetHeight,left:0,middle:e.offsetWidth/2,right:e.offsetWidth}}function Yn(e,r,t){return{top:e[t.anchorOrigin.vertical]-r[t.selfOrigin.vertical],left:e[t.anchorOrigin.horizontal]-r[t.selfOrigin.horizontal]}}function ha(e){if(Qe.is.ios===!0&&window.visualViewport!==void 0){const l=document.body.style,{offsetLeft:o,offsetTop:s}=window.visualViewport;o!==Qn&&(l.setProperty("--q-pe-left",o+"px"),Qn=o),s!==Jn&&(l.setProperty("--q-pe-top",s+"px"),Jn=s)}const{scrollLeft:r,scrollTop:t}=e.el,n=e.absoluteOffset===void 0?ks(e.anchorEl,e.cover===!0?[0,0]:e.offset):xs(e.anchorEl,e.absoluteOffset,e.offset);let i={maxHeight:e.maxHeight,maxWidth:e.maxWidth,visibility:"visible"};(e.fit===!0||e.cover===!0)&&(i.minWidth=n.width+"px",e.cover===!0&&(i.minHeight=n.height+"px")),Object.assign(e.el.style,i);const a=Ps(e.el);let c=Yn(n,a,e);if(e.absoluteOffset===void 0||e.offset===void 0)Sr(c,n,a,e.anchorOrigin,e.selfOrigin);else{const{top:l,left:o}=c;Sr(c,n,a,e.anchorOrigin,e.selfOrigin);let s=!1;if(c.top!==l){s=!0;const u=2*e.offset[1];n.center=n.top-=u,n.bottom-=u+2}if(c.left!==o){s=!0;const u=2*e.offset[0];n.middle=n.left-=u,n.right-=u+2}s===!0&&(c=Yn(n,a,e),Sr(c,n,a,e.anchorOrigin,e.selfOrigin))}i={top:c.top+"px",left:c.left+"px"},c.maxHeight!==void 0&&(i.maxHeight=c.maxHeight+"px",n.height>c.maxHeight&&(i.minHeight=i.maxHeight)),c.maxWidth!==void 0&&(i.maxWidth=c.maxWidth+"px",n.width>c.maxWidth&&(i.minWidth=i.maxWidth)),Object.assign(e.el.style,i),e.el.scrollTop!==t&&(e.el.scrollTop=t),e.el.scrollLeft!==r&&(e.el.scrollLeft=r)}function Sr(e,r,t,n,i){const a=t.bottom,c=t.right,l=Ot(),o=window.innerHeight-l,s=document.body.clientWidth;if(e.top<0||e.top+a>o)if(i.vertical==="center")e.top=r[n.vertical]>o/2?Math.max(0,o-a):0,e.maxHeight=Math.min(a,o);else if(r[n.vertical]>o/2){const u=Math.min(o,n.vertical==="center"?r.center:n.vertical===i.vertical?r.bottom:r.top);e.maxHeight=Math.min(a,u),e.top=Math.max(0,u-a)}else e.top=Math.max(0,n.vertical==="center"?r.center:n.vertical===i.vertical?r.top:r.bottom),e.maxHeight=Math.min(a,o-e.top);if(e.left<0||e.left+c>s)if(e.maxWidth=Math.min(c,s),i.horizontal==="middle")e.left=r[n.horizontal]>s/2?Math.max(0,s-c):0;else if(r[n.horizontal]>s/2){const u=Math.min(s,n.horizontal==="middle"?r.middle:n.horizontal===i.horizontal?r.right:r.left);e.maxWidth=Math.min(c,u),e.left=Math.max(0,u-e.maxWidth)}else e.left=Math.max(0,n.horizontal==="middle"?r.middle:n.horizontal===i.horizontal?r.left:r.right),e.maxWidth=Math.min(c,s-e.left)}var Zr=Q({name:"QMenu",inheritAttrs:!1,props:{...la,...Xt,...Xe,...ii,persistent:Boolean,autoClose:Boolean,separateClosePopup:Boolean,noRouteDismiss:Boolean,noRefocus:Boolean,noFocus:Boolean,fit:Boolean,cover:Boolean,square:Boolean,anchor:{type:String,validator:Jt},self:{type:String,validator:Jt},offset:{type:Array,validator:pa},scrollTarget:{default:void 0},touchPosition:Boolean,maxHeight:{type:String,default:null},maxWidth:{type:String,default:null}},emits:[...Zt,"click","escapeKey"],setup(e,{slots:r,emit:t,attrs:n}){let i=null,a,c,l;const o=ce(),{proxy:s}=o,{$q:u}=s,f=w(null),d=w(!1),p=b(()=>e.persistent!==!0&&e.noRouteDismiss!==!0),h=Ze(e,u),{registerTick:v,removeTick:C}=ai(),{registerTimeout:g}=Br(),{transitionProps:m,transitionStyle:R}=oi(e),{localScrollTarget:P,changeScrollEvent:y,unconfigureScrollTarget:B}=fa(e,F),{anchorEl:E,canShow:z}=ua({showing:d}),{hide:N}=er({showing:d,canShow:z,handleShow:ne,handleHide:_e,hideOnRouteChange:p,processOnMount:!0}),{showPortal:M,hidePortal:G,renderPortal:Z}=si(o,f,tt,"menu"),J={anchorEl:E,innerRef:f,onClickOutside(I){if(e.persistent!==!0&&d.value===!0)return N(I),(I.type==="touchstart"||I.target.classList.contains("q-dialog__backdrop"))&&bt(I),!0}},W=b(()=>Yt(e.anchor||(e.cover===!0?"center middle":"bottom start"),u.lang.rtl)),Y=b(()=>e.cover===!0?W.value:Yt(e.self||"top start",u.lang.rtl)),x=b(()=>(e.square===!0?" q-menu--square":"")+(h.value===!0?" q-menu--dark q-dark":"")),S=b(()=>e.autoClose===!0?{onClick:de}:{}),A=b(()=>d.value===!0&&e.persistent!==!0);j(A,I=>{I===!0?(La(le),da(J)):(on(le),Qt(J))});function H(){Ba(()=>{let I=f.value;I&&I.contains(document.activeElement)!==!0&&(I=I.querySelector("[autofocus][tabindex], [data-autofocus][tabindex]")||I.querySelector("[autofocus] [tabindex], [data-autofocus] [tabindex]")||I.querySelector("[autofocus], [data-autofocus]")||I,I.focus({preventScroll:!0}))})}function ne(I){if(i=e.noRefocus===!1?document.activeElement:null,Ia(ie),M(),F(),a=void 0,I!==void 0&&(e.touchPosition||e.contextMenu)){const Ae=zt(I);if(Ae.left!==void 0){const{top:rt,left:nt}=E.value.getBoundingClientRect();a={left:Ae.left-nt,top:Ae.top-rt}}}c===void 0&&(c=j(()=>u.screen.width+"|"+u.screen.height+"|"+e.self+"|"+e.anchor+"|"+u.lang.rtl,Ee)),e.noFocus!==!0&&document.activeElement.blur(),v(()=>{Ee(),e.noFocus!==!0&&H()}),g(()=>{u.platform.is.ios===!0&&(l=e.autoClose,f.value.click()),Ee(),M(!0),t("show",I)},e.transitionDuration)}function _e(I){C(),G(),Se(!0),i!==null&&(I===void 0||I.qClickOutside!==!0)&&(((I&&I.type.indexOf("key")===0?i.closest('[tabindex]:not([tabindex^="-"])'):void 0)||i).focus(),i=null),g(()=>{G(!0),t("hide",I)},e.transitionDuration)}function Se(I){a=void 0,c!==void 0&&(c(),c=void 0),(I===!0||d.value===!0)&&(Aa(ie),B(),Qt(J),on(le)),I!==!0&&(i=null)}function F(){(E.value!==null||e.scrollTarget!==void 0)&&(P.value=rr(E.value,e.scrollTarget),y(P.value,Ee))}function de(I){l!==!0?(wa(s,I),t("click",I)):l=!1}function ie(I){A.value===!0&&e.noFocus!==!0&&ja(f.value,I.target)!==!0&&H()}function le(I){t("escapeKey"),N(I)}function Ee(){const I=f.value;I===null||E.value===null||ha({el:I,offset:e.offset,anchorEl:E.value,anchorOrigin:W.value,selfOrigin:Y.value,absoluteOffset:a,fit:e.fit,cover:e.cover,maxHeight:e.maxHeight,maxWidth:e.maxWidth})}function tt(){return O(Hr,m.value,()=>d.value===!0?O("div",{role:"menu",...n,ref:f,tabindex:-1,class:["q-menu q-position-engine scroll"+x.value,n.class],style:[n.style,R.value],...S.value},Pe(r.default)):null)}return ue(Se),Object.assign(s,{focus:H,updatePosition:Ee}),Z}}),Lt=Q({name:"QTooltip",inheritAttrs:!1,props:{...la,...Xt,...ii,maxHeight:{type:String,default:null},maxWidth:{type:String,default:null},transitionShow:{default:"jump-down"},transitionHide:{default:"jump-up"},anchor:{type:String,default:"bottom middle",validator:Jt},self:{type:String,default:"top middle",validator:Jt},offset:{type:Array,default:()=>[14,14],validator:pa},scrollTarget:{default:void 0},delay:{type:Number,default:0},hideDelay:{type:Number,default:0}},emits:[...Zt],setup(e,{slots:r,emit:t,attrs:n}){let i,a;const c=ce(),{proxy:{$q:l}}=c,o=w(null),s=w(!1),u=b(()=>Yt(e.anchor,l.lang.rtl)),f=b(()=>Yt(e.self,l.lang.rtl)),d=b(()=>e.persistent!==!0),{registerTick:p,removeTick:h}=ai(),{registerTimeout:v}=Br(),{transitionProps:C,transitionStyle:g}=oi(e),{localScrollTarget:m,changeScrollEvent:R,unconfigureScrollTarget:P}=fa(e,ne),{anchorEl:y,canShow:B,anchorEvents:E}=ua({showing:s,configureAnchorEl:H}),{show:z,hide:N}=er({showing:s,canShow:B,handleShow:J,handleHide:W,hideOnRouteChange:d,processOnMount:!0});Object.assign(E,{delayShow:S,delayHide:A});const{showPortal:M,hidePortal:G,renderPortal:Z}=si(c,o,Se,"tooltip");if(l.platform.is.mobile===!0){const F={anchorEl:y,innerRef:o,onClickOutside(ie){return N(ie),ie.target.classList.contains("q-dialog__backdrop")&&bt(ie),!0}},de=b(()=>e.modelValue===null&&e.persistent!==!0&&s.value===!0);j(de,ie=>{(ie===!0?da:Qt)(F)}),ue(()=>{Qt(F)})}function J(F){M(),p(()=>{a=new MutationObserver(()=>x()),a.observe(o.value,{attributes:!1,childList:!0,characterData:!0,subtree:!0}),x(),ne()}),i===void 0&&(i=j(()=>l.screen.width+"|"+l.screen.height+"|"+e.self+"|"+e.anchor+"|"+l.lang.rtl,x)),v(()=>{M(!0),t("show",F)},e.transitionDuration)}function W(F){h(),G(),Y(),v(()=>{G(!0),t("hide",F)},e.transitionDuration)}function Y(){a!==void 0&&(a.disconnect(),a=void 0),i!==void 0&&(i(),i=void 0),P(),Je(E,"tooltipTemp")}function x(){const F=o.value;y.value===null||!F||ha({el:F,offset:e.offset,anchorEl:y.value,anchorOrigin:u.value,selfOrigin:f.value,maxHeight:e.maxHeight,maxWidth:e.maxWidth})}function S(F){if(l.platform.is.mobile===!0){Ft(),document.body.classList.add("non-selectable");const de=y.value,ie=["touchmove","touchcancel","touchend","click"].map(le=>[de,le,"delayHide","passiveCapture"]);Le(E,"tooltipTemp",ie)}v(()=>{z(F)},e.delay)}function A(F){l.platform.is.mobile===!0&&(Je(E,"tooltipTemp"),Ft(),setTimeout(()=>{document.body.classList.remove("non-selectable")},10)),v(()=>{N(F)},e.hideDelay)}function H(){if(e.noParentEvent===!0||y.value===null)return;const F=l.platform.is.mobile===!0?[[y.value,"touchstart","delayShow","passive"]]:[[y.value,"mouseenter","delayShow","passive"],[y.value,"mouseleave","delayHide","passive"]];Le(E,"anchor",F)}function ne(){if(y.value!==null||e.scrollTarget!==void 0){m.value=rr(y.value,e.scrollTarget);const F=e.noParentEvent===!0?x:N;R(m.value,F)}}function _e(){return s.value===!0?O("div",{...n,ref:o,class:["q-tooltip q-tooltip--style q-position-engine no-pointer-events",n.class],style:[n.style,g.value],role:"tooltip"},Pe(r.default)):null}function Se(){return O(Hr,C.value,_e)}return ue(Y),Object.assign(c.proxy,{updatePosition:x}),Z}}),Rs=Q({name:"QBtnGroup",props:{unelevated:Boolean,outline:Boolean,flat:Boolean,rounded:Boolean,square:Boolean,push:Boolean,stretch:Boolean,glossy:Boolean,spread:Boolean},setup(e,{slots:r}){const t=b(()=>{const n=["unelevated","outline","flat","rounded","square","push","stretch","glossy"].filter(i=>e[i]===!0).map(i=>`q-btn-group--${i}`).join(" ");return`q-btn-group row no-wrap${n.length>0?" "+n:""}`+(e.spread===!0?" q-btn-group--spread":" inline")});return()=>O("div",{class:t.value},Pe(r.default))}});function en(e){navigator.clipboard.writeText(e),za.create({message:"Copied to Clipboard",icon:"inventory",position:"top",timeout:500})}var Es=Q({name:"QSlideTransition",props:{appear:Boolean,duration:{type:Number,default:300}},emits:["show","hide"],setup(e,{slots:r,emit:t}){let n=!1,i,a,c=null,l=null,o,s;function u(){i&&i(),i=null,n=!1,c!==null&&(clearTimeout(c),c=null),l!==null&&(clearTimeout(l),l=null),a!==void 0&&a.removeEventListener("transitionend",o),o=null}function f(v,C,g){v.style.overflowY="hidden",C!==void 0&&(v.style.height=`${C}px`),v.style.transition=`height ${e.duration}ms cubic-bezier(.25, .8, .50, 1)`,n=!0,i=g}function d(v,C){v.style.overflowY=null,v.style.height=null,v.style.transition=null,u(),C!==s&&t(C)}function p(v,C){let g=0;a=v,n===!0?(u(),g=v.offsetHeight===v.scrollHeight?0:void 0):s="hide",f(v,g,C),c=setTimeout(()=>{c=null,v.style.height=`${v.scrollHeight}px`,o=m=>{l=null,(Object(m)!==m||m.target===v)&&d(v,"show")},v.addEventListener("transitionend",o),l=setTimeout(o,e.duration*1.1)},100)}function h(v,C){let g;a=v,n===!0?u():(s="show",g=v.scrollHeight),f(v,g,C),c=setTimeout(()=>{c=null,v.style.height=0,o=m=>{l=null,(Object(m)!==m||m.target===v)&&d(v,"hide")},v.addEventListener("transitionend",o),l=setTimeout(o,e.duration*1.1)},100)}return ue(()=>{n===!0&&u()}),()=>O(Hr,{css:!1,appear:e.appear,onEnter:p,onLeave:h},r.default)}});const Ue=$a({}),Os=Object.keys(Nr);var Ds=Q({name:"QExpansionItem",props:{...Nr,...Xt,...Xe,icon:String,label:String,labelLines:[Number,String],caption:String,captionLines:[Number,String],dense:Boolean,toggleAriaLabel:String,expandIcon:String,expandedIcon:String,expandIconClass:[Array,String,Object],duration:Number,headerInsetLevel:Number,contentInsetLevel:Number,expandSeparator:Boolean,defaultOpened:Boolean,hideExpandIcon:Boolean,expandIconToggle:Boolean,switchToggleSide:Boolean,denseToggle:Boolean,group:String,popup:Boolean,headerStyle:[Array,String,Object],headerClass:[Array,String,Object]},emits:[...Zt,"click","afterShow","afterHide"],setup(e,{slots:r,emit:t}){const{proxy:{$q:n}}=ce(),i=Ze(e,n),a=w(e.modelValue!==null?e.modelValue:e.defaultOpened),c=w(null),l=sn(),{show:o,hide:s,toggle:u}=er({showing:a});let f,d;const p=b(()=>`q-expansion-item q-item-type q-expansion-item--${a.value===!0?"expanded":"collapsed"} q-expansion-item--${e.popup===!0?"popup":"standard"}`),h=b(()=>{if(e.contentInsetLevel===void 0)return null;const S=n.lang.rtl===!0?"Right":"Left";return{["padding"+S]:e.contentInsetLevel*56+"px"}}),v=b(()=>e.disable!==!0&&(e.href!==void 0||e.to!==void 0&&e.to!==null&&e.to!=="")),C=b(()=>{const S={};return Os.forEach(A=>{S[A]=e[A]}),S}),g=b(()=>v.value===!0||e.expandIconToggle!==!0),m=b(()=>e.expandedIcon!==void 0&&a.value===!0?e.expandedIcon:e.expandIcon||n.iconSet.expansionItem[e.denseToggle===!0?"denseIcon":"icon"]),R=b(()=>e.disable!==!0&&(v.value===!0||e.expandIconToggle===!0)),P=b(()=>({expanded:a.value===!0,detailsId:e.targetUid,toggle:u,show:o,hide:s})),y=b(()=>{const S=e.toggleAriaLabel!==void 0?e.toggleAriaLabel:n.lang.label[a.value===!0?"collapse":"expand"](e.label);return{role:"button","aria-expanded":a.value===!0?"true":"false","aria-controls":l,"aria-label":S}});j(()=>e.group,S=>{d!==void 0&&d(),S!==void 0&&G()});function B(S){v.value!==!0&&u(S),t("click",S)}function E(S){S.keyCode===13&&z(S,!0)}function z(S,A){A!==!0&&c.value!==null&&c.value.focus(),u(S),bt(S)}function N(){t("afterShow")}function M(){t("afterHide")}function G(){f===void 0&&(f=sn()),a.value===!0&&(Ue[e.group]=f);const S=j(a,H=>{H===!0?Ue[e.group]=f:Ue[e.group]===f&&delete Ue[e.group]}),A=j(()=>Ue[e.group],(H,ne)=>{ne===f&&H!==void 0&&H!==f&&s()});d=()=>{S(),A(),Ue[e.group]===f&&delete Ue[e.group],d=void 0}}function Z(){const S={class:[`q-focusable relative-position cursor-pointer${e.denseToggle===!0&&e.switchToggleSide===!0?" items-end":""}`,e.expandIconClass],side:e.switchToggleSide!==!0,avatar:e.switchToggleSide},A=[O(Ce,{class:"q-expansion-item__toggle-icon"+(e.expandedIcon===void 0&&a.value===!0?" q-expansion-item__toggle-icon--rotated":""),name:m.value})];return R.value===!0&&(Object.assign(S,{tabindex:0,...y.value,onClick:z,onKeyup:E}),A.unshift(O("div",{ref:c,class:"q-expansion-item__toggle-focus q-icon q-focus-helper q-focus-helper--rounded",tabindex:-1}))),O(V,S,()=>A)}function J(){let S;return r.header!==void 0?S=[].concat(r.header(P.value)):(S=[O(V,()=>[O(Ie,{lines:e.labelLines},()=>e.label||""),e.caption?O(Ie,{lines:e.captionLines,caption:!0},()=>e.caption):null])],e.icon&&S[e.switchToggleSide===!0?"push":"unshift"](O(V,{side:e.switchToggleSide===!0,avatar:e.switchToggleSide!==!0},()=>O(Ce,{name:e.icon})))),e.disable!==!0&&e.hideExpandIcon!==!0&&S[e.switchToggleSide===!0?"unshift":"push"](Z()),S}function W(){const S={ref:"item",style:e.headerStyle,class:e.headerClass,dark:i.value,disable:e.disable,dense:e.dense,insetLevel:e.headerInsetLevel};return g.value===!0&&(S.clickable=!0,S.onClick=B,Object.assign(S,v.value===!0?C.value:y.value)),O(xe,S,J)}function Y(){return $t(O("div",{key:"e-content",class:"q-expansion-item__content relative-position",style:h.value,id:l},Pe(r.default)),[[qa,a.value]])}function x(){const S=[W(),O(Es,{duration:e.duration,onShow:N,onHide:M},Y)];return e.expandSeparator===!0&&S.push(O(qt,{class:"q-expansion-item__border q-expansion-item__border--top absolute-top",dark:i.value}),O(qt,{class:"q-expansion-item__border q-expansion-item__border--bottom absolute-bottom",dark:i.value})),S}return e.group!==void 0&&G(),ue(()=>{d!==void 0&&d()}),()=>O("div",{class:p.value},[O("div",{class:"q-expansion-item__container relative-position"},x())])}});const Ms={class:"row q-gutter-sm"},Is=me("span",null,"Ignored",-1),As={class:"text-grey"},ws={class:"q-py-sm"},Bs=me("div",{class:"text-grey row items-center"}," Ignored ",-1),Ls=We({__name:"IgnoredContacts",setup(e){const r=b(()=>ze.value.filter(n=>n.status==="ignore")),t=w(!1);return Qa(()=>r.value.length===0,()=>t.value=!1),(n,i)=>(U(),ve(Ds,{modelValue:t.value,"onUpdate:modelValue":i[0]||(i[0]=a=>t.value=a),dense:"","header-class":"bg-dark-alt q-px-md shadow-3 "},{header:k(()=>[_(V,null,{default:k(()=>[me("div",Ms,[Is,me("span",As,vt(oe(r).length),1)])]),_:1})]),default:k(()=>[me("div",ws,[_(yt,null,{default:k(()=>[(U(!0),ye(Fr,null,qr(oe(r),a=>(U(),ve(xe,{key:a.id},{default:k(()=>[_(V,{avatar:""},{default:k(()=>[_(Ur,null,{default:k(()=>[_(ir,{hash:a.id},null,8,["hash"])]),_:2},1024)]),_:2},1024),_(V,null,{default:k(()=>[_(Ie,{lines:"1",style:{"text-overflow":"ellipsis",width:"5em"}},{default:k(()=>[X(vt(a.username),1)]),_:2},1024),_(Ie,{caption:""},{default:k(()=>[Bs]),_:1})]),_:2},1024),_(V,{side:""},{default:k(()=>[_(Ce,{name:"keyboard_arrow_down",style:{cursor:"pointer"}}),_(Zr,{"auto-close":"",offset:[-18,-8]},{default:k(()=>[_(yt,{style:{"min-width":"150px"}},{default:k(()=>[_(xe,{clickable:"",onClick:c=>a.pardon()},{default:k(()=>[_(V,null,{default:k(()=>[X("Pardon")]),_:1})]),_:2},1032,["onClick"]),_(xe,{clickable:"",onClick:c=>oe(en)(a.id)},{default:k(()=>[_(V,null,{default:k(()=>[X("Copy peer ID")]),_:1}),_(V,{avatar:""},{default:k(()=>[_(Ce,{name:"content_copy"})]),_:1})]),_:2},1032,["onClick"]),_(qt,{class:"q-my-xs"}),_(xe,{clickable:""},{default:k(()=>[_(V,{onClick:c=>a.remove()},{default:k(()=>[X("Remove")]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1})])]),_:1},8,["modelValue"]))}});const js={class:"column no-wrap fit overflow-hidden"},zs={key:0,class:"text-grey row items-center"},$s={key:1,class:"text-primary row items-center"},qs={key:2,class:"text-negative row items-center"},Fs={key:3,class:"text-positive row items-center"},Ns={key:4,class:"text-primary row items-center"},Hs={key:5,class:"text-grey"},Us=We({__name:"FriendList",setup(e){const r=b(()=>ze.value.filter(t=>t.status!=="ignore"));return(t,n)=>(U(),ye("div",js,[_(Yi,{class:"fit"},{default:k(()=>[_(yt,{class:"friend-list"},{default:k(()=>[_(Fa,{"enter-active-class":"animated lightSpeedInRight","leave-active-class":"animated lightSpeedOutRight"},{default:k(()=>[(U(!0),ye(Fr,null,qr(oe(r),i=>(U(),ve(xe,{key:i.id,class:Na({"animated pulse highlight":i.highlight})},{default:k(()=>[_(V,{avatar:""},{default:k(()=>[_(Ur,null,{default:k(()=>[_(ir,{hash:i.id},null,8,["hash"])]),_:2},1024)]),_:2},1024),_(V,null,{default:k(()=>[_(Ie,{lines:"1",style:{"text-overflow":"ellipsis",width:"5em"}},{default:k(()=>[X(vt(i.username),1)]),_:2},1024),_(Ie,{caption:""},{default:k(()=>[i.status==="outgoing friend request"?(U(),ye("div",zs," Pending ")):i.status==="incoming friend request"?(U(),ye("div",$s," Friend Request ")):i.verification==="untrusted"?(U(),ye("div",qs,[_(Ce,{name:"no_encryption",class:"q-mr-xs"}),X(" Authentication failed ")])):i.connected&&i.verification==="verified"?(U(),ye("div",Fs,[_(Ce,{name:"verified",class:"q-mr-xs"}),X(" Connected ")])):i.connected&&i.verification==="pending"?(U(),ye("div",Ns,[_(Ce,{name:"pending",class:"q-mr-xs"}),X(" Checking ")])):(U(),ye("div",Hs,"Not connected"))]),_:2},1024)]),_:2},1024),i.status==="friend"?(U(),ve(V,{key:0,side:""},{default:k(()=>[_(Ce,{name:"keyboard_arrow_down",style:{cursor:"pointer"}}),_(Zr,{"auto-close":"",offset:[-18,-8]},{default:k(()=>[_(yt,{style:{"min-width":"150px"}},{default:k(()=>[_(xe,{clickable:"",onClick:a=>oe(en)(i.id)},{default:k(()=>[_(V,null,{default:k(()=>[X("Copy peer ID")]),_:1}),_(V,{avatar:""},{default:k(()=>[_(Ce,{name:"content_copy"})]),_:1})]),_:2},1032,["onClick"]),_(qt,{class:"q-my-xs"}),_(xe,{clickable:""},{default:k(()=>[_(V,{onClick:a=>i.ignore()},{default:k(()=>[X("Ignore")]),_:2},1032,["onClick"])]),_:2},1024),_(xe,{clickable:""},{default:k(()=>[_(V,{onClick:a=>i.remove()},{default:k(()=>[X("Remove")]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024)):i.status==="incoming friend request"?(U(),ve(V,{key:1,side:""},{default:k(()=>[_(Rs,{push:""},{default:k(()=>[_(Te,{push:"",size:"sm",color:"positive",icon:"done","aria-label":"Accept",onClick:a=>i.acceptFriendRequest()},{default:k(()=>[_(Lt,null,{default:k(()=>[X("Accpet")]),_:1})]),_:2},1032,["onClick"]),_(Te,{dense:"",push:"",size:"sm",color:"negative",icon:"close","aria-label":"Ignore",onClick:a=>i.ignore()},{default:k(()=>[_(Lt,null,{default:k(()=>[X("Ignore")]),_:1})]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024)):i.status==="outgoing friend request"?(U(),ve(V,{key:2,side:""},{default:k(()=>[_(Te,{flat:"",size:"sm",color:"grey",icon:"cancel",onClick:a=>i.remove()},{default:k(()=>[_(Lt,null,{default:k(()=>[X("Cancel")]),_:1})]),_:2},1032,["onClick"])]),_:2},1024)):Cr("",!0)]),_:2},1032,["class"]))),128))]),_:1})]),_:1})]),_:1}),_(Ls)]))}});var Gs=ci(Us,[["__scopeId","data-v-39d0d644"]]);const Vs=O("div",{class:"q-space"});var Ws=Q({name:"QSpace",setup(){return()=>Vs}}),Ks=Q({name:"QHeader",props:{modelValue:{type:Boolean,default:!0},reveal:Boolean,revealOffset:{type:Number,default:250},bordered:Boolean,elevated:Boolean,heightHint:{type:[String,Number],default:50}},emits:["reveal","focusin"],setup(e,{slots:r,emit:t}){const{proxy:{$q:n}}=ce(),i=tr(_t,be);if(i===be)return console.error("QHeader needs to be child of QLayout"),be;const a=w(parseInt(e.heightHint,10)),c=w(!0),l=b(()=>e.reveal===!0||i.view.value.indexOf("H")>-1||n.platform.is.ios&&i.isContainer.value===!0),o=b(()=>{if(e.modelValue!==!0)return 0;if(l.value===!0)return c.value===!0?a.value:0;const m=a.value-i.scroll.value.position;return m>0?m:0}),s=b(()=>e.modelValue!==!0||l.value===!0&&c.value!==!0),u=b(()=>e.modelValue===!0&&s.value===!0&&e.reveal===!0),f=b(()=>"q-header q-layout__section--marginal "+(l.value===!0?"fixed":"absolute")+"-top"+(e.bordered===!0?" q-header--bordered":"")+(s.value===!0?" q-header--hidden":"")+(e.modelValue!==!0?" q-layout--prevent-focus":"")),d=b(()=>{const m=i.rows.value.top,R={};return m[0]==="l"&&i.left.space===!0&&(R[n.lang.rtl===!0?"right":"left"]=`${i.left.size}px`),m[2]==="r"&&i.right.space===!0&&(R[n.lang.rtl===!0?"left":"right"]=`${i.right.size}px`),R});function p(m,R){i.update("header",m,R)}function h(m,R){m.value!==R&&(m.value=R)}function v({height:m}){h(a,m),p("size",m)}function C(m){u.value===!0&&h(c,!0),t("focusin",m)}j(()=>e.modelValue,m=>{p("space",m),h(c,!0),i.animate()}),j(o,m=>{p("offset",m)}),j(()=>e.reveal,m=>{m===!1&&h(c,e.modelValue)}),j(c,m=>{i.animate(),t("reveal",m)}),j(i.scroll,m=>{e.reveal===!0&&h(c,m.direction==="up"||m.position<=e.revealOffset||m.position-m.inflectionPoint<100)});const g={};return i.instances.header=g,e.modelValue===!0&&p("size",a.value),p("space",e.modelValue),p("offset",o.value),ue(()=>{i.instances.header===g&&(i.instances.header=void 0,p("size",0),p("offset",0),p("space",!1))}),()=>{const m=zr(r.default,[]);return e.elevated===!0&&m.push(O("div",{class:"q-layout__shadow absolute-full overflow-hidden no-pointer-events"})),m.push(O(Ye,{debounce:0,onResize:v})),O("header",{class:f.value,style:d.value,onFocusin:C},m)}}});const Qs={class:"text-subtitle1 q-mr-sm user-select-none"},Js=We({__name:"MeHeader",emits:["toggle-left-drawer"],setup(e){const r=`d8bcc189606a5c75f4acd9af349eee9b9f610ba2
`;return(t,n)=>(U(),ve(Ks,{elevated:""},{default:k(()=>[_(li,null,{default:k(()=>[_(Te,{round:"",flat:"",icon:"keyboard_arrow_left",class:"WAL__drawer-open q-mr-sm","aria-label":"Open drawer",onClick:n[0]||(n[0]=i=>t.$emit("toggle-left-drawer"))}),oe(cn)?(U(),ve(Te,{key:1,flat:"",label:"Stop Screenshare",icon:"stop_screen_share",class:"text-grey-4",onClick:n[1]||(n[1]=i=>cn.value=void 0)})):(U(),ve(Te,{key:0,flat:"",label:"Start Screenshare",icon:"screen_share",class:"text-grey-4",onClick:oe(Ja)},null,8,["onClick"])),_(Ws),oe(Ha)?(U(),ve(Te,{key:2,flat:"",round:"",icon:"download",class:"q-mr-md",color:"positive",onClick:n[2]||(n[2]=i=>t.window.location.reload())},{default:k(()=>[_(Lt,null,{default:k(()=>[X("A new version is available")]),_:1})]),_:1})):Cr("",!0),me("div",Qs,vt(oe(ar)),1),_(Ur,{class:"q-mr-xs"},{default:k(()=>[_(ir,{hash:oe(Ir)},null,8,["hash"])]),_:1}),_(Te,{icon:"more_vert",ripple:!1,dense:"",round:"",flat:""},{default:k(()=>[_(Zr,{"auto-close":"",offset:[110,0]},{default:k(()=>[_(yt,{separator:"",style:{"min-width":"150px"}},{default:k(()=>[_(xe,{clickable:"",onClick:n[3]||(n[3]=i=>oe(en)(oe(Ir)))},{default:k(()=>[_(V,null,{default:k(()=>[_(Ie,null,{default:k(()=>[X("Copy own peer ID ")]),_:1})]),_:1}),_(V,{avatar:""},{default:k(()=>[_(Ce,{name:"content_copy"})]),_:1})]),_:1}),oe(r)?(U(),ve(xe,{key:0,onClick:n[4]||(n[4]=Ua(()=>{},["prevent"]))},{default:k(()=>[_(V,{style:{width:"200px"}},{default:k(()=>[_(Ie,null,{default:k(()=>[X("Commit")]),_:1}),_(Ie,{caption:"",class:"ellipsis text-grey"},{default:k(()=>[X(vt(oe(r)),1)]),_:1})]),_:1})]),_:1})):Cr("",!0)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}))}});var Ys=ci(Js,[["__scopeId","data-v-1043d4a0"]]);const Xs={class:"column no-wrap",style:{height:"100%"}},Zs={class:"column q-px-md q-mb-sm"},ec={class:"row q-py-sm items-center justify-between"},tc=me("div",{class:"text-h6",style:{"font-family":"sans-serif","user-select":"none"}}," W\u039BVE ",-1),oc=We({__name:"MainLayout",setup(e){const r=Va(),t=w(!1),n=w(""),i=b(()=>({height:r.screen.height+"px"}));function a(){t.value=!t.value}return(c,l)=>{const o=Wa("router-view");return U(),ye("div",{class:"WAL position-relative",style:Ga(oe(i))},[_(io,{view:"lHh Lpr lFf",class:"WAL__layout shadow-3",container:""},{default:k(()=>[_(Ys,{onToggleLeftDrawer:a,class:"bg-dark-alt-2"}),_(Za,{modelValue:t.value,"onUpdate:modelValue":l[0]||(l[0]=s=>t.value=s),"show-if-above":"",breakpoint:690},{default:k(()=>[me("div",Xs,[me("div",Zs,[me("div",ec,[tc,_(Te,{round:"",flat:"",icon:"close",class:"WAL__drawer-close",onClick:a})]),_(Ts)]),_(Gs)])]),_:1},8,["modelValue"]),_(eo,{class:"dark-transparent"},{default:k(()=>[_(o)]),_:1}),_(ro,null,{default:k(()=>[_(li,{class:"row bg-dark-alt"},{default:k(()=>[_(Te,{round:"",flat:"",icon:"insert_emoticon",class:"q-mr-sm"}),_($r,{rounded:"",outlined:"",dense:"",class:"WAL__field col-grow q-mr-sm",modelValue:n.value,"onUpdate:modelValue":l[1]||(l[1]=s=>n.value=s),placeholder:"Type a message"},null,8,["modelValue"]),_(Te,{round:"",flat:"",icon:"mic"})]),_:1})]),_:1})]),_:1})],4)}}});export{oc as default};
